{"dependencies":[{"name":"../../errors/abi.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":187,"index":187}}],"key":"5W+IXI3nhZ5FIpsDZmuMkio1GuI=","exportNames":["*"],"imports":1}},{"name":"../../errors/cursor.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":188},"end":{"line":2,"column":66,"index":254}}],"key":"WKGcIdPHDZp7wXv4J+35XnzHeow=","exportNames":["*"],"imports":1}},{"name":"../data/size.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":255},"end":{"line":3,"column":39,"index":294}}],"key":"U4xVlv6fru75wWM2ksCXz7lLGZk=","exportNames":["*"],"imports":1}},{"name":"../hash/toEventSelector.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":295},"end":{"line":4,"column":62,"index":357}}],"key":"krrvulLvqKqnvIPpeFzxlO3XBqI=","exportNames":["*"],"imports":1}},{"name":"./decodeAbiParameters.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":358},"end":{"line":5,"column":64,"index":422}}],"key":"idcjKmEiiliWePYzMQA+g7sYl7I=","exportNames":["*"],"imports":1}},{"name":"./formatAbiItem.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":423},"end":{"line":6,"column":51,"index":474}}],"key":"cMJuYY2ptHR6jaMpLhwMZkIv3yM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.decodeEventLog = decodeEventLog;\n  var _errorsAbiJs = require(_dependencyMap[0], \"../../errors/abi.js\");\n  var _errorsCursorJs = require(_dependencyMap[1], \"../../errors/cursor.js\");\n  var _dataSizeJs = require(_dependencyMap[2], \"../data/size.js\");\n  var _hashToEventSelectorJs = require(_dependencyMap[3], \"../hash/toEventSelector.js\");\n  var _decodeAbiParametersJs = require(_dependencyMap[4], \"./decodeAbiParameters.js\");\n  var _formatAbiItemJs = require(_dependencyMap[5], \"./formatAbiItem.js\");\n  const docsPath = '/docs/contract/decodeEventLog';\n  function decodeEventLog(parameters) {\n    const {\n      abi,\n      data,\n      strict: strict_,\n      topics\n    } = parameters;\n    const strict = strict_ ?? true;\n    const [signature, ...argTopics] = topics;\n    if (!signature) throw new _errorsAbiJs.AbiEventSignatureEmptyTopicsError({\n      docsPath\n    });\n    const abiItem = abi.find(x => x.type === 'event' && signature === (0, _hashToEventSelectorJs.toEventSelector)((0, _formatAbiItemJs.formatAbiItem)(x)));\n    if (!(abiItem && 'name' in abiItem) || abiItem.type !== 'event') throw new _errorsAbiJs.AbiEventSignatureNotFoundError(signature, {\n      docsPath\n    });\n    const {\n      name,\n      inputs\n    } = abiItem;\n    const isUnnamed = inputs?.some(x => !('name' in x && x.name));\n    const args = isUnnamed ? [] : {};\n    // Decode topics (indexed args).\n    const indexedInputs = inputs.map((x, i) => [x, i]).filter(([x]) => 'indexed' in x && x.indexed);\n    for (let i = 0; i < indexedInputs.length; i++) {\n      const [param, argIndex] = indexedInputs[i];\n      const topic = argTopics[i];\n      if (!topic) throw new _errorsAbiJs.DecodeLogTopicsMismatch({\n        abiItem,\n        param: param\n      });\n      args[isUnnamed ? argIndex : param.name || argIndex] = decodeTopic({\n        param,\n        value: topic\n      });\n    }\n    // Decode data (non-indexed args).\n    const nonIndexedInputs = inputs.filter(x => !('indexed' in x && x.indexed));\n    if (nonIndexedInputs.length > 0) {\n      if (data && data !== '0x') {\n        try {\n          const decodedData = (0, _decodeAbiParametersJs.decodeAbiParameters)(nonIndexedInputs, data);\n          if (decodedData) {\n            if (isUnnamed) for (let i = 0; i < inputs.length; i++) args[i] = args[i] ?? decodedData.shift();else for (let i = 0; i < nonIndexedInputs.length; i++) args[nonIndexedInputs[i].name] = decodedData[i];\n          }\n        } catch (err) {\n          if (strict) {\n            if (err instanceof _errorsAbiJs.AbiDecodingDataSizeTooSmallError || err instanceof _errorsCursorJs.PositionOutOfBoundsError) throw new _errorsAbiJs.DecodeLogDataMismatch({\n              abiItem,\n              data: data,\n              params: nonIndexedInputs,\n              size: (0, _dataSizeJs.size)(data)\n            });\n            throw err;\n          }\n        }\n      } else if (strict) {\n        throw new _errorsAbiJs.DecodeLogDataMismatch({\n          abiItem,\n          data: '0x',\n          params: nonIndexedInputs,\n          size: 0\n        });\n      }\n    }\n    return {\n      eventName: name,\n      args: Object.values(args).length > 0 ? args : undefined\n    };\n  }\n  function decodeTopic({\n    param,\n    value\n  }) {\n    if (param.type === 'string' || param.type === 'bytes' || param.type === 'tuple' || param.type.match(/^(.*)\\[(\\d+)?\\]$/)) return value;\n    const decodedArg = (0, _decodeAbiParametersJs.decodeAbiParameters)([param], value) || [];\n    return decodedArg[0];\n  }\n});","lineCount":93,"map":[[7,2,8,0,"exports"],[7,9,8,0],[7,10,8,0,"decodeEventLog"],[7,24,8,0],[7,27,8,0,"decodeEventLog"],[7,41,8,0],[8,2,1,0],[8,6,1,0,"_errorsAbiJs"],[8,18,1,0],[8,21,1,0,"require"],[8,28,1,0],[8,29,1,0,"_dependencyMap"],[8,43,1,0],[9,2,2,0],[9,6,2,0,"_errorsCursorJs"],[9,21,2,0],[9,24,2,0,"require"],[9,31,2,0],[9,32,2,0,"_dependencyMap"],[9,46,2,0],[10,2,3,0],[10,6,3,0,"_dataSizeJs"],[10,17,3,0],[10,20,3,0,"require"],[10,27,3,0],[10,28,3,0,"_dependencyMap"],[10,42,3,0],[11,2,4,0],[11,6,4,0,"_hashToEventSelectorJs"],[11,28,4,0],[11,31,4,0,"require"],[11,38,4,0],[11,39,4,0,"_dependencyMap"],[11,53,4,0],[12,2,5,0],[12,6,5,0,"_decodeAbiParametersJs"],[12,28,5,0],[12,31,5,0,"require"],[12,38,5,0],[12,39,5,0,"_dependencyMap"],[12,53,5,0],[13,2,6,0],[13,6,6,0,"_formatAbiItemJs"],[13,22,6,0],[13,25,6,0,"require"],[13,32,6,0],[13,33,6,0,"_dependencyMap"],[13,47,6,0],[14,2,7,0],[14,8,7,6,"docsPath"],[14,16,7,14],[14,19,7,17],[14,50,7,48],[15,2,8,7],[15,11,8,16,"decodeEventLog"],[15,25,8,30,"decodeEventLog"],[15,26,8,31,"parameters"],[15,36,8,41],[15,38,8,43],[16,4,9,4],[16,10,9,10],[17,6,9,12,"abi"],[17,9,9,15],[18,6,9,17,"data"],[18,10,9,21],[19,6,9,23,"strict"],[19,12,9,29],[19,14,9,31,"strict_"],[19,21,9,38],[20,6,9,40,"topics"],[21,4,9,48],[21,5,9,49],[21,8,9,52,"parameters"],[21,18,9,62],[22,4,10,4],[22,10,10,10,"strict"],[22,16,10,16],[22,19,10,19,"strict_"],[22,26,10,26],[22,30,10,30],[22,34,10,34],[23,4,11,4],[23,10,11,10],[23,11,11,11,"signature"],[23,20,11,20],[23,22,11,22],[23,25,11,25,"argTopics"],[23,34,11,34],[23,35,11,35],[23,38,11,38,"topics"],[23,44,11,44],[24,4,12,4],[24,8,12,8],[24,9,12,9,"signature"],[24,18,12,18],[24,20,13,8],[24,26,13,14],[24,30,13,18,"AbiEventSignatureEmptyTopicsError"],[24,42,13,51],[24,43,13,51,"AbiEventSignatureEmptyTopicsError"],[24,76,13,51],[24,77,13,52],[25,6,13,54,"docsPath"],[26,4,13,63],[26,5,13,64],[26,6,13,65],[27,4,14,4],[27,10,14,10,"abiItem"],[27,17,14,17],[27,20,14,20,"abi"],[27,23,14,23],[27,24,14,24,"find"],[27,28,14,28],[27,29,14,30,"x"],[27,30,14,31],[27,34,14,36,"x"],[27,35,14,37],[27,36,14,38,"type"],[27,40,14,42],[27,45,14,47],[27,52,14,54],[27,56,15,8,"signature"],[27,65,15,17],[27,70,15,22],[27,74,15,22,"toEventSelector"],[27,96,15,37],[27,97,15,37,"toEventSelector"],[27,112,15,37],[27,114,15,38],[27,118,15,38,"formatAbiItem"],[27,134,15,51],[27,135,15,51,"formatAbiItem"],[27,148,15,51],[27,150,15,52,"x"],[27,151,15,53],[27,152,15,54],[27,153,15,55],[27,154,15,56],[28,4,16,4],[28,8,16,8],[28,10,16,10,"abiItem"],[28,17,16,17],[28,21,16,21],[28,27,16,27],[28,31,16,31,"abiItem"],[28,38,16,38],[28,39,16,39],[28,43,16,43,"abiItem"],[28,50,16,50],[28,51,16,51,"type"],[28,55,16,55],[28,60,16,60],[28,67,16,67],[28,69,17,8],[28,75,17,14],[28,79,17,18,"AbiEventSignatureNotFoundError"],[28,91,17,48],[28,92,17,48,"AbiEventSignatureNotFoundError"],[28,122,17,48],[28,123,17,49,"signature"],[28,132,17,58],[28,134,17,60],[29,6,17,62,"docsPath"],[30,4,17,71],[30,5,17,72],[30,6,17,73],[31,4,18,4],[31,10,18,10],[32,6,18,12,"name"],[32,10,18,16],[33,6,18,18,"inputs"],[34,4,18,25],[34,5,18,26],[34,8,18,29,"abiItem"],[34,15,18,36],[35,4,19,4],[35,10,19,10,"isUnnamed"],[35,19,19,19],[35,22,19,22,"inputs"],[35,28,19,28],[35,30,19,30,"some"],[35,34,19,34],[35,35,19,36,"x"],[35,36,19,37],[35,40,19,42],[35,42,19,44],[35,48,19,50],[35,52,19,54,"x"],[35,53,19,55],[35,57,19,59,"x"],[35,58,19,60],[35,59,19,61,"name"],[35,63,19,65],[35,64,19,66],[35,65,19,67],[36,4,20,4],[36,10,20,10,"args"],[36,14,20,14],[36,17,20,17,"isUnnamed"],[36,26,20,26],[36,29,20,29],[36,31,20,31],[36,34,20,34],[36,35,20,35],[36,36,20,36],[37,4,21,4],[38,4,22,4],[38,10,22,10,"indexedInputs"],[38,23,22,23],[38,26,22,26,"inputs"],[38,32,22,32],[38,33,23,9,"map"],[38,36,23,12],[38,37,23,13],[38,38,23,14,"x"],[38,39,23,15],[38,41,23,17,"i"],[38,42,23,18],[38,47,23,23],[38,48,23,24,"x"],[38,49,23,25],[38,51,23,27,"i"],[38,52,23,28],[38,53,23,29],[38,54,23,30],[38,55,24,9,"filter"],[38,61,24,15],[38,62,24,16],[38,63,24,17],[38,64,24,18,"x"],[38,65,24,19],[38,66,24,20],[38,71,24,25],[38,80,24,34],[38,84,24,38,"x"],[38,85,24,39],[38,89,24,43,"x"],[38,90,24,44],[38,91,24,45,"indexed"],[38,98,24,52],[38,99,24,53],[39,4,25,4],[39,9,25,9],[39,13,25,13,"i"],[39,14,25,14],[39,17,25,17],[39,18,25,18],[39,20,25,20,"i"],[39,21,25,21],[39,24,25,24,"indexedInputs"],[39,37,25,37],[39,38,25,38,"length"],[39,44,25,44],[39,46,25,46,"i"],[39,47,25,47],[39,49,25,49],[39,51,25,51],[40,6,26,8],[40,12,26,14],[40,13,26,15,"param"],[40,18,26,20],[40,20,26,22,"argIndex"],[40,28,26,30],[40,29,26,31],[40,32,26,34,"indexedInputs"],[40,45,26,47],[40,46,26,48,"i"],[40,47,26,49],[40,48,26,50],[41,6,27,8],[41,12,27,14,"topic"],[41,17,27,19],[41,20,27,22,"argTopics"],[41,29,27,31],[41,30,27,32,"i"],[41,31,27,33],[41,32,27,34],[42,6,28,8],[42,10,28,12],[42,11,28,13,"topic"],[42,16,28,18],[42,18,29,12],[42,24,29,18],[42,28,29,22,"DecodeLogTopicsMismatch"],[42,40,29,45],[42,41,29,45,"DecodeLogTopicsMismatch"],[42,64,29,45],[42,65,29,46],[43,8,30,16,"abiItem"],[43,15,30,23],[44,8,31,16,"param"],[44,13,31,21],[44,15,31,23,"param"],[45,6,32,12],[45,7,32,13],[45,8,32,14],[46,6,33,8,"args"],[46,10,33,12],[46,11,33,13,"isUnnamed"],[46,20,33,22],[46,23,33,25,"argIndex"],[46,31,33,33],[46,34,33,36,"param"],[46,39,33,41],[46,40,33,42,"name"],[46,44,33,46],[46,48,33,50,"argIndex"],[46,56,33,58],[46,57,33,59],[46,60,33,62,"decodeTopic"],[46,71,33,73],[46,72,33,74],[47,8,34,12,"param"],[47,13,34,17],[48,8,35,12,"value"],[48,13,35,17],[48,15,35,19,"topic"],[49,6,36,8],[49,7,36,9],[49,8,36,10],[50,4,37,4],[51,4,38,4],[52,4,39,4],[52,10,39,10,"nonIndexedInputs"],[52,26,39,26],[52,29,39,29,"inputs"],[52,35,39,35],[52,36,39,36,"filter"],[52,42,39,42],[52,43,39,44,"x"],[52,44,39,45],[52,48,39,50],[52,50,39,52],[52,59,39,61],[52,63,39,65,"x"],[52,64,39,66],[52,68,39,70,"x"],[52,69,39,71],[52,70,39,72,"indexed"],[52,77,39,79],[52,78,39,80],[52,79,39,81],[53,4,40,4],[53,8,40,8,"nonIndexedInputs"],[53,24,40,24],[53,25,40,25,"length"],[53,31,40,31],[53,34,40,34],[53,35,40,35],[53,37,40,37],[54,6,41,8],[54,10,41,12,"data"],[54,14,41,16],[54,18,41,20,"data"],[54,22,41,24],[54,27,41,29],[54,31,41,33],[54,33,41,35],[55,8,42,12],[55,12,42,16],[56,10,43,16],[56,16,43,22,"decodedData"],[56,27,43,33],[56,30,43,36],[56,34,43,36,"decodeAbiParameters"],[56,56,43,55],[56,57,43,55,"decodeAbiParameters"],[56,76,43,55],[56,78,43,56,"nonIndexedInputs"],[56,94,43,72],[56,96,43,74,"data"],[56,100,43,78],[56,101,43,79],[57,10,44,16],[57,14,44,20,"decodedData"],[57,25,44,31],[57,27,44,33],[58,12,45,20],[58,16,45,24,"isUnnamed"],[58,25,45,33],[58,27,46,24],[58,32,46,29],[58,36,46,33,"i"],[58,37,46,34],[58,40,46,37],[58,41,46,38],[58,43,46,40,"i"],[58,44,46,41],[58,47,46,44,"inputs"],[58,53,46,50],[58,54,46,51,"length"],[58,60,46,57],[58,62,46,59,"i"],[58,63,46,60],[58,65,46,62],[58,67,47,28,"args"],[58,71,47,32],[58,72,47,33,"i"],[58,73,47,34],[58,74,47,35],[58,77,47,38,"args"],[58,81,47,42],[58,82,47,43,"i"],[58,83,47,44],[58,84,47,45],[58,88,47,49,"decodedData"],[58,99,47,60],[58,100,47,61,"shift"],[58,105,47,66],[58,106,47,67],[58,107,47,68],[58,108,47,69],[58,113,49,24],[58,118,49,29],[58,122,49,33,"i"],[58,123,49,34],[58,126,49,37],[58,127,49,38],[58,129,49,40,"i"],[58,130,49,41],[58,133,49,44,"nonIndexedInputs"],[58,149,49,60],[58,150,49,61,"length"],[58,156,49,67],[58,158,49,69,"i"],[58,159,49,70],[58,161,49,72],[58,163,50,28,"args"],[58,167,50,32],[58,168,50,33,"nonIndexedInputs"],[58,184,50,49],[58,185,50,50,"i"],[58,186,50,51],[58,187,50,52],[58,188,50,53,"name"],[58,192,50,57],[58,193,50,58],[58,196,50,61,"decodedData"],[58,207,50,72],[58,208,50,73,"i"],[58,209,50,74],[58,210,50,75],[59,10,51,16],[60,8,52,12],[60,9,52,13],[60,10,53,12],[60,17,53,19,"err"],[60,20,53,22],[60,22,53,24],[61,10,54,16],[61,14,54,20,"strict"],[61,20,54,26],[61,22,54,28],[62,12,55,20],[62,16,55,24,"err"],[62,19,55,27],[62,31,55,39,"AbiDecodingDataSizeTooSmallError"],[62,43,55,71],[62,44,55,71,"AbiDecodingDataSizeTooSmallError"],[62,76,55,71],[62,80,56,24,"err"],[62,83,56,27],[62,95,56,39,"PositionOutOfBoundsError"],[62,110,56,63],[62,111,56,63,"PositionOutOfBoundsError"],[62,135,56,63],[62,137,57,24],[62,143,57,30],[62,147,57,34,"DecodeLogDataMismatch"],[62,159,57,55],[62,160,57,55,"DecodeLogDataMismatch"],[62,181,57,55],[62,182,57,56],[63,14,58,28,"abiItem"],[63,21,58,35],[64,14,59,28,"data"],[64,18,59,32],[64,20,59,34,"data"],[64,24,59,38],[65,14,60,28,"params"],[65,20,60,34],[65,22,60,36,"nonIndexedInputs"],[65,38,60,52],[66,14,61,28,"size"],[66,18,61,32],[66,20,61,34],[66,24,61,34,"size"],[66,35,61,38],[66,36,61,38,"size"],[66,40,61,38],[66,42,61,39,"data"],[66,46,61,43],[67,12,62,24],[67,13,62,25],[67,14,62,26],[68,12,63,20],[68,18,63,26,"err"],[68,21,63,29],[69,10,64,16],[70,8,65,12],[71,6,66,8],[71,7,66,9],[71,13,67,13],[71,17,67,17,"strict"],[71,23,67,23],[71,25,67,25],[72,8,68,12],[72,14,68,18],[72,18,68,22,"DecodeLogDataMismatch"],[72,30,68,43],[72,31,68,43,"DecodeLogDataMismatch"],[72,52,68,43],[72,53,68,44],[73,10,69,16,"abiItem"],[73,17,69,23],[74,10,70,16,"data"],[74,14,70,20],[74,16,70,22],[74,20,70,26],[75,10,71,16,"params"],[75,16,71,22],[75,18,71,24,"nonIndexedInputs"],[75,34,71,40],[76,10,72,16,"size"],[76,14,72,20],[76,16,72,22],[77,8,73,12],[77,9,73,13],[77,10,73,14],[78,6,74,8],[79,4,75,4],[80,4,76,4],[80,11,76,11],[81,6,77,8,"eventName"],[81,15,77,17],[81,17,77,19,"name"],[81,21,77,23],[82,6,78,8,"args"],[82,10,78,12],[82,12,78,14,"Object"],[82,18,78,20],[82,19,78,21,"values"],[82,25,78,27],[82,26,78,28,"args"],[82,30,78,32],[82,31,78,33],[82,32,78,34,"length"],[82,38,78,40],[82,41,78,43],[82,42,78,44],[82,45,78,47,"args"],[82,49,78,51],[82,52,78,54,"undefined"],[83,4,79,4],[83,5,79,5],[84,2,80,0],[85,2,81,0],[85,11,81,9,"decodeTopic"],[85,22,81,20,"decodeTopic"],[85,23,81,21],[86,4,81,23,"param"],[86,9,81,28],[87,4,81,30,"value"],[88,2,81,36],[88,3,81,37],[88,5,81,39],[89,4,82,4],[89,8,82,8,"param"],[89,13,82,13],[89,14,82,14,"type"],[89,18,82,18],[89,23,82,23],[89,31,82,31],[89,35,83,8,"param"],[89,40,83,13],[89,41,83,14,"type"],[89,45,83,18],[89,50,83,23],[89,57,83,30],[89,61,84,8,"param"],[89,66,84,13],[89,67,84,14,"type"],[89,71,84,18],[89,76,84,23],[89,83,84,30],[89,87,85,8,"param"],[89,92,85,13],[89,93,85,14,"type"],[89,97,85,18],[89,98,85,19,"match"],[89,103,85,24],[89,104,85,25],[89,122,85,43],[89,123,85,44],[89,125,86,8],[89,132,86,15,"value"],[89,137,86,20],[90,4,87,4],[90,10,87,10,"decodedArg"],[90,20,87,20],[90,23,87,23],[90,27,87,23,"decodeAbiParameters"],[90,49,87,42],[90,50,87,42,"decodeAbiParameters"],[90,69,87,42],[90,71,87,43],[90,72,87,44,"param"],[90,77,87,49],[90,78,87,50],[90,80,87,52,"value"],[90,85,87,57],[90,86,87,58],[90,90,87,62],[90,92,87,64],[91,4,88,4],[91,11,88,11,"decodedArg"],[91,21,88,21],[91,22,88,22],[91,23,88,23],[91,24,88,24],[92,2,89,0],[93,0,89,1],[93,3]],"functionMap":{"names":["<global>","decodeEventLog","abi.find$argument_0","inputs.some$argument_0","inputs.map$argument_0","inputs.map.filter$argument_0","inputs.filter$argument_0","decodeTopic"],"mappings":"AAA;OCO;6BCM;uDDC;mCEI,+BF;aGI,gBH;gBIC,oCJ;2CKe,qCL;CDyC;AOC;CPQ"},"hasCjsExports":false},"type":"js/module"}]}