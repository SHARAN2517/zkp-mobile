{"dependencies":[{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"valtio/vanilla","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":41},"end":{"line":2,"column":57,"index":98}}],"key":"tlag/MsaYf2kg1zwNazSfjYKwjI=","exportNames":["*"],"imports":1}},{"name":"./ApiController","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":48,"index":147}}],"key":"Y5OCzIBZ0cMoo3z+/7kl1Mx/uo8=","exportNames":["*"],"imports":1}},{"name":"./OptionsController","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":148},"end":{"line":4,"column":56,"index":204}}],"key":"Ej9StpVX5q5zKjc8n2tLkZTJ0vU=","exportNames":["*"],"imports":1}},{"name":"../utils/CoreHelperUtil","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":205},"end":{"line":5,"column":57,"index":262}}],"key":"/1JUPaYwQbtFj3jwU0MKgyBNGuw=","exportNames":["*"],"imports":1}},{"name":"../utils/FetchUtil","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":263},"end":{"line":6,"column":47,"index":310}}],"key":"TeI04Fp5brX5qBRiFKRoIVi2gy4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"EventsController\", {\n    enumerable: true,\n    get: function () {\n      return EventsController;\n    }\n  });\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[0], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _valtioVanilla = require(_dependencyMap[1], \"valtio/vanilla\");\n  var _ApiController = require(_dependencyMap[2], \"./ApiController\");\n  var _OptionsController = require(_dependencyMap[3], \"./OptionsController\");\n  var _utilsCoreHelperUtil = require(_dependencyMap[4], \"../utils/CoreHelperUtil\");\n  var _utilsFetchUtil = require(_dependencyMap[5], \"../utils/FetchUtil\");\n  // -- Helpers ------------------------------------------- //\n  const baseUrl = _utilsCoreHelperUtil.CoreHelperUtil.getAnalyticsUrl();\n  const api = new _utilsFetchUtil.FetchUtil({\n    baseUrl\n  });\n  const excluded = ['MODAL_CREATED'];\n\n  // -- Types --------------------------------------------- //\n\n  // -- State --------------------------------------------- //\n  const state = (0, _valtioVanilla.proxy)({\n    timestamp: Date.now(),\n    data: {\n      type: 'track',\n      event: 'MODAL_CREATED' // just for init purposes\n    }\n  });\n\n  // -- Controller ---------------------------------------- //\n  const EventsController = {\n    state,\n    subscribe(callback) {\n      return (0, _valtioVanilla.subscribe)(state, () => callback(state));\n    },\n    _getApiHeaders() {\n      const {\n        projectId,\n        sdkType,\n        sdkVersion\n      } = _OptionsController.OptionsController.state;\n      return {\n        'x-project-id': projectId,\n        'x-sdk-type': sdkType,\n        'x-sdk-version': sdkVersion,\n        'User-Agent': `${Platform.default.OS}-${Platform.default.Version}`\n      };\n    },\n    async _sendAnalyticsEvent(data, timestamp) {\n      if (excluded.includes(data.event)) {\n        return;\n      }\n      try {\n        await api.post({\n          path: '/e',\n          headers: this._getApiHeaders(),\n          body: {\n            eventId: _utilsCoreHelperUtil.CoreHelperUtil.getUUID(),\n            bundleId: _utilsCoreHelperUtil.CoreHelperUtil.getBundleId(),\n            timestamp,\n            props: data\n          }\n        });\n      } catch {\n        // Catch silently\n      }\n    },\n    async sendEvent(data) {\n      const timestamp = Date.now();\n      state.timestamp = timestamp;\n      state.data = data;\n      await _ApiController.ApiController.state.prefetchPromise;\n      if (_OptionsController.OptionsController.state.enableAnalytics) {\n        EventsController._sendAnalyticsEvent(data, timestamp);\n      }\n    }\n  };\n});","lineCount":91,"map":[[12,2,26,0,"Object"],[12,8,26,0],[12,9,26,0,"defineProperty"],[12,23,26,0],[12,24,26,0,"exports"],[12,31,26,0],[13,4,26,0,"enumerable"],[13,14,26,0],[14,4,26,0,"get"],[14,7,26,0],[14,18,26,0,"get"],[14,19,26,0],[15,6,26,0],[15,13,26,0,"EventsController"],[15,29,26,0],[16,4,26,0],[17,2,26,0],[18,2,72,2],[18,6,72,2,"_reactNativeWebDistExportsPlatform"],[18,40,72,2],[18,43,72,2,"require"],[18,50,72,2],[18,51,72,2,"_dependencyMap"],[18,65,72,2],[19,2,72,2],[19,6,72,2,"Platform"],[19,14,72,2],[19,17,72,2,"_interopDefault"],[19,32,72,2],[19,33,72,2,"_reactNativeWebDistExportsPlatform"],[19,67,72,2],[20,2,2,0],[20,6,2,0,"_valtioVanilla"],[20,20,2,0],[20,23,2,0,"require"],[20,30,2,0],[20,31,2,0,"_dependencyMap"],[20,45,2,0],[21,2,3,0],[21,6,3,0,"_ApiController"],[21,20,3,0],[21,23,3,0,"require"],[21,30,3,0],[21,31,3,0,"_dependencyMap"],[21,45,3,0],[22,2,4,0],[22,6,4,0,"_OptionsController"],[22,24,4,0],[22,27,4,0,"require"],[22,34,4,0],[22,35,4,0,"_dependencyMap"],[22,49,4,0],[23,2,5,0],[23,6,5,0,"_utilsCoreHelperUtil"],[23,26,5,0],[23,29,5,0,"require"],[23,36,5,0],[23,37,5,0,"_dependencyMap"],[23,51,5,0],[24,2,6,0],[24,6,6,0,"_utilsFetchUtil"],[24,21,6,0],[24,24,6,0,"require"],[24,31,6,0],[24,32,6,0,"_dependencyMap"],[24,46,6,0],[25,2,7,0],[26,2,8,0],[26,8,8,6,"baseUrl"],[26,15,8,13],[26,18,8,16,"CoreHelperUtil"],[26,38,8,30],[26,39,8,30,"CoreHelperUtil"],[26,53,8,30],[26,54,8,31,"getAnalyticsUrl"],[26,69,8,46],[26,70,8,47],[26,71,8,48],[27,2,9,0],[27,8,9,6,"api"],[27,11,9,9],[27,14,9,12],[27,18,9,16,"FetchUtil"],[27,33,9,25],[27,34,9,25,"FetchUtil"],[27,43,9,25],[27,44,9,26],[28,4,10,2,"baseUrl"],[29,2,11,0],[29,3,11,1],[29,4,11,2],[30,2,12,0],[30,8,12,6,"excluded"],[30,16,12,14],[30,19,12,17],[30,20,12,18],[30,35,12,33],[30,36,12,34],[32,2,14,0],[34,2,16,0],[35,2,17,0],[35,8,17,6,"state"],[35,13,17,11],[35,16,17,14],[35,20,17,14,"proxy"],[35,34,17,19],[35,35,17,19,"proxy"],[35,40,17,19],[35,42,17,20],[36,4,18,2,"timestamp"],[36,13,18,11],[36,15,18,13,"Date"],[36,19,18,17],[36,20,18,18,"now"],[36,23,18,21],[36,24,18,22],[36,25,18,23],[37,4,19,2,"data"],[37,8,19,6],[37,10,19,8],[38,6,20,4,"type"],[38,10,20,8],[38,12,20,10],[38,19,20,17],[39,6,21,4,"event"],[39,11,21,9],[39,13,21,11],[39,28,21,26],[39,29,21,27],[40,4,22,2],[41,2,23,0],[41,3,23,1],[41,4,23,2],[43,2,25,0],[44,2,26,7],[44,8,26,13,"EventsController"],[44,24,26,29],[44,27,26,32],[45,4,27,2,"state"],[45,9,27,7],[46,4,28,2,"subscribe"],[46,13,28,11,"subscribe"],[46,14,28,12,"callback"],[46,22,28,20],[46,24,28,22],[47,6,29,4],[47,13,29,11],[47,17,29,11,"sub"],[47,31,29,14],[47,32,29,14,"subscribe"],[47,41,29,14],[47,43,29,15,"state"],[47,48,29,20],[47,50,29,22],[47,56,29,28,"callback"],[47,64,29,36],[47,65,29,37,"state"],[47,70,29,42],[47,71,29,43],[47,72,29,44],[48,4,30,2],[48,5,30,3],[49,4,31,2,"_getApiHeaders"],[49,18,31,16,"_getApiHeaders"],[49,19,31,16],[49,21,31,19],[50,6,32,4],[50,12,32,10],[51,8,33,6,"projectId"],[51,17,33,15],[52,8,34,6,"sdkType"],[52,15,34,13],[53,8,35,6,"sdkVersion"],[54,6,36,4],[54,7,36,5],[54,10,36,8,"OptionsController"],[54,28,36,25],[54,29,36,25,"OptionsController"],[54,46,36,25],[54,47,36,26,"state"],[54,52,36,31],[55,6,37,4],[55,13,37,11],[56,8,38,6],[56,22,38,20],[56,24,38,22,"projectId"],[56,33,38,31],[57,8,39,6],[57,20,39,18],[57,22,39,20,"sdkType"],[57,29,39,27],[58,8,40,6],[58,23,40,21],[58,25,40,23,"sdkVersion"],[58,35,40,33],[59,8,41,6],[59,20,41,18],[59,22,41,20],[59,25,41,23,"Platform"],[59,33,41,31],[59,34,41,31,"default"],[59,41,41,31],[59,42,41,32,"OS"],[59,44,41,34],[59,48,41,38,"Platform"],[59,56,41,46],[59,57,41,46,"default"],[59,64,41,46],[59,65,41,47,"Version"],[59,72,41,54],[60,6,42,4],[60,7,42,5],[61,4,43,2],[61,5,43,3],[62,4,44,2],[62,10,44,8,"_sendAnalyticsEvent"],[62,29,44,27,"_sendAnalyticsEvent"],[62,30,44,28,"data"],[62,34,44,32],[62,36,44,34,"timestamp"],[62,45,44,43],[62,47,44,45],[63,6,45,4],[63,10,45,8,"excluded"],[63,18,45,16],[63,19,45,17,"includes"],[63,27,45,25],[63,28,45,26,"data"],[63,32,45,30],[63,33,45,31,"event"],[63,38,45,36],[63,39,45,37],[63,41,45,39],[64,8,46,6],[65,6,47,4],[66,6,48,4],[66,10,48,8],[67,8,49,6],[67,14,49,12,"api"],[67,17,49,15],[67,18,49,16,"post"],[67,22,49,20],[67,23,49,21],[68,10,50,8,"path"],[68,14,50,12],[68,16,50,14],[68,20,50,18],[69,10,51,8,"headers"],[69,17,51,15],[69,19,51,17],[69,23,51,21],[69,24,51,22,"_getApiHeaders"],[69,38,51,36],[69,39,51,37],[69,40,51,38],[70,10,52,8,"body"],[70,14,52,12],[70,16,52,14],[71,12,53,10,"eventId"],[71,19,53,17],[71,21,53,19,"CoreHelperUtil"],[71,41,53,33],[71,42,53,33,"CoreHelperUtil"],[71,56,53,33],[71,57,53,34,"getUUID"],[71,64,53,41],[71,65,53,42],[71,66,53,43],[72,12,54,10,"bundleId"],[72,20,54,18],[72,22,54,20,"CoreHelperUtil"],[72,42,54,34],[72,43,54,34,"CoreHelperUtil"],[72,57,54,34],[72,58,54,35,"getBundleId"],[72,69,54,46],[72,70,54,47],[72,71,54,48],[73,12,55,10,"timestamp"],[73,21,55,19],[74,12,56,10,"props"],[74,17,56,15],[74,19,56,17,"data"],[75,10,57,8],[76,8,58,6],[76,9,58,7],[76,10,58,8],[77,6,59,4],[77,7,59,5],[77,8,59,6],[77,14,59,12],[78,8,60,6],[79,6,60,6],[80,4,62,2],[80,5,62,3],[81,4,63,2],[81,10,63,8,"sendEvent"],[81,19,63,17,"sendEvent"],[81,20,63,18,"data"],[81,24,63,22],[81,26,63,24],[82,6,64,4],[82,12,64,10,"timestamp"],[82,21,64,19],[82,24,64,22,"Date"],[82,28,64,26],[82,29,64,27,"now"],[82,32,64,30],[82,33,64,31],[82,34,64,32],[83,6,65,4,"state"],[83,11,65,9],[83,12,65,10,"timestamp"],[83,21,65,19],[83,24,65,22,"timestamp"],[83,33,65,31],[84,6,66,4,"state"],[84,11,66,9],[84,12,66,10,"data"],[84,16,66,14],[84,19,66,17,"data"],[84,23,66,21],[85,6,67,4],[85,12,67,10,"ApiController"],[85,26,67,23],[85,27,67,23,"ApiController"],[85,40,67,23],[85,41,67,24,"state"],[85,46,67,29],[85,47,67,30,"prefetchPromise"],[85,62,67,45],[86,6,68,4],[86,10,68,8,"OptionsController"],[86,28,68,25],[86,29,68,25,"OptionsController"],[86,46,68,25],[86,47,68,26,"state"],[86,52,68,31],[86,53,68,32,"enableAnalytics"],[86,68,68,47],[86,70,68,49],[87,8,69,6,"EventsController"],[87,24,69,22],[87,25,69,23,"_sendAnalyticsEvent"],[87,44,69,42],[87,45,69,43,"data"],[87,49,69,47],[87,51,69,49,"timestamp"],[87,60,69,58],[87,61,69,59],[88,6,70,4],[89,4,71,2],[90,2,72,0],[90,3,72,1],[91,0,72,2],[91,3]],"functionMap":{"names":["<global>","subscribe","sub$argument_1","_getApiHeaders","_sendAnalyticsEvent","sendEvent"],"mappings":"AAA;EC2B;sBCC,qBD;GDC;EGC;GHY;EIC;GJkB;EKC;GLQ"},"hasCjsExports":false},"type":"js/module"}]}