{"dependencies":[{"name":"../errors/config.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":70,"index":70}}],"key":"qbGdd17RtCZD4309fD0Ym6HlSn4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.connect = connect;\n  var _errorsConfigJs = require(_dependencyMap[0], \"../errors/config.js\");\n  /** https://wagmi.sh/core/api/actions/connect */\n  async function connect(config, parameters) {\n    // \"Register\" connector if not already created\n    let connector;\n    if (typeof parameters.connector === 'function') {\n      connector = config._internal.connectors.setup(parameters.connector);\n    } else connector = parameters.connector;\n    // Check if connector is already connected\n    if (connector.uid === config.state.current) throw new _errorsConfigJs.ConnectorAlreadyConnectedError();\n    try {\n      config.setState(x => ({\n        ...x,\n        status: 'connecting'\n      }));\n      connector.emitter.emit('message', {\n        type: 'connecting'\n      });\n      const {\n        connector: _,\n        ...rest\n      } = parameters;\n      const data = await connector.connect(rest);\n      connector.emitter.off('connect', config._internal.events.connect);\n      connector.emitter.on('change', config._internal.events.change);\n      connector.emitter.on('disconnect', config._internal.events.disconnect);\n      await config.storage?.setItem('recentConnectorId', connector.id);\n      config.setState(x => ({\n        ...x,\n        connections: new Map(x.connections).set(connector.uid, {\n          accounts: rest.withCapabilities ? data.accounts.map(account => typeof account === 'object' ? account.address : account) : data.accounts,\n          chainId: data.chainId,\n          connector: connector\n        }),\n        current: connector.uid,\n        status: 'connected'\n      }));\n      return {\n        // TODO(v3): Remove `withCapabilities: true` default behavior so remove compat marshalling\n        // Workaround so downstream connectors work with `withCapabilities` without any changes required\n        accounts: rest.withCapabilities ? data.accounts.map(address => typeof address === 'object' ? address : {\n          address,\n          capabilities: {}\n        }) : data.accounts,\n        chainId: data.chainId\n      };\n    } catch (error) {\n      config.setState(x => ({\n        ...x,\n        // Keep existing connector connected in case of error\n        status: x.current ? 'connected' : 'disconnected'\n      }));\n      throw error;\n    }\n  }\n});","lineCount":63,"map":[[7,2,3,0,"exports"],[7,9,3,0],[7,10,3,0,"connect"],[7,17,3,0],[7,20,3,0,"connect"],[7,27,3,0],[8,2,1,0],[8,6,1,0,"_errorsConfigJs"],[8,21,1,0],[8,24,1,0,"require"],[8,31,1,0],[8,32,1,0,"_dependencyMap"],[8,46,1,0],[9,2,2,0],[10,2,3,7],[10,17,3,22,"connect"],[10,24,3,29,"connect"],[10,25,3,30,"config"],[10,31,3,36],[10,33,3,38,"parameters"],[10,43,3,48],[10,45,3,50],[11,4,4,4],[12,4,5,4],[12,8,5,8,"connector"],[12,17,5,17],[13,4,6,4],[13,8,6,8],[13,15,6,15,"parameters"],[13,25,6,25],[13,26,6,26,"connector"],[13,35,6,35],[13,40,6,40],[13,50,6,50],[13,52,6,52],[14,6,7,8,"connector"],[14,15,7,17],[14,18,7,20,"config"],[14,24,7,26],[14,25,7,27,"_internal"],[14,34,7,36],[14,35,7,37,"connectors"],[14,45,7,47],[14,46,7,48,"setup"],[14,51,7,53],[14,52,7,54,"parameters"],[14,62,7,64],[14,63,7,65,"connector"],[14,72,7,74],[14,73,7,75],[15,4,8,4],[15,5,8,5],[15,11,10,8,"connector"],[15,20,10,17],[15,23,10,20,"parameters"],[15,33,10,30],[15,34,10,31,"connector"],[15,43,10,40],[16,4,11,4],[17,4,12,4],[17,8,12,8,"connector"],[17,17,12,17],[17,18,12,18,"uid"],[17,21,12,21],[17,26,12,26,"config"],[17,32,12,32],[17,33,12,33,"state"],[17,38,12,38],[17,39,12,39,"current"],[17,46,12,46],[17,48,13,8],[17,54,13,14],[17,58,13,18,"ConnectorAlreadyConnectedError"],[17,73,13,48],[17,74,13,48,"ConnectorAlreadyConnectedError"],[17,104,13,48],[17,105,13,49],[17,106,13,50],[18,4,14,4],[18,8,14,8],[19,6,15,8,"config"],[19,12,15,14],[19,13,15,15,"setState"],[19,21,15,23],[19,22,15,25,"x"],[19,23,15,26],[19,28,15,32],[20,8,15,34],[20,11,15,37,"x"],[20,12,15,38],[21,8,15,40,"status"],[21,14,15,46],[21,16,15,48],[22,6,15,61],[22,7,15,62],[22,8,15,63],[22,9,15,64],[23,6,16,8,"connector"],[23,15,16,17],[23,16,16,18,"emitter"],[23,23,16,25],[23,24,16,26,"emit"],[23,28,16,30],[23,29,16,31],[23,38,16,40],[23,40,16,42],[24,8,16,44,"type"],[24,12,16,48],[24,14,16,50],[25,6,16,63],[25,7,16,64],[25,8,16,65],[26,6,17,8],[26,12,17,14],[27,8,17,16,"connector"],[27,17,17,25],[27,19,17,27,"_"],[27,20,17,28],[28,8,17,30],[28,11,17,33,"rest"],[29,6,17,38],[29,7,17,39],[29,10,17,42,"parameters"],[29,20,17,52],[30,6,18,8],[30,12,18,14,"data"],[30,16,18,18],[30,19,18,21],[30,25,18,27,"connector"],[30,34,18,36],[30,35,18,37,"connect"],[30,42,18,44],[30,43,18,45,"rest"],[30,47,18,49],[30,48,18,50],[31,6,19,8,"connector"],[31,15,19,17],[31,16,19,18,"emitter"],[31,23,19,25],[31,24,19,26,"off"],[31,27,19,29],[31,28,19,30],[31,37,19,39],[31,39,19,41,"config"],[31,45,19,47],[31,46,19,48,"_internal"],[31,55,19,57],[31,56,19,58,"events"],[31,62,19,64],[31,63,19,65,"connect"],[31,70,19,72],[31,71,19,73],[32,6,20,8,"connector"],[32,15,20,17],[32,16,20,18,"emitter"],[32,23,20,25],[32,24,20,26,"on"],[32,26,20,28],[32,27,20,29],[32,35,20,37],[32,37,20,39,"config"],[32,43,20,45],[32,44,20,46,"_internal"],[32,53,20,55],[32,54,20,56,"events"],[32,60,20,62],[32,61,20,63,"change"],[32,67,20,69],[32,68,20,70],[33,6,21,8,"connector"],[33,15,21,17],[33,16,21,18,"emitter"],[33,23,21,25],[33,24,21,26,"on"],[33,26,21,28],[33,27,21,29],[33,39,21,41],[33,41,21,43,"config"],[33,47,21,49],[33,48,21,50,"_internal"],[33,57,21,59],[33,58,21,60,"events"],[33,64,21,66],[33,65,21,67,"disconnect"],[33,75,21,77],[33,76,21,78],[34,6,22,8],[34,12,22,14,"config"],[34,18,22,20],[34,19,22,21,"storage"],[34,26,22,28],[34,28,22,30,"setItem"],[34,35,22,37],[34,36,22,38],[34,55,22,57],[34,57,22,59,"connector"],[34,66,22,68],[34,67,22,69,"id"],[34,69,22,71],[34,70,22,72],[35,6,23,8,"config"],[35,12,23,14],[35,13,23,15,"setState"],[35,21,23,23],[35,22,23,25,"x"],[35,23,23,26],[35,28,23,32],[36,8,24,12],[36,11,24,15,"x"],[36,12,24,16],[37,8,25,12,"connections"],[37,19,25,23],[37,21,25,25],[37,25,25,29,"Map"],[37,28,25,32],[37,29,25,33,"x"],[37,30,25,34],[37,31,25,35,"connections"],[37,42,25,46],[37,43,25,47],[37,44,25,48,"set"],[37,47,25,51],[37,48,25,52,"connector"],[37,57,25,61],[37,58,25,62,"uid"],[37,61,25,65],[37,63,25,67],[38,10,26,16,"accounts"],[38,18,26,24],[38,20,26,27,"rest"],[38,24,26,31],[38,25,26,32,"withCapabilities"],[38,41,26,48],[38,44,27,22,"data"],[38,48,27,26],[38,49,27,27,"accounts"],[38,57,27,35],[38,58,27,36,"map"],[38,61,27,39],[38,62,27,41,"account"],[38,69,27,48],[38,73,27,53],[38,80,27,60,"account"],[38,87,27,67],[38,92,27,72],[38,100,27,80],[38,103,27,83,"account"],[38,110,27,90],[38,111,27,91,"address"],[38,118,27,98],[38,121,27,101,"account"],[38,128,27,108],[38,129,27,109],[38,132,28,22,"data"],[38,136,28,26],[38,137,28,27,"accounts"],[38,145,28,36],[39,10,29,16,"chainId"],[39,17,29,23],[39,19,29,25,"data"],[39,23,29,29],[39,24,29,30,"chainId"],[39,31,29,37],[40,10,30,16,"connector"],[40,19,30,25],[40,21,30,27,"connector"],[41,8,31,12],[41,9,31,13],[41,10,31,14],[42,8,32,12,"current"],[42,15,32,19],[42,17,32,21,"connector"],[42,26,32,30],[42,27,32,31,"uid"],[42,30,32,34],[43,8,33,12,"status"],[43,14,33,18],[43,16,33,20],[44,6,34,8],[44,7,34,9],[44,8,34,10],[44,9,34,11],[45,6,35,8],[45,13,35,15],[46,8,36,12],[47,8,37,12],[48,8,38,12,"accounts"],[48,16,38,20],[48,18,38,23,"rest"],[48,22,38,27],[48,23,38,28,"withCapabilities"],[48,39,38,44],[48,42,39,18,"data"],[48,46,39,22],[48,47,39,23,"accounts"],[48,55,39,31],[48,56,39,32,"map"],[48,59,39,35],[48,60,39,37,"address"],[48,67,39,44],[48,71,39,49],[48,78,39,56,"address"],[48,85,39,63],[48,90,39,68],[48,98,39,76],[48,101,40,22,"address"],[48,108,40,29],[48,111,41,22],[49,10,41,24,"address"],[49,17,41,31],[50,10,41,33,"capabilities"],[50,22,41,45],[50,24,41,47],[50,25,41,48],[51,8,41,50],[51,9,41,51],[51,10,41,52],[51,13,42,18,"data"],[51,17,42,22],[51,18,42,23,"accounts"],[51,26,42,32],[52,8,43,12,"chainId"],[52,15,43,19],[52,17,43,21,"data"],[52,21,43,25],[52,22,43,26,"chainId"],[53,6,44,8],[53,7,44,9],[54,4,45,4],[54,5,45,5],[54,6,46,4],[54,13,46,11,"error"],[54,18,46,16],[54,20,46,18],[55,6,47,8,"config"],[55,12,47,14],[55,13,47,15,"setState"],[55,21,47,23],[55,22,47,25,"x"],[55,23,47,26],[55,28,47,32],[56,8,48,12],[56,11,48,15,"x"],[56,12,48,16],[57,8,49,12],[58,8,50,12,"status"],[58,14,50,18],[58,16,50,20,"x"],[58,17,50,21],[58,18,50,22,"current"],[58,25,50,29],[58,28,50,32],[58,39,50,43],[58,42,50,46],[59,6,51,8],[59,7,51,9],[59,8,51,10],[59,9,51,11],[60,6,52,8],[60,12,52,14,"error"],[60,17,52,19],[61,4,53,4],[62,2,54,0],[63,0,54,1],[63,3]],"functionMap":{"names":["<global>","connect","config.setState$argument_0","data.accounts.map$argument_0"],"mappings":"AAA;OCE;wBCY,uCD;wBCQ;wCCI,oED;UDO;oCEK;mDFE;wBCM;UDI;CDG"},"hasCjsExports":false},"type":"js/module"}]}