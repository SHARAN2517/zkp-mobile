{"dependencies":[{"name":"valtio/utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"/bLmF2BbKuQHHw9IV4uDv2EhGPo=","exportNames":["*"],"imports":1}},{"name":"valtio","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":55},"end":{"line":2,"column":36,"index":91}}],"key":"QS/s3I3dpzUou32XrKY5Z5Z48Ms=","exportNames":["*"],"imports":1}},{"name":"../utils/CoreHelperUtil","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":92},"end":{"line":3,"column":57,"index":149}}],"key":"/1JUPaYwQbtFj3jwU0MKgyBNGuw=","exportNames":["*"],"imports":1}},{"name":"../utils/StorageUtil","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":150},"end":{"line":4,"column":51,"index":201}}],"key":"FMEBJfbJkDcHlj++AUlWStMlwu4=","exportNames":["*"],"imports":1}},{"name":"./RouterController","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":202},"end":{"line":5,"column":54,"index":256}}],"key":"aLm+D+yWsEDjHv7JGtTrb/mUh/g=","exportNames":["*"],"imports":1}},{"name":"./ConnectorController","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":257},"end":{"line":6,"column":60,"index":317}}],"key":"AvSwBiAXW+UcLE+nUx6+R58HBBs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"ConnectionController\", {\n    enumerable: true,\n    get: function () {\n      return ConnectionController;\n    }\n  });\n  var _valtioUtils = require(_dependencyMap[0], \"valtio/utils\");\n  var _valtio = require(_dependencyMap[1], \"valtio\");\n  var _utilsCoreHelperUtil = require(_dependencyMap[2], \"../utils/CoreHelperUtil\");\n  var _utilsStorageUtil = require(_dependencyMap[3], \"../utils/StorageUtil\");\n  var _RouterController = require(_dependencyMap[4], \"./RouterController\");\n  var _ConnectorController = require(_dependencyMap[5], \"./ConnectorController\");\n  // -- Types --------------------------------------------- //\n\n  // -- State --------------------------------------------- //\n  const state = (0, _valtio.proxy)({\n    wcError: false\n  });\n\n  // -- Controller ---------------------------------------- //\n  const ConnectionController = {\n    state,\n    subscribeKey(key, callback) {\n      return (0, _valtioUtils.subscribeKey)(state, key, callback);\n    },\n    _getClient() {\n      if (!state._client) {\n        throw new Error('ConnectionController client not set');\n      }\n      return state._client;\n    },\n    setClient(client) {\n      state._client = (0, _valtio.ref)(client);\n    },\n    connectWalletConnect() {\n      state.wcPromise = this._getClient().connectWalletConnect(uri => {\n        state.wcUri = uri;\n        state.wcPairingExpiry = _utilsCoreHelperUtil.CoreHelperUtil.getPairingExpiry();\n        _ConnectorController.ConnectorController.setConnectedConnector('WALLET_CONNECT');\n        _utilsStorageUtil.StorageUtil.setConnectedConnector('WALLET_CONNECT');\n      });\n    },\n    async connectExternal(options) {\n      await this._getClient().connectExternal?.(options);\n      _ConnectorController.ConnectorController.setConnectedConnector(options.type);\n      _utilsStorageUtil.StorageUtil.setConnectedConnector(options.type);\n    },\n    async signMessage(message) {\n      return this._getClient().signMessage(message);\n    },\n    setWcLinking(wcLinking) {\n      state.wcLinking = wcLinking;\n    },\n    removeWcLinking() {\n      state.wcLinking = undefined;\n    },\n    setWcError(wcError) {\n      state.wcError = wcError;\n    },\n    setPressedWallet(wallet) {\n      state.pressedWallet = wallet;\n    },\n    removePressedWallet() {\n      state.pressedWallet = undefined;\n    },\n    setRecentWallets(wallets) {\n      state.recentWallets = wallets;\n    },\n    async setConnectedWalletImageUrl(url) {\n      state.connectedWalletImageUrl = url;\n      if (url) {\n        await _utilsStorageUtil.StorageUtil.setConnectedWalletImageUrl(url);\n      } else {\n        _utilsStorageUtil.StorageUtil.removeConnectedWalletImageUrl();\n      }\n    },\n    clearUri() {\n      state.wcUri = undefined;\n      state.wcPairingExpiry = undefined;\n      state.wcPromise = undefined;\n      state.wcLinking = undefined;\n    },\n    resetWcConnection() {\n      this.clearUri();\n      state.pressedWallet = undefined;\n      state.connectedWalletImageUrl = undefined;\n      _ConnectorController.ConnectorController.setConnectedConnector(undefined);\n      _utilsStorageUtil.StorageUtil.removeWalletConnectDeepLink();\n      _utilsStorageUtil.StorageUtil.removeConnectedWalletImageUrl();\n      _utilsStorageUtil.StorageUtil.removeConnectedConnector();\n    },\n    async disconnect() {\n      await this._getClient().disconnect();\n      this.resetWcConnection();\n      _RouterController.RouterController.reset('Connect');\n    }\n  };\n});","lineCount":104,"map":[[7,2,16,0,"Object"],[7,8,16,0],[7,9,16,0,"defineProperty"],[7,23,16,0],[7,24,16,0,"exports"],[7,31,16,0],[8,4,16,0,"enumerable"],[8,14,16,0],[9,4,16,0,"get"],[9,7,16,0],[9,18,16,0,"get"],[9,19,16,0],[10,6,16,0],[10,13,16,0,"ConnectionController"],[10,33,16,0],[11,4,16,0],[12,2,16,0],[13,2,1,0],[13,6,1,0,"_valtioUtils"],[13,18,1,0],[13,21,1,0,"require"],[13,28,1,0],[13,29,1,0,"_dependencyMap"],[13,43,1,0],[14,2,2,0],[14,6,2,0,"_valtio"],[14,13,2,0],[14,16,2,0,"require"],[14,23,2,0],[14,24,2,0,"_dependencyMap"],[14,38,2,0],[15,2,3,0],[15,6,3,0,"_utilsCoreHelperUtil"],[15,26,3,0],[15,29,3,0,"require"],[15,36,3,0],[15,37,3,0,"_dependencyMap"],[15,51,3,0],[16,2,4,0],[16,6,4,0,"_utilsStorageUtil"],[16,23,4,0],[16,26,4,0,"require"],[16,33,4,0],[16,34,4,0,"_dependencyMap"],[16,48,4,0],[17,2,5,0],[17,6,5,0,"_RouterController"],[17,23,5,0],[17,26,5,0,"require"],[17,33,5,0],[17,34,5,0,"_dependencyMap"],[17,48,5,0],[18,2,6,0],[18,6,6,0,"_ConnectorController"],[18,26,6,0],[18,29,6,0,"require"],[18,36,6,0],[18,37,6,0,"_dependencyMap"],[18,51,6,0],[19,2,8,0],[21,2,10,0],[22,2,11,0],[22,8,11,6,"state"],[22,13,11,11],[22,16,11,14],[22,20,11,14,"proxy"],[22,27,11,19],[22,28,11,19,"proxy"],[22,33,11,19],[22,35,11,20],[23,4,12,2,"wcError"],[23,11,12,9],[23,13,12,11],[24,2,13,0],[24,3,13,1],[24,4,13,2],[26,2,15,0],[27,2,16,7],[27,8,16,13,"ConnectionController"],[27,28,16,33],[27,31,16,36],[28,4,17,2,"state"],[28,9,17,7],[29,4,18,2,"subscribeKey"],[29,16,18,14,"subscribeKey"],[29,17,18,15,"key"],[29,20,18,18],[29,22,18,20,"callback"],[29,30,18,28],[29,32,18,30],[30,6,19,4],[30,13,19,11],[30,17,19,11,"subKey"],[30,29,19,17],[30,30,19,17,"subscribeKey"],[30,42,19,17],[30,44,19,18,"state"],[30,49,19,23],[30,51,19,25,"key"],[30,54,19,28],[30,56,19,30,"callback"],[30,64,19,38],[30,65,19,39],[31,4,20,2],[31,5,20,3],[32,4,21,2,"_getClient"],[32,14,21,12,"_getClient"],[32,15,21,12],[32,17,21,15],[33,6,22,4],[33,10,22,8],[33,11,22,9,"state"],[33,16,22,14],[33,17,22,15,"_client"],[33,24,22,22],[33,26,22,24],[34,8,23,6],[34,14,23,12],[34,18,23,16,"Error"],[34,23,23,21],[34,24,23,22],[34,61,23,59],[34,62,23,60],[35,6,24,4],[36,6,25,4],[36,13,25,11,"state"],[36,18,25,16],[36,19,25,17,"_client"],[36,26,25,24],[37,4,26,2],[37,5,26,3],[38,4,27,2,"setClient"],[38,13,27,11,"setClient"],[38,14,27,12,"client"],[38,20,27,18],[38,22,27,20],[39,6,28,4,"state"],[39,11,28,9],[39,12,28,10,"_client"],[39,19,28,17],[39,22,28,20],[39,26,28,20,"ref"],[39,33,28,23],[39,34,28,23,"ref"],[39,37,28,23],[39,39,28,24,"client"],[39,45,28,30],[39,46,28,31],[40,4,29,2],[40,5,29,3],[41,4,30,2,"connectWalletConnect"],[41,24,30,22,"connectWalletConnect"],[41,25,30,22],[41,27,30,25],[42,6,31,4,"state"],[42,11,31,9],[42,12,31,10,"wcPromise"],[42,21,31,19],[42,24,31,22],[42,28,31,26],[42,29,31,27,"_getClient"],[42,39,31,37],[42,40,31,38],[42,41,31,39],[42,42,31,40,"connectWalletConnect"],[42,62,31,60],[42,63,31,61,"uri"],[42,66,31,64],[42,70,31,68],[43,8,32,6,"state"],[43,13,32,11],[43,14,32,12,"wcUri"],[43,19,32,17],[43,22,32,20,"uri"],[43,25,32,23],[44,8,33,6,"state"],[44,13,33,11],[44,14,33,12,"wcPairingExpiry"],[44,29,33,27],[44,32,33,30,"CoreHelperUtil"],[44,52,33,44],[44,53,33,44,"CoreHelperUtil"],[44,67,33,44],[44,68,33,45,"getPairingExpiry"],[44,84,33,61],[44,85,33,62],[44,86,33,63],[45,8,34,6,"ConnectorController"],[45,28,34,25],[45,29,34,25,"ConnectorController"],[45,48,34,25],[45,49,34,26,"setConnectedConnector"],[45,70,34,47],[45,71,34,48],[45,87,34,64],[45,88,34,65],[46,8,35,6,"StorageUtil"],[46,25,35,17],[46,26,35,17,"StorageUtil"],[46,37,35,17],[46,38,35,18,"setConnectedConnector"],[46,59,35,39],[46,60,35,40],[46,76,35,56],[46,77,35,57],[47,6,36,4],[47,7,36,5],[47,8,36,6],[48,4,37,2],[48,5,37,3],[49,4,38,2],[49,10,38,8,"connectExternal"],[49,25,38,23,"connectExternal"],[49,26,38,24,"options"],[49,33,38,31],[49,35,38,33],[50,6,39,4],[50,12,39,10],[50,16,39,14],[50,17,39,15,"_getClient"],[50,27,39,25],[50,28,39,26],[50,29,39,27],[50,30,39,28,"connectExternal"],[50,45,39,43],[50,48,39,46,"options"],[50,55,39,53],[50,56,39,54],[51,6,40,4,"ConnectorController"],[51,26,40,23],[51,27,40,23,"ConnectorController"],[51,46,40,23],[51,47,40,24,"setConnectedConnector"],[51,68,40,45],[51,69,40,46,"options"],[51,76,40,53],[51,77,40,54,"type"],[51,81,40,58],[51,82,40,59],[52,6,41,4,"StorageUtil"],[52,23,41,15],[52,24,41,15,"StorageUtil"],[52,35,41,15],[52,36,41,16,"setConnectedConnector"],[52,57,41,37],[52,58,41,38,"options"],[52,65,41,45],[52,66,41,46,"type"],[52,70,41,50],[52,71,41,51],[53,4,42,2],[53,5,42,3],[54,4,43,2],[54,10,43,8,"signMessage"],[54,21,43,19,"signMessage"],[54,22,43,20,"message"],[54,29,43,27],[54,31,43,29],[55,6,44,4],[55,13,44,11],[55,17,44,15],[55,18,44,16,"_getClient"],[55,28,44,26],[55,29,44,27],[55,30,44,28],[55,31,44,29,"signMessage"],[55,42,44,40],[55,43,44,41,"message"],[55,50,44,48],[55,51,44,49],[56,4,45,2],[56,5,45,3],[57,4,46,2,"setWcLinking"],[57,16,46,14,"setWcLinking"],[57,17,46,15,"wcLinking"],[57,26,46,24],[57,28,46,26],[58,6,47,4,"state"],[58,11,47,9],[58,12,47,10,"wcLinking"],[58,21,47,19],[58,24,47,22,"wcLinking"],[58,33,47,31],[59,4,48,2],[59,5,48,3],[60,4,49,2,"removeWcLinking"],[60,19,49,17,"removeWcLinking"],[60,20,49,17],[60,22,49,20],[61,6,50,4,"state"],[61,11,50,9],[61,12,50,10,"wcLinking"],[61,21,50,19],[61,24,50,22,"undefined"],[61,33,50,31],[62,4,51,2],[62,5,51,3],[63,4,52,2,"setWcError"],[63,14,52,12,"setWcError"],[63,15,52,13,"wcError"],[63,22,52,20],[63,24,52,22],[64,6,53,4,"state"],[64,11,53,9],[64,12,53,10,"wcError"],[64,19,53,17],[64,22,53,20,"wcError"],[64,29,53,27],[65,4,54,2],[65,5,54,3],[66,4,55,2,"setPressedWallet"],[66,20,55,18,"setPressedWallet"],[66,21,55,19,"wallet"],[66,27,55,25],[66,29,55,27],[67,6,56,4,"state"],[67,11,56,9],[67,12,56,10,"pressedWallet"],[67,25,56,23],[67,28,56,26,"wallet"],[67,34,56,32],[68,4,57,2],[68,5,57,3],[69,4,58,2,"removePressedWallet"],[69,23,58,21,"removePressedWallet"],[69,24,58,21],[69,26,58,24],[70,6,59,4,"state"],[70,11,59,9],[70,12,59,10,"pressedWallet"],[70,25,59,23],[70,28,59,26,"undefined"],[70,37,59,35],[71,4,60,2],[71,5,60,3],[72,4,61,2,"setRecentWallets"],[72,20,61,18,"setRecentWallets"],[72,21,61,19,"wallets"],[72,28,61,26],[72,30,61,28],[73,6,62,4,"state"],[73,11,62,9],[73,12,62,10,"recentWallets"],[73,25,62,23],[73,28,62,26,"wallets"],[73,35,62,33],[74,4,63,2],[74,5,63,3],[75,4,64,2],[75,10,64,8,"setConnectedWalletImageUrl"],[75,36,64,34,"setConnectedWalletImageUrl"],[75,37,64,35,"url"],[75,40,64,38],[75,42,64,40],[76,6,65,4,"state"],[76,11,65,9],[76,12,65,10,"connectedWalletImageUrl"],[76,35,65,33],[76,38,65,36,"url"],[76,41,65,39],[77,6,66,4],[77,10,66,8,"url"],[77,13,66,11],[77,15,66,13],[78,8,67,6],[78,14,67,12,"StorageUtil"],[78,31,67,23],[78,32,67,23,"StorageUtil"],[78,43,67,23],[78,44,67,24,"setConnectedWalletImageUrl"],[78,70,67,50],[78,71,67,51,"url"],[78,74,67,54],[78,75,67,55],[79,6,68,4],[79,7,68,5],[79,13,68,11],[80,8,69,6,"StorageUtil"],[80,25,69,17],[80,26,69,17,"StorageUtil"],[80,37,69,17],[80,38,69,18,"removeConnectedWalletImageUrl"],[80,67,69,47],[80,68,69,48],[80,69,69,49],[81,6,70,4],[82,4,71,2],[82,5,71,3],[83,4,72,2,"clearUri"],[83,12,72,10,"clearUri"],[83,13,72,10],[83,15,72,13],[84,6,73,4,"state"],[84,11,73,9],[84,12,73,10,"wcUri"],[84,17,73,15],[84,20,73,18,"undefined"],[84,29,73,27],[85,6,74,4,"state"],[85,11,74,9],[85,12,74,10,"wcPairingExpiry"],[85,27,74,25],[85,30,74,28,"undefined"],[85,39,74,37],[86,6,75,4,"state"],[86,11,75,9],[86,12,75,10,"wcPromise"],[86,21,75,19],[86,24,75,22,"undefined"],[86,33,75,31],[87,6,76,4,"state"],[87,11,76,9],[87,12,76,10,"wcLinking"],[87,21,76,19],[87,24,76,22,"undefined"],[87,33,76,31],[88,4,77,2],[88,5,77,3],[89,4,78,2,"resetWcConnection"],[89,21,78,19,"resetWcConnection"],[89,22,78,19],[89,24,78,22],[90,6,79,4],[90,10,79,8],[90,11,79,9,"clearUri"],[90,19,79,17],[90,20,79,18],[90,21,79,19],[91,6,80,4,"state"],[91,11,80,9],[91,12,80,10,"pressedWallet"],[91,25,80,23],[91,28,80,26,"undefined"],[91,37,80,35],[92,6,81,4,"state"],[92,11,81,9],[92,12,81,10,"connectedWalletImageUrl"],[92,35,81,33],[92,38,81,36,"undefined"],[92,47,81,45],[93,6,82,4,"ConnectorController"],[93,26,82,23],[93,27,82,23,"ConnectorController"],[93,46,82,23],[93,47,82,24,"setConnectedConnector"],[93,68,82,45],[93,69,82,46,"undefined"],[93,78,82,55],[93,79,82,56],[94,6,83,4,"StorageUtil"],[94,23,83,15],[94,24,83,15,"StorageUtil"],[94,35,83,15],[94,36,83,16,"removeWalletConnectDeepLink"],[94,63,83,43],[94,64,83,44],[94,65,83,45],[95,6,84,4,"StorageUtil"],[95,23,84,15],[95,24,84,15,"StorageUtil"],[95,35,84,15],[95,36,84,16,"removeConnectedWalletImageUrl"],[95,65,84,45],[95,66,84,46],[95,67,84,47],[96,6,85,4,"StorageUtil"],[96,23,85,15],[96,24,85,15,"StorageUtil"],[96,35,85,15],[96,36,85,16,"removeConnectedConnector"],[96,60,85,40],[96,61,85,41],[96,62,85,42],[97,4,86,2],[97,5,86,3],[98,4,87,2],[98,10,87,8,"disconnect"],[98,20,87,18,"disconnect"],[98,21,87,18],[98,23,87,21],[99,6,88,4],[99,12,88,10],[99,16,88,14],[99,17,88,15,"_getClient"],[99,27,88,25],[99,28,88,26],[99,29,88,27],[99,30,88,28,"disconnect"],[99,40,88,38],[99,41,88,39],[99,42,88,40],[100,6,89,4],[100,10,89,8],[100,11,89,9,"resetWcConnection"],[100,28,89,26],[100,29,89,27],[100,30,89,28],[101,6,90,4,"RouterController"],[101,23,90,20],[101,24,90,20,"RouterController"],[101,40,90,20],[101,41,90,21,"reset"],[101,46,90,26],[101,47,90,27],[101,56,90,36],[101,57,90,37],[102,4,91,2],[103,2,92,0],[103,3,92,1],[104,0,92,2],[104,3]],"functionMap":{"names":["<global>","subscribeKey","_getClient","setClient","connectWalletConnect","_getClient.connectWalletConnect$argument_0","connectExternal","signMessage","setWcLinking","removeWcLinking","setWcError","setPressedWallet","removePressedWallet","setRecentWallets","setConnectedWalletImageUrl","clearUri","resetWcConnection","disconnect"],"mappings":"AAA;ECiB;GDE;EEC;GFK;EGC;GHE;EIC;6DCC;KDK;GJC;EMC;GNI;EOC;GPE;EQC;GRE;ESC;GTE;EUC;GVE;EWC;GXE;EYC;GZE;EaC;GbE;EcC;GdO;EeC;GfK;EgBC;GhBQ;EiBC;GjBI"},"hasCjsExports":false},"type":"js/module"}]}