{"dependencies":[{"name":"./utils.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"NIaSEHO1E48gsZc7jH9Ex1xTHgE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.createStore = createStore;\n  var _utilsJs = require(_dependencyMap[0], \"./utils.js\");\n  function createStore() {\n    const listeners = new Set();\n    let providerDetails = [];\n    const request = () => (0, _utilsJs.requestProviders)(providerDetail => {\n      if (providerDetails.some(({\n        info\n      }) => info.uuid === providerDetail.info.uuid)) return;\n      providerDetails = [...providerDetails, providerDetail];\n      listeners.forEach(listener => listener(providerDetails, {\n        added: [providerDetail]\n      }));\n    });\n    let unwatch = request();\n    return {\n      _listeners() {\n        return listeners;\n      },\n      clear() {\n        listeners.forEach(listener => listener([], {\n          removed: [...providerDetails]\n        }));\n        providerDetails = [];\n      },\n      destroy() {\n        this.clear();\n        listeners.clear();\n        unwatch?.();\n      },\n      findProvider({\n        rdns\n      }) {\n        return providerDetails.find(providerDetail => providerDetail.info.rdns === rdns);\n      },\n      getProviders() {\n        return providerDetails;\n      },\n      reset() {\n        this.clear();\n        unwatch?.();\n        unwatch = request();\n      },\n      subscribe(listener, {\n        emitImmediately\n      } = {}) {\n        listeners.add(listener);\n        if (emitImmediately) listener(providerDetails, {\n          added: providerDetails\n        });\n        return () => listeners.delete(listener);\n      }\n    };\n  }\n});","lineCount":61,"map":[[7,2,2,0,"exports"],[7,9,2,0],[7,10,2,0,"createStore"],[7,21,2,0],[7,24,2,0,"createStore"],[7,35,2,0],[8,2,1,0],[8,6,1,0,"_utilsJs"],[8,14,1,0],[8,17,1,0,"require"],[8,24,1,0],[8,25,1,0,"_dependencyMap"],[8,39,1,0],[9,2,2,7],[9,11,2,16,"createStore"],[9,22,2,27,"createStore"],[9,23,2,27],[9,25,2,30],[10,4,3,4],[10,10,3,10,"listeners"],[10,19,3,19],[10,22,3,22],[10,26,3,26,"Set"],[10,29,3,29],[10,30,3,30],[10,31,3,31],[11,4,4,4],[11,8,4,8,"providerDetails"],[11,23,4,23],[11,26,4,26],[11,28,4,28],[12,4,5,4],[12,10,5,10,"request"],[12,17,5,17],[12,20,5,20,"request"],[12,21,5,20],[12,26,5,26],[12,30,5,26,"requestProviders"],[12,38,5,42],[12,39,5,42,"requestProviders"],[12,55,5,42],[12,57,5,44,"providerDetail"],[12,71,5,58],[12,75,5,63],[13,6,6,8],[13,10,6,12,"providerDetails"],[13,25,6,27],[13,26,6,28,"some"],[13,30,6,32],[13,31,6,33],[13,32,6,34],[14,8,6,36,"info"],[15,6,6,41],[15,7,6,42],[15,12,6,47,"info"],[15,16,6,51],[15,17,6,52,"uuid"],[15,21,6,56],[15,26,6,61,"providerDetail"],[15,40,6,75],[15,41,6,76,"info"],[15,45,6,80],[15,46,6,81,"uuid"],[15,50,6,85],[15,51,6,86],[15,53,7,12],[16,6,8,8,"providerDetails"],[16,21,8,23],[16,24,8,26],[16,25,8,27],[16,28,8,30,"providerDetails"],[16,43,8,45],[16,45,8,47,"providerDetail"],[16,59,8,61],[16,60,8,62],[17,6,9,8,"listeners"],[17,15,9,17],[17,16,9,18,"forEach"],[17,23,9,25],[17,24,9,27,"listener"],[17,32,9,35],[17,36,9,40,"listener"],[17,44,9,48],[17,45,9,49,"providerDetails"],[17,60,9,64],[17,62,9,66],[18,8,9,68,"added"],[18,13,9,73],[18,15,9,75],[18,16,9,76,"providerDetail"],[18,30,9,90],[19,6,9,92],[19,7,9,93],[19,8,9,94],[19,9,9,95],[20,4,10,4],[20,5,10,5],[20,6,10,6],[21,4,11,4],[21,8,11,8,"unwatch"],[21,15,11,15],[21,18,11,18,"request"],[21,25,11,25],[21,26,11,26],[21,27,11,27],[22,4,12,4],[22,11,12,11],[23,6,13,8,"_listeners"],[23,16,13,18,"_listeners"],[23,17,13,18],[23,19,13,21],[24,8,14,12],[24,15,14,19,"listeners"],[24,24,14,28],[25,6,15,8],[25,7,15,9],[26,6,16,8,"clear"],[26,11,16,13,"clear"],[26,12,16,13],[26,14,16,16],[27,8,17,12,"listeners"],[27,17,17,21],[27,18,17,22,"forEach"],[27,25,17,29],[27,26,17,31,"listener"],[27,34,17,39],[27,38,17,44,"listener"],[27,46,17,52],[27,47,17,53],[27,49,17,55],[27,51,17,57],[28,10,17,59,"removed"],[28,17,17,66],[28,19,17,68],[28,20,17,69],[28,23,17,72,"providerDetails"],[28,38,17,87],[29,8,17,89],[29,9,17,90],[29,10,17,91],[29,11,17,92],[30,8,18,12,"providerDetails"],[30,23,18,27],[30,26,18,30],[30,28,18,32],[31,6,19,8],[31,7,19,9],[32,6,20,8,"destroy"],[32,13,20,15,"destroy"],[32,14,20,15],[32,16,20,18],[33,8,21,12],[33,12,21,16],[33,13,21,17,"clear"],[33,18,21,22],[33,19,21,23],[33,20,21,24],[34,8,22,12,"listeners"],[34,17,22,21],[34,18,22,22,"clear"],[34,23,22,27],[34,24,22,28],[34,25,22,29],[35,8,23,12,"unwatch"],[35,15,23,19],[35,18,23,22],[35,19,23,23],[36,6,24,8],[36,7,24,9],[37,6,25,8,"findProvider"],[37,18,25,20,"findProvider"],[37,19,25,21],[38,8,25,23,"rdns"],[39,6,25,28],[39,7,25,29],[39,9,25,31],[40,8,26,12],[40,15,26,19,"providerDetails"],[40,30,26,34],[40,31,26,35,"find"],[40,35,26,39],[40,36,26,41,"providerDetail"],[40,50,26,55],[40,54,26,60,"providerDetail"],[40,68,26,74],[40,69,26,75,"info"],[40,73,26,79],[40,74,26,80,"rdns"],[40,78,26,84],[40,83,26,89,"rdns"],[40,87,26,93],[40,88,26,94],[41,6,27,8],[41,7,27,9],[42,6,28,8,"getProviders"],[42,18,28,20,"getProviders"],[42,19,28,20],[42,21,28,23],[43,8,29,12],[43,15,29,19,"providerDetails"],[43,30,29,34],[44,6,30,8],[44,7,30,9],[45,6,31,8,"reset"],[45,11,31,13,"reset"],[45,12,31,13],[45,14,31,16],[46,8,32,12],[46,12,32,16],[46,13,32,17,"clear"],[46,18,32,22],[46,19,32,23],[46,20,32,24],[47,8,33,12,"unwatch"],[47,15,33,19],[47,18,33,22],[47,19,33,23],[48,8,34,12,"unwatch"],[48,15,34,19],[48,18,34,22,"request"],[48,25,34,29],[48,26,34,30],[48,27,34,31],[49,6,35,8],[49,7,35,9],[50,6,36,8,"subscribe"],[50,15,36,17,"subscribe"],[50,16,36,18,"listener"],[50,24,36,26],[50,26,36,28],[51,8,36,30,"emitImmediately"],[52,6,36,46],[52,7,36,47],[52,10,36,50],[52,11,36,51],[52,12,36,52],[52,14,36,54],[53,8,37,12,"listeners"],[53,17,37,21],[53,18,37,22,"add"],[53,21,37,25],[53,22,37,26,"listener"],[53,30,37,34],[53,31,37,35],[54,8,38,12],[54,12,38,16,"emitImmediately"],[54,27,38,31],[54,29,39,16,"listener"],[54,37,39,24],[54,38,39,25,"providerDetails"],[54,53,39,40],[54,55,39,42],[55,10,39,44,"added"],[55,15,39,49],[55,17,39,51,"providerDetails"],[56,8,39,67],[56,9,39,68],[56,10,39,69],[57,8,40,12],[57,15,40,19],[57,21,40,25,"listeners"],[57,30,40,34],[57,31,40,35,"delete"],[57,37,40,41],[57,38,40,42,"listener"],[57,46,40,50],[57,47,40,51],[58,6,41,8],[59,4,42,4],[59,5,42,5],[60,2,43,0],[61,0,43,1],[61,3]],"functionMap":{"names":["<global>","createStore","request","requestProviders$argument_0","providerDetails.some$argument_0","listeners.forEach$argument_0","_listeners","clear","destroy","findProvider","providerDetails.find$argument_0","getProviders","reset","subscribe","<anonymous>"],"mappings":"AAA;OCC;oBCG,uBC;iCCC,oDD;0BEG,oEF;KDC,CD;QKG;SLE;QMC;8BFC,6DE;SNE;QOC;SPI;QQC;wCCC,qDD;SRC;QUC;SVE;QWC;SXI;QYC;mBCI,gCD;SZC;CDE"},"hasCjsExports":false},"type":"js/module"}]}