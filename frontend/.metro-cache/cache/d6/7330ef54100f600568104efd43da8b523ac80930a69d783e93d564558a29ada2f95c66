{"dependencies":[{"name":"react-native-web/dist/index","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"55efhPHw3gz2FoQtoN2yI1VuhbM=","exportNames":["*"],"imports":1}},{"name":"valtio/vanilla","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":15,"index":174},"end":{"line":8,"column":40,"index":199}}],"key":"6mwMD5JHdt7zbxYXuH5JnAlcTXU=","exportNames":["*"],"imports":1}},{"name":"./ApiController","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":21,"index":222},"end":{"line":9,"column":47,"index":248}}],"key":"mauLirSJYxRF1hYfkZUrfiw6nCI=","exportNames":["*"],"imports":1}},{"name":"./OptionsController","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":25,"index":275},"end":{"line":10,"column":55,"index":305}}],"key":"s5+rsPKvOj9s9cmQ6lj+wUVPNfg=","exportNames":["*"],"imports":1}},{"name":"../utils/CoreHelperUtil","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":22,"index":329},"end":{"line":11,"column":56,"index":363}}],"key":"tdKvJL7nE1dTGP0adg6hW1Ggq6k=","exportNames":["*"],"imports":1}},{"name":"../utils/FetchUtil","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":17,"index":382},"end":{"line":12,"column":46,"index":411}}],"key":"/YS4C7HR0HVDKFIDMURxcqoOSP4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.EventsController = void 0;\n  var _reactNative = require(_dependencyMap[0], \"react-native-web/dist/index\");\n  var _vanilla = require(_dependencyMap[1], \"valtio/vanilla\");\n  var _ApiController = require(_dependencyMap[2], \"./ApiController\");\n  var _OptionsController = require(_dependencyMap[3], \"./OptionsController\");\n  var _CoreHelperUtil = require(_dependencyMap[4], \"../utils/CoreHelperUtil\");\n  var _FetchUtil = require(_dependencyMap[5], \"../utils/FetchUtil\");\n  // -- Helpers ------------------------------------------- //\n  const baseUrl = _CoreHelperUtil.CoreHelperUtil.getAnalyticsUrl();\n  const api = new _FetchUtil.FetchUtil({\n    baseUrl\n  });\n  const excluded = ['MODAL_CREATED'];\n\n  // -- Types --------------------------------------------- //\n\n  // -- State --------------------------------------------- //\n  const state = (0, _vanilla.proxy)({\n    timestamp: Date.now(),\n    data: {\n      type: 'track',\n      event: 'MODAL_CREATED' // just for init purposes\n    }\n  });\n\n  // -- Controller ---------------------------------------- //\n  const EventsController = exports.EventsController = {\n    state,\n    subscribe(callback) {\n      return (0, _vanilla.subscribe)(state, () => callback(state));\n    },\n    _getApiHeaders() {\n      const {\n        projectId,\n        sdkType,\n        sdkVersion\n      } = _OptionsController.OptionsController.state;\n      return {\n        'x-project-id': projectId,\n        'x-sdk-type': sdkType,\n        'x-sdk-version': sdkVersion,\n        'User-Agent': `${_reactNative.Platform.OS}-${_reactNative.Platform.Version}`\n      };\n    },\n    async _sendAnalyticsEvent(data, timestamp) {\n      if (excluded.includes(data.event)) {\n        return;\n      }\n      try {\n        await api.post({\n          path: '/e',\n          headers: this._getApiHeaders(),\n          body: {\n            eventId: _CoreHelperUtil.CoreHelperUtil.getUUID(),\n            bundleId: _CoreHelperUtil.CoreHelperUtil.getBundleId(),\n            timestamp,\n            props: data\n          }\n        });\n      } catch {\n        // Catch silently\n      }\n    },\n    async sendEvent(data) {\n      const timestamp = Date.now();\n      state.timestamp = timestamp;\n      state.data = data;\n      await _ApiController.ApiController.state.prefetchPromise;\n      if (_OptionsController.OptionsController.state.enableAnalytics) {\n        EventsController._sendAnalyticsEvent(data, timestamp);\n      }\n    }\n  };\n});","lineCount":80,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"EventsController"],[7,26,6,24],[7,29,6,27],[7,34,6,32],[7,35,6,33],[8,2,6,34],[8,6,6,34,"_reactNative"],[8,18,6,34],[8,21,6,34,"require"],[8,28,6,34],[8,29,6,34,"_dependencyMap"],[8,43,6,34],[9,2,8,0],[9,6,8,4,"_vanilla"],[9,14,8,12],[9,17,8,15,"require"],[9,24,8,22],[9,25,8,22,"_dependencyMap"],[9,39,8,22],[9,60,8,39],[9,61,8,40],[10,2,9,0],[10,6,9,4,"_ApiController"],[10,20,9,18],[10,23,9,21,"require"],[10,30,9,28],[10,31,9,28,"_dependencyMap"],[10,45,9,28],[10,67,9,46],[10,68,9,47],[11,2,10,0],[11,6,10,4,"_OptionsController"],[11,24,10,22],[11,27,10,25,"require"],[11,34,10,32],[11,35,10,32,"_dependencyMap"],[11,49,10,32],[11,75,10,54],[11,76,10,55],[12,2,11,0],[12,6,11,4,"_CoreHelperUtil"],[12,21,11,19],[12,24,11,22,"require"],[12,31,11,29],[12,32,11,29,"_dependencyMap"],[12,46,11,29],[12,76,11,55],[12,77,11,56],[13,2,12,0],[13,6,12,4,"_FetchUtil"],[13,16,12,14],[13,19,12,17,"require"],[13,26,12,24],[13,27,12,24,"_dependencyMap"],[13,41,12,24],[13,66,12,45],[13,67,12,46],[14,2,13,0],[15,2,14,0],[15,8,14,6,"baseUrl"],[15,15,14,13],[15,18,14,16,"_CoreHelperUtil"],[15,33,14,31],[15,34,14,32,"CoreHelperUtil"],[15,48,14,46],[15,49,14,47,"getAnalyticsUrl"],[15,64,14,62],[15,65,14,63],[15,66,14,64],[16,2,15,0],[16,8,15,6,"api"],[16,11,15,9],[16,14,15,12],[16,18,15,16,"_FetchUtil"],[16,28,15,26],[16,29,15,27,"FetchUtil"],[16,38,15,36],[16,39,15,37],[17,4,16,2,"baseUrl"],[18,2,17,0],[18,3,17,1],[18,4,17,2],[19,2,18,0],[19,8,18,6,"excluded"],[19,16,18,14],[19,19,18,17],[19,20,18,18],[19,35,18,33],[19,36,18,34],[21,2,20,0],[23,2,22,0],[24,2,23,0],[24,8,23,6,"state"],[24,13,23,11],[24,16,23,14],[24,17,23,15],[24,18,23,16],[24,20,23,18,"_vanilla"],[24,28,23,26],[24,29,23,27,"proxy"],[24,34,23,32],[24,36,23,34],[25,4,24,2,"timestamp"],[25,13,24,11],[25,15,24,13,"Date"],[25,19,24,17],[25,20,24,18,"now"],[25,23,24,21],[25,24,24,22],[25,25,24,23],[26,4,25,2,"data"],[26,8,25,6],[26,10,25,8],[27,6,26,4,"type"],[27,10,26,8],[27,12,26,10],[27,19,26,17],[28,6,27,4,"event"],[28,11,27,9],[28,13,27,11],[28,28,27,26],[28,29,27,27],[29,4,28,2],[30,2,29,0],[30,3,29,1],[30,4,29,2],[32,2,31,0],[33,2,32,0],[33,8,32,6,"EventsController"],[33,24,32,22],[33,27,32,25,"exports"],[33,34,32,32],[33,35,32,33,"EventsController"],[33,51,32,49],[33,54,32,52],[34,4,33,2,"state"],[34,9,33,7],[35,4,34,2,"subscribe"],[35,13,34,11,"subscribe"],[35,14,34,12,"callback"],[35,22,34,20],[35,24,34,22],[36,6,35,4],[36,13,35,11],[36,14,35,12],[36,15,35,13],[36,17,35,15,"_vanilla"],[36,25,35,23],[36,26,35,24,"subscribe"],[36,35,35,33],[36,37,35,35,"state"],[36,42,35,40],[36,44,35,42],[36,50,35,48,"callback"],[36,58,35,56],[36,59,35,57,"state"],[36,64,35,62],[36,65,35,63],[36,66,35,64],[37,4,36,2],[37,5,36,3],[38,4,37,2,"_getApiHeaders"],[38,18,37,16,"_getApiHeaders"],[38,19,37,16],[38,21,37,19],[39,6,38,4],[39,12,38,10],[40,8,39,6,"projectId"],[40,17,39,15],[41,8,40,6,"sdkType"],[41,15,40,13],[42,8,41,6,"sdkVersion"],[43,6,42,4],[43,7,42,5],[43,10,42,8,"_OptionsController"],[43,28,42,26],[43,29,42,27,"OptionsController"],[43,46,42,44],[43,47,42,45,"state"],[43,52,42,50],[44,6,43,4],[44,13,43,11],[45,8,44,6],[45,22,44,20],[45,24,44,22,"projectId"],[45,33,44,31],[46,8,45,6],[46,20,45,18],[46,22,45,20,"sdkType"],[46,29,45,27],[47,8,46,6],[47,23,46,21],[47,25,46,23,"sdkVersion"],[47,35,46,33],[48,8,47,6],[48,20,47,18],[48,22,47,20],[48,25,47,23,"_reactNative"],[48,37,47,35],[48,38,47,36,"Platform"],[48,46,47,44],[48,47,47,45,"OS"],[48,49,47,47],[48,53,47,51,"_reactNative"],[48,65,47,63],[48,66,47,64,"Platform"],[48,74,47,72],[48,75,47,73,"Version"],[48,82,47,80],[49,6,48,4],[49,7,48,5],[50,4,49,2],[50,5,49,3],[51,4,50,2],[51,10,50,8,"_sendAnalyticsEvent"],[51,29,50,27,"_sendAnalyticsEvent"],[51,30,50,28,"data"],[51,34,50,32],[51,36,50,34,"timestamp"],[51,45,50,43],[51,47,50,45],[52,6,51,4],[52,10,51,8,"excluded"],[52,18,51,16],[52,19,51,17,"includes"],[52,27,51,25],[52,28,51,26,"data"],[52,32,51,30],[52,33,51,31,"event"],[52,38,51,36],[52,39,51,37],[52,41,51,39],[53,8,52,6],[54,6,53,4],[55,6,54,4],[55,10,54,8],[56,8,55,6],[56,14,55,12,"api"],[56,17,55,15],[56,18,55,16,"post"],[56,22,55,20],[56,23,55,21],[57,10,56,8,"path"],[57,14,56,12],[57,16,56,14],[57,20,56,18],[58,10,57,8,"headers"],[58,17,57,15],[58,19,57,17],[58,23,57,21],[58,24,57,22,"_getApiHeaders"],[58,38,57,36],[58,39,57,37],[58,40,57,38],[59,10,58,8,"body"],[59,14,58,12],[59,16,58,14],[60,12,59,10,"eventId"],[60,19,59,17],[60,21,59,19,"_CoreHelperUtil"],[60,36,59,34],[60,37,59,35,"CoreHelperUtil"],[60,51,59,49],[60,52,59,50,"getUUID"],[60,59,59,57],[60,60,59,58],[60,61,59,59],[61,12,60,10,"bundleId"],[61,20,60,18],[61,22,60,20,"_CoreHelperUtil"],[61,37,60,35],[61,38,60,36,"CoreHelperUtil"],[61,52,60,50],[61,53,60,51,"getBundleId"],[61,64,60,62],[61,65,60,63],[61,66,60,64],[62,12,61,10,"timestamp"],[62,21,61,19],[63,12,62,10,"props"],[63,17,62,15],[63,19,62,17,"data"],[64,10,63,8],[65,8,64,6],[65,9,64,7],[65,10,64,8],[66,6,65,4],[66,7,65,5],[66,8,65,6],[66,14,65,12],[67,8,66,6],[68,6,66,6],[69,4,68,2],[69,5,68,3],[70,4,69,2],[70,10,69,8,"sendEvent"],[70,19,69,17,"sendEvent"],[70,20,69,18,"data"],[70,24,69,22],[70,26,69,24],[71,6,70,4],[71,12,70,10,"timestamp"],[71,21,70,19],[71,24,70,22,"Date"],[71,28,70,26],[71,29,70,27,"now"],[71,32,70,30],[71,33,70,31],[71,34,70,32],[72,6,71,4,"state"],[72,11,71,9],[72,12,71,10,"timestamp"],[72,21,71,19],[72,24,71,22,"timestamp"],[72,33,71,31],[73,6,72,4,"state"],[73,11,72,9],[73,12,72,10,"data"],[73,16,72,14],[73,19,72,17,"data"],[73,23,72,21],[74,6,73,4],[74,12,73,10,"_ApiController"],[74,26,73,24],[74,27,73,25,"ApiController"],[74,40,73,38],[74,41,73,39,"state"],[74,46,73,44],[74,47,73,45,"prefetchPromise"],[74,62,73,60],[75,6,74,4],[75,10,74,8,"_OptionsController"],[75,28,74,26],[75,29,74,27,"OptionsController"],[75,46,74,44],[75,47,74,45,"state"],[75,52,74,50],[75,53,74,51,"enableAnalytics"],[75,68,74,66],[75,70,74,68],[76,8,75,6,"EventsController"],[76,24,75,22],[76,25,75,23,"_sendAnalyticsEvent"],[76,44,75,42],[76,45,75,43,"data"],[76,49,75,47],[76,51,75,49,"timestamp"],[76,60,75,58],[76,61,75,59],[77,6,76,4],[78,4,77,2],[79,2,78,0],[79,3,78,1],[80,0,78,2],[80,3]],"functionMap":{"names":["<global>","exports.EventsController.subscribe","<anonymous>","exports.EventsController._getApiHeaders","exports.EventsController._sendAnalyticsEvent","exports.EventsController.sendEvent"],"mappings":"AAA;ECiC;0CCC,qBD;GDC;EGC;GHY;EIC;GJkB;EKC;GLQ"},"hasCjsExports":true},"type":"js/module"}]}