{"dependencies":[{"name":"../../constants/abis.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":18,"index":128},"end":{"line":4,"column":52,"index":162}}],"key":"yrHWypZlegCAdNz0tkfsugt0VBw=","exportNames":["*"],"imports":1}},{"name":"../../utils/abi/decodeFunctionResult.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":34,"index":198},"end":{"line":5,"column":84,"index":248}}],"key":"PXwyRBt1T1gTrLibjDXwXWimUBk=","exportNames":["*"],"imports":1}},{"name":"../../utils/abi/encodeFunctionData.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":32,"index":282},"end":{"line":6,"column":80,"index":330}}],"key":"X+zmSvhsp+TXYOiEa0Zi/HLVfNc=","exportNames":["*"],"imports":1}},{"name":"../../utils/chain/getChainContractAddress.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":37,"index":369},"end":{"line":7,"column":92,"index":424}}],"key":"LSOHYraFRKmn1vhzttHaVrAvnvY=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/toHex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":19,"index":445},"end":{"line":8,"column":59,"index":485}}],"key":"H7vq9DbZar/LBdoWrgikLXyV5L0=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/errors.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":20,"index":507},"end":{"line":9,"column":56,"index":543}}],"key":"bJ3HFECcOq3rJI5yc4mdcXLPNdM=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/localBatchGatewayRequest.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":38,"index":583},"end":{"line":10,"column":92,"index":637}}],"key":"XKtjj9pdiUlmnSKO9TgRMAzLtsk=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/namehash.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":22,"index":661},"end":{"line":11,"column":60,"index":699}}],"key":"nLMZ3xzrUMD3X53xXqCx405nmb8=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/packetToBytes.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":27,"index":728},"end":{"line":12,"column":70,"index":771}}],"key":"qZUsVA/n+grVYHWGPUJto9s8big=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":13,"column":23,"index":796},"end":{"line":13,"column":58,"index":831}}],"key":"d685V9n1u7O1oRJ2ZbnkuLpcslA=","exportNames":["*"],"imports":1}},{"name":"../public/readContract.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":14,"column":26,"index":859},"end":{"line":14,"column":62,"index":895}}],"key":"UxqVCL+UT7iOwBMYmrSJxJgcrJI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getEnsText = getEnsText;\n  const abis_js_1 = require(_dependencyMap[0], \"../../constants/abis.js\");\n  const decodeFunctionResult_js_1 = require(_dependencyMap[1], \"../../utils/abi/decodeFunctionResult.js\");\n  const encodeFunctionData_js_1 = require(_dependencyMap[2], \"../../utils/abi/encodeFunctionData.js\");\n  const getChainContractAddress_js_1 = require(_dependencyMap[3], \"../../utils/chain/getChainContractAddress.js\");\n  const toHex_js_1 = require(_dependencyMap[4], \"../../utils/encoding/toHex.js\");\n  const errors_js_1 = require(_dependencyMap[5], \"../../utils/ens/errors.js\");\n  const localBatchGatewayRequest_js_1 = require(_dependencyMap[6], \"../../utils/ens/localBatchGatewayRequest.js\");\n  const namehash_js_1 = require(_dependencyMap[7], \"../../utils/ens/namehash.js\");\n  const packetToBytes_js_1 = require(_dependencyMap[8], \"../../utils/ens/packetToBytes.js\");\n  const getAction_js_1 = require(_dependencyMap[9], \"../../utils/getAction.js\");\n  const readContract_js_1 = require(_dependencyMap[10], \"../public/readContract.js\");\n  async function getEnsText(client, parameters) {\n    const {\n      blockNumber,\n      blockTag,\n      key,\n      name,\n      gatewayUrls,\n      strict\n    } = parameters;\n    const {\n      chain\n    } = client;\n    const universalResolverAddress = (() => {\n      if (parameters.universalResolverAddress) return parameters.universalResolverAddress;\n      if (!chain) throw new Error('client chain not configured. universalResolverAddress is required.');\n      return (0, getChainContractAddress_js_1.getChainContractAddress)({\n        blockNumber,\n        chain,\n        contract: 'ensUniversalResolver'\n      });\n    })();\n    const tlds = chain?.ensTlds;\n    if (tlds && !tlds.some(tld => name.endsWith(tld))) return null;\n    try {\n      const readContractParameters = {\n        address: universalResolverAddress,\n        abi: abis_js_1.universalResolverResolveAbi,\n        args: [(0, toHex_js_1.toHex)((0, packetToBytes_js_1.packetToBytes)(name)), (0, encodeFunctionData_js_1.encodeFunctionData)({\n          abi: abis_js_1.textResolverAbi,\n          functionName: 'text',\n          args: [(0, namehash_js_1.namehash)(name), key]\n        }), gatewayUrls ?? [localBatchGatewayRequest_js_1.localBatchGatewayUrl]],\n        functionName: 'resolveWithGateways',\n        blockNumber,\n        blockTag\n      };\n      const readContractAction = (0, getAction_js_1.getAction)(client, readContract_js_1.readContract, 'readContract');\n      const res = await readContractAction(readContractParameters);\n      if (res[0] === '0x') return null;\n      const record = (0, decodeFunctionResult_js_1.decodeFunctionResult)({\n        abi: abis_js_1.textResolverAbi,\n        functionName: 'text',\n        data: res[0]\n      });\n      return record === '' ? null : record;\n    } catch (err) {\n      if (strict) throw err;\n      if ((0, errors_js_1.isNullUniversalResolverError)(err)) return null;\n      throw err;\n    }\n  }\n});","lineCount":70,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"getEnsText"],[7,20,3,18],[7,23,3,21,"getEnsText"],[7,33,3,31],[8,2,4,0],[8,8,4,6,"abis_js_1"],[8,17,4,15],[8,20,4,18,"require"],[8,27,4,25],[8,28,4,25,"_dependencyMap"],[8,42,4,25],[8,72,4,51],[8,73,4,52],[9,2,5,0],[9,8,5,6,"decodeFunctionResult_js_1"],[9,33,5,31],[9,36,5,34,"require"],[9,43,5,41],[9,44,5,41,"_dependencyMap"],[9,58,5,41],[9,104,5,83],[9,105,5,84],[10,2,6,0],[10,8,6,6,"encodeFunctionData_js_1"],[10,31,6,29],[10,34,6,32,"require"],[10,41,6,39],[10,42,6,39,"_dependencyMap"],[10,56,6,39],[10,100,6,79],[10,101,6,80],[11,2,7,0],[11,8,7,6,"getChainContractAddress_js_1"],[11,36,7,34],[11,39,7,37,"require"],[11,46,7,44],[11,47,7,44,"_dependencyMap"],[11,61,7,44],[11,112,7,91],[11,113,7,92],[12,2,8,0],[12,8,8,6,"toHex_js_1"],[12,18,8,16],[12,21,8,19,"require"],[12,28,8,26],[12,29,8,26,"_dependencyMap"],[12,43,8,26],[12,79,8,58],[12,80,8,59],[13,2,9,0],[13,8,9,6,"errors_js_1"],[13,19,9,17],[13,22,9,20,"require"],[13,29,9,27],[13,30,9,27,"_dependencyMap"],[13,44,9,27],[13,76,9,55],[13,77,9,56],[14,2,10,0],[14,8,10,6,"localBatchGatewayRequest_js_1"],[14,37,10,35],[14,40,10,38,"require"],[14,47,10,45],[14,48,10,45,"_dependencyMap"],[14,62,10,45],[14,112,10,91],[14,113,10,92],[15,2,11,0],[15,8,11,6,"namehash_js_1"],[15,21,11,19],[15,24,11,22,"require"],[15,31,11,29],[15,32,11,29,"_dependencyMap"],[15,46,11,29],[15,80,11,59],[15,81,11,60],[16,2,12,0],[16,8,12,6,"packetToBytes_js_1"],[16,26,12,24],[16,29,12,27,"require"],[16,36,12,34],[16,37,12,34,"_dependencyMap"],[16,51,12,34],[16,90,12,69],[16,91,12,70],[17,2,13,0],[17,8,13,6,"getAction_js_1"],[17,22,13,20],[17,25,13,23,"require"],[17,32,13,30],[17,33,13,30,"_dependencyMap"],[17,47,13,30],[17,78,13,57],[17,79,13,58],[18,2,14,0],[18,8,14,6,"readContract_js_1"],[18,25,14,23],[18,28,14,26,"require"],[18,35,14,33],[18,36,14,33,"_dependencyMap"],[18,50,14,33],[18,83,14,61],[18,84,14,62],[19,2,15,0],[19,17,15,15,"getEnsText"],[19,27,15,25,"getEnsText"],[19,28,15,26,"client"],[19,34,15,32],[19,36,15,34,"parameters"],[19,46,15,44],[19,48,15,46],[20,4,16,4],[20,10,16,10],[21,6,16,12,"blockNumber"],[21,17,16,23],[22,6,16,25,"blockTag"],[22,14,16,33],[23,6,16,35,"key"],[23,9,16,38],[24,6,16,40,"name"],[24,10,16,44],[25,6,16,46,"gatewayUrls"],[25,17,16,57],[26,6,16,59,"strict"],[27,4,16,66],[27,5,16,67],[27,8,16,70,"parameters"],[27,18,16,80],[28,4,17,4],[28,10,17,10],[29,6,17,12,"chain"],[30,4,17,18],[30,5,17,19],[30,8,17,22,"client"],[30,14,17,28],[31,4,18,4],[31,10,18,10,"universalResolverAddress"],[31,34,18,34],[31,37,18,37],[31,38,18,38],[31,44,18,44],[32,6,19,8],[32,10,19,12,"parameters"],[32,20,19,22],[32,21,19,23,"universalResolverAddress"],[32,45,19,47],[32,47,20,12],[32,54,20,19,"parameters"],[32,64,20,29],[32,65,20,30,"universalResolverAddress"],[32,89,20,54],[33,6,21,8],[33,10,21,12],[33,11,21,13,"chain"],[33,16,21,18],[33,18,22,12],[33,24,22,18],[33,28,22,22,"Error"],[33,33,22,27],[33,34,22,28],[33,102,22,96],[33,103,22,97],[34,6,23,8],[34,13,23,15],[34,14,23,16],[34,15,23,17],[34,17,23,19,"getChainContractAddress_js_1"],[34,45,23,47],[34,46,23,48,"getChainContractAddress"],[34,69,23,71],[34,71,23,73],[35,8,24,12,"blockNumber"],[35,19,24,23],[36,8,25,12,"chain"],[36,13,25,17],[37,8,26,12,"contract"],[37,16,26,20],[37,18,26,22],[38,6,27,8],[38,7,27,9],[38,8,27,10],[39,4,28,4],[39,5,28,5],[39,7,28,7],[39,8,28,8],[40,4,29,4],[40,10,29,10,"tlds"],[40,14,29,14],[40,17,29,17,"chain"],[40,22,29,22],[40,24,29,24,"ensTlds"],[40,31,29,31],[41,4,30,4],[41,8,30,8,"tlds"],[41,12,30,12],[41,16,30,16],[41,17,30,17,"tlds"],[41,21,30,21],[41,22,30,22,"some"],[41,26,30,26],[41,27,30,28,"tld"],[41,30,30,31],[41,34,30,36,"name"],[41,38,30,40],[41,39,30,41,"endsWith"],[41,47,30,49],[41,48,30,50,"tld"],[41,51,30,53],[41,52,30,54],[41,53,30,55],[41,55,31,8],[41,62,31,15],[41,66,31,19],[42,4,32,4],[42,8,32,8],[43,6,33,8],[43,12,33,14,"readContractParameters"],[43,34,33,36],[43,37,33,39],[44,8,34,12,"address"],[44,15,34,19],[44,17,34,21,"universalResolverAddress"],[44,41,34,45],[45,8,35,12,"abi"],[45,11,35,15],[45,13,35,17,"abis_js_1"],[45,22,35,26],[45,23,35,27,"universalResolverResolveAbi"],[45,50,35,54],[46,8,36,12,"args"],[46,12,36,16],[46,14,36,18],[46,15,37,16],[46,16,37,17],[46,17,37,18],[46,19,37,20,"toHex_js_1"],[46,29,37,30],[46,30,37,31,"toHex"],[46,35,37,36],[46,37,37,38],[46,38,37,39],[46,39,37,40],[46,41,37,42,"packetToBytes_js_1"],[46,59,37,60],[46,60,37,61,"packetToBytes"],[46,73,37,74],[46,75,37,76,"name"],[46,79,37,80],[46,80,37,81],[46,81,37,82],[46,83,38,16],[46,84,38,17],[46,85,38,18],[46,87,38,20,"encodeFunctionData_js_1"],[46,110,38,43],[46,111,38,44,"encodeFunctionData"],[46,129,38,62],[46,131,38,64],[47,10,39,20,"abi"],[47,13,39,23],[47,15,39,25,"abis_js_1"],[47,24,39,34],[47,25,39,35,"textResolverAbi"],[47,40,39,50],[48,10,40,20,"functionName"],[48,22,40,32],[48,24,40,34],[48,30,40,40],[49,10,41,20,"args"],[49,14,41,24],[49,16,41,26],[49,17,41,27],[49,18,41,28],[49,19,41,29],[49,21,41,31,"namehash_js_1"],[49,34,41,44],[49,35,41,45,"namehash"],[49,43,41,53],[49,45,41,55,"name"],[49,49,41,59],[49,50,41,60],[49,52,41,62,"key"],[49,55,41,65],[50,8,42,16],[50,9,42,17],[50,10,42,18],[50,12,43,16,"gatewayUrls"],[50,23,43,27],[50,27,43,31],[50,28,43,32,"localBatchGatewayRequest_js_1"],[50,57,43,61],[50,58,43,62,"localBatchGatewayUrl"],[50,78,43,82],[50,79,43,83],[50,80,44,13],[51,8,45,12,"functionName"],[51,20,45,24],[51,22,45,26],[51,43,45,47],[52,8,46,12,"blockNumber"],[52,19,46,23],[53,8,47,12,"blockTag"],[54,6,48,8],[54,7,48,9],[55,6,49,8],[55,12,49,14,"readContractAction"],[55,30,49,32],[55,33,49,35],[55,34,49,36],[55,35,49,37],[55,37,49,39,"getAction_js_1"],[55,51,49,53],[55,52,49,54,"getAction"],[55,61,49,63],[55,63,49,65,"client"],[55,69,49,71],[55,71,49,73,"readContract_js_1"],[55,88,49,90],[55,89,49,91,"readContract"],[55,101,49,103],[55,103,49,105],[55,117,49,119],[55,118,49,120],[56,6,50,8],[56,12,50,14,"res"],[56,15,50,17],[56,18,50,20],[56,24,50,26,"readContractAction"],[56,42,50,44],[56,43,50,45,"readContractParameters"],[56,65,50,67],[56,66,50,68],[57,6,51,8],[57,10,51,12,"res"],[57,13,51,15],[57,14,51,16],[57,15,51,17],[57,16,51,18],[57,21,51,23],[57,25,51,27],[57,27,52,12],[57,34,52,19],[57,38,52,23],[58,6,53,8],[58,12,53,14,"record"],[58,18,53,20],[58,21,53,23],[58,22,53,24],[58,23,53,25],[58,25,53,27,"decodeFunctionResult_js_1"],[58,50,53,52],[58,51,53,53,"decodeFunctionResult"],[58,71,53,73],[58,73,53,75],[59,8,54,12,"abi"],[59,11,54,15],[59,13,54,17,"abis_js_1"],[59,22,54,26],[59,23,54,27,"textResolverAbi"],[59,38,54,42],[60,8,55,12,"functionName"],[60,20,55,24],[60,22,55,26],[60,28,55,32],[61,8,56,12,"data"],[61,12,56,16],[61,14,56,18,"res"],[61,17,56,21],[61,18,56,22],[61,19,56,23],[62,6,57,8],[62,7,57,9],[62,8,57,10],[63,6,58,8],[63,13,58,15,"record"],[63,19,58,21],[63,24,58,26],[63,26,58,28],[63,29,58,31],[63,33,58,35],[63,36,58,38,"record"],[63,42,58,44],[64,4,59,4],[64,5,59,5],[64,6,60,4],[64,13,60,11,"err"],[64,16,60,14],[64,18,60,16],[65,6,61,8],[65,10,61,12,"strict"],[65,16,61,18],[65,18,62,12],[65,24,62,18,"err"],[65,27,62,21],[66,6,63,8],[66,10,63,12],[66,11,63,13],[66,12,63,14],[66,14,63,16,"errors_js_1"],[66,25,63,27],[66,26,63,28,"isNullUniversalResolverError"],[66,54,63,56],[66,56,63,58,"err"],[66,59,63,61],[66,60,63,62],[66,62,64,12],[66,69,64,19],[66,73,64,23],[67,6,65,8],[67,12,65,14,"err"],[67,15,65,17],[68,4,66,4],[69,2,67,0],[70,0,67,1],[70,3]],"functionMap":{"names":["<global>","getEnsText","<anonymous>","tlds.some$argument_0"],"mappings":"AAA;ACc;sCCG;KDU;2BEE,2BF;CDqC"},"hasCjsExports":true},"type":"js/module"}]}