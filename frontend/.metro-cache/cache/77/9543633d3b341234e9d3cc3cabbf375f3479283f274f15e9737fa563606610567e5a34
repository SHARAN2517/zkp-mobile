{"dependencies":[{"name":"../../accounts/utils/parseAccount.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":26,"index":138},"end":{"line":4,"column":73,"index":185}}],"key":"8eNMvEo2xQsycDgJ0sJJRoltw8M=","exportNames":["*"],"imports":1}},{"name":"../../errors/base.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":18,"index":205},"end":{"line":5,"column":49,"index":236}}],"key":"3GwELfaTmapBnCWreQzHgy6p5Bg=","exportNames":["*"],"imports":1}},{"name":"../../utils/authorization/recoverAuthorizationAddress.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":41,"index":279},"end":{"line":6,"column":108,"index":346}}],"key":"7NIqqiSMfvQgWWUzc3mhz7D/SoQ=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/toHex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":19,"index":367},"end":{"line":7,"column":59,"index":407}}],"key":"H7vq9DbZar/LBdoWrgikLXyV5L0=","exportNames":["*"],"imports":1}},{"name":"../../utils/errors/getEstimateGasError.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":33,"index":442},"end":{"line":8,"column":85,"index":494}}],"key":"g/BFLHrMjdyQh+Men5WenlLF1v0=","exportNames":["*"],"imports":1}},{"name":"../../utils/formatters/extract.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":21,"index":517},"end":{"line":9,"column":65,"index":561}}],"key":"ii6bPw/E/WciDVe+QQFsGEmRtmg=","exportNames":["*"],"imports":1}},{"name":"../../utils/formatters/transactionRequest.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":32,"index":595},"end":{"line":10,"column":87,"index":650}}],"key":"tCxmrubUk2Gi9nEtW0PgmmxlSsE=","exportNames":["*"],"imports":1}},{"name":"../../utils/stateOverride.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":27,"index":679},"end":{"line":11,"column":66,"index":718}}],"key":"/U/f9BTjrU25Duc2bKPtBo+QDd0=","exportNames":["*"],"imports":1}},{"name":"../../utils/transaction/assertRequest.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":27,"index":747},"end":{"line":12,"column":78,"index":798}}],"key":"rfsgfrrGuum4hLl9LkRrxmhxV+8=","exportNames":["*"],"imports":1}},{"name":"../wallet/prepareTransactionRequest.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":13,"column":39,"index":839},"end":{"line":13,"column":88,"index":888}}],"key":"SjZiNXF4J6xVqDvd9Zt6Pj9UXM0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.estimateGas = estimateGas;\n  const parseAccount_js_1 = require(_dependencyMap[0], \"../../accounts/utils/parseAccount.js\");\n  const base_js_1 = require(_dependencyMap[1], \"../../errors/base.js\");\n  const recoverAuthorizationAddress_js_1 = require(_dependencyMap[2], \"../../utils/authorization/recoverAuthorizationAddress.js\");\n  const toHex_js_1 = require(_dependencyMap[3], \"../../utils/encoding/toHex.js\");\n  const getEstimateGasError_js_1 = require(_dependencyMap[4], \"../../utils/errors/getEstimateGasError.js\");\n  const extract_js_1 = require(_dependencyMap[5], \"../../utils/formatters/extract.js\");\n  const transactionRequest_js_1 = require(_dependencyMap[6], \"../../utils/formatters/transactionRequest.js\");\n  const stateOverride_js_1 = require(_dependencyMap[7], \"../../utils/stateOverride.js\");\n  const assertRequest_js_1 = require(_dependencyMap[8], \"../../utils/transaction/assertRequest.js\");\n  const prepareTransactionRequest_js_1 = require(_dependencyMap[9], \"../wallet/prepareTransactionRequest.js\");\n  async function estimateGas(client, args) {\n    const {\n      account: account_ = client.account,\n      prepare = true\n    } = args;\n    const account = account_ ? (0, parseAccount_js_1.parseAccount)(account_) : undefined;\n    const parameters = (() => {\n      if (Array.isArray(prepare)) return prepare;\n      if (account?.type !== 'local') return ['blobVersionedHashes'];\n      return undefined;\n    })();\n    try {\n      const to = await (async () => {\n        if (args.to) return args.to;\n        if (args.authorizationList && args.authorizationList.length > 0) return await (0, recoverAuthorizationAddress_js_1.recoverAuthorizationAddress)({\n          authorization: args.authorizationList[0]\n        }).catch(() => {\n          throw new base_js_1.BaseError('`to` is required. Could not infer from `authorizationList`');\n        });\n        return undefined;\n      })();\n      const {\n        accessList,\n        authorizationList,\n        blobs,\n        blobVersionedHashes,\n        blockNumber,\n        blockTag,\n        data,\n        gas,\n        gasPrice,\n        maxFeePerBlobGas,\n        maxFeePerGas,\n        maxPriorityFeePerGas,\n        nonce,\n        value,\n        stateOverride,\n        ...rest\n      } = prepare ? await (0, prepareTransactionRequest_js_1.prepareTransactionRequest)(client, {\n        ...args,\n        parameters,\n        to\n      }) : args;\n      if (gas && args.gas !== gas) return gas;\n      const blockNumberHex = typeof blockNumber === 'bigint' ? (0, toHex_js_1.numberToHex)(blockNumber) : undefined;\n      const block = blockNumberHex || blockTag;\n      const rpcStateOverride = (0, stateOverride_js_1.serializeStateOverride)(stateOverride);\n      (0, assertRequest_js_1.assertRequest)(args);\n      const chainFormat = client.chain?.formatters?.transactionRequest?.format;\n      const format = chainFormat || transactionRequest_js_1.formatTransactionRequest;\n      const request = format({\n        ...(0, extract_js_1.extract)(rest, {\n          format: chainFormat\n        }),\n        account,\n        accessList,\n        authorizationList,\n        blobs,\n        blobVersionedHashes,\n        data,\n        gasPrice,\n        maxFeePerBlobGas,\n        maxFeePerGas,\n        maxPriorityFeePerGas,\n        nonce,\n        to,\n        value\n      }, 'estimateGas');\n      return BigInt(await client.request({\n        method: 'eth_estimateGas',\n        params: rpcStateOverride ? [request, block ?? client.experimental_blockTag ?? 'latest', rpcStateOverride] : block ? [request, block] : [request]\n      }));\n    } catch (err) {\n      throw (0, getEstimateGasError_js_1.getEstimateGasError)(err, {\n        ...args,\n        account,\n        chain: client.chain\n      });\n    }\n  }\n});","lineCount":98,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"estimateGas"],[7,21,3,19],[7,24,3,22,"estimateGas"],[7,35,3,33],[8,2,4,0],[8,8,4,6,"parseAccount_js_1"],[8,25,4,23],[8,28,4,26,"require"],[8,35,4,33],[8,36,4,33,"_dependencyMap"],[8,50,4,33],[8,93,4,72],[8,94,4,73],[9,2,5,0],[9,8,5,6,"base_js_1"],[9,17,5,15],[9,20,5,18,"require"],[9,27,5,25],[9,28,5,25,"_dependencyMap"],[9,42,5,25],[9,69,5,48],[9,70,5,49],[10,2,6,0],[10,8,6,6,"recoverAuthorizationAddress_js_1"],[10,40,6,38],[10,43,6,41,"require"],[10,50,6,48],[10,51,6,48,"_dependencyMap"],[10,65,6,48],[10,128,6,107],[10,129,6,108],[11,2,7,0],[11,8,7,6,"toHex_js_1"],[11,18,7,16],[11,21,7,19,"require"],[11,28,7,26],[11,29,7,26,"_dependencyMap"],[11,43,7,26],[11,79,7,58],[11,80,7,59],[12,2,8,0],[12,8,8,6,"getEstimateGasError_js_1"],[12,32,8,30],[12,35,8,33,"require"],[12,42,8,40],[12,43,8,40,"_dependencyMap"],[12,57,8,40],[12,105,8,84],[12,106,8,85],[13,2,9,0],[13,8,9,6,"extract_js_1"],[13,20,9,18],[13,23,9,21,"require"],[13,30,9,28],[13,31,9,28,"_dependencyMap"],[13,45,9,28],[13,85,9,64],[13,86,9,65],[14,2,10,0],[14,8,10,6,"transactionRequest_js_1"],[14,31,10,29],[14,34,10,32,"require"],[14,41,10,39],[14,42,10,39,"_dependencyMap"],[14,56,10,39],[14,107,10,86],[14,108,10,87],[15,2,11,0],[15,8,11,6,"stateOverride_js_1"],[15,26,11,24],[15,29,11,27,"require"],[15,36,11,34],[15,37,11,34,"_dependencyMap"],[15,51,11,34],[15,86,11,65],[15,87,11,66],[16,2,12,0],[16,8,12,6,"assertRequest_js_1"],[16,26,12,24],[16,29,12,27,"require"],[16,36,12,34],[16,37,12,34,"_dependencyMap"],[16,51,12,34],[16,98,12,77],[16,99,12,78],[17,2,13,0],[17,8,13,6,"prepareTransactionRequest_js_1"],[17,38,13,36],[17,41,13,39,"require"],[17,48,13,46],[17,49,13,46,"_dependencyMap"],[17,63,13,46],[17,108,13,87],[17,109,13,88],[18,2,14,0],[18,17,14,15,"estimateGas"],[18,28,14,26,"estimateGas"],[18,29,14,27,"client"],[18,35,14,33],[18,37,14,35,"args"],[18,41,14,39],[18,43,14,41],[19,4,15,4],[19,10,15,10],[20,6,15,12,"account"],[20,13,15,19],[20,15,15,21,"account_"],[20,23,15,29],[20,26,15,32,"client"],[20,32,15,38],[20,33,15,39,"account"],[20,40,15,46],[21,6,15,48,"prepare"],[21,13,15,55],[21,16,15,58],[22,4,15,63],[22,5,15,64],[22,8,15,67,"args"],[22,12,15,71],[23,4,16,4],[23,10,16,10,"account"],[23,17,16,17],[23,20,16,20,"account_"],[23,28,16,28],[23,31,16,31],[23,32,16,32],[23,33,16,33],[23,35,16,35,"parseAccount_js_1"],[23,52,16,52],[23,53,16,53,"parseAccount"],[23,65,16,65],[23,67,16,67,"account_"],[23,75,16,75],[23,76,16,76],[23,79,16,79,"undefined"],[23,88,16,88],[24,4,17,4],[24,10,17,10,"parameters"],[24,20,17,20],[24,23,17,23],[24,24,17,24],[24,30,17,30],[25,6,18,8],[25,10,18,12,"Array"],[25,15,18,17],[25,16,18,18,"isArray"],[25,23,18,25],[25,24,18,26,"prepare"],[25,31,18,33],[25,32,18,34],[25,34,19,12],[25,41,19,19,"prepare"],[25,48,19,26],[26,6,20,8],[26,10,20,12,"account"],[26,17,20,19],[26,19,20,21,"type"],[26,23,20,25],[26,28,20,30],[26,35,20,37],[26,37,21,12],[26,44,21,19],[26,45,21,20],[26,66,21,41],[26,67,21,42],[27,6,22,8],[27,13,22,15,"undefined"],[27,22,22,24],[28,4,23,4],[28,5,23,5],[28,7,23,7],[28,8,23,8],[29,4,24,4],[29,8,24,8],[30,6,25,8],[30,12,25,14,"to"],[30,14,25,16],[30,17,25,19],[30,23,25,25],[30,24,25,26],[30,36,25,38],[31,8,26,12],[31,12,26,16,"args"],[31,16,26,20],[31,17,26,21,"to"],[31,19,26,23],[31,21,27,16],[31,28,27,23,"args"],[31,32,27,27],[31,33,27,28,"to"],[31,35,27,30],[32,8,28,12],[32,12,28,16,"args"],[32,16,28,20],[32,17,28,21,"authorizationList"],[32,34,28,38],[32,38,28,42,"args"],[32,42,28,46],[32,43,28,47,"authorizationList"],[32,60,28,64],[32,61,28,65,"length"],[32,67,28,71],[32,70,28,74],[32,71,28,75],[32,73,29,16],[32,80,29,23],[32,86,29,29],[32,87,29,30],[32,88,29,31],[32,90,29,33,"recoverAuthorizationAddress_js_1"],[32,122,29,65],[32,123,29,66,"recoverAuthorizationAddress"],[32,150,29,93],[32,152,29,95],[33,10,30,20,"authorization"],[33,23,30,33],[33,25,30,35,"args"],[33,29,30,39],[33,30,30,40,"authorizationList"],[33,47,30,57],[33,48,30,58],[33,49,30,59],[34,8,31,16],[34,9,31,17],[34,10,31,18],[34,11,31,19,"catch"],[34,16,31,24],[34,17,31,25],[34,23,31,31],[35,10,32,20],[35,16,32,26],[35,20,32,30,"base_js_1"],[35,29,32,39],[35,30,32,40,"BaseError"],[35,39,32,49],[35,40,32,50],[35,100,32,110],[35,101,32,111],[36,8,33,16],[36,9,33,17],[36,10,33,18],[37,8,34,12],[37,15,34,19,"undefined"],[37,24,34,28],[38,6,35,8],[38,7,35,9],[38,9,35,11],[38,10,35,12],[39,6,36,8],[39,12,36,14],[40,8,36,16,"accessList"],[40,18,36,26],[41,8,36,28,"authorizationList"],[41,25,36,45],[42,8,36,47,"blobs"],[42,13,36,52],[43,8,36,54,"blobVersionedHashes"],[43,27,36,73],[44,8,36,75,"blockNumber"],[44,19,36,86],[45,8,36,88,"blockTag"],[45,16,36,96],[46,8,36,98,"data"],[46,12,36,102],[47,8,36,104,"gas"],[47,11,36,107],[48,8,36,109,"gasPrice"],[48,16,36,117],[49,8,36,119,"maxFeePerBlobGas"],[49,24,36,135],[50,8,36,137,"maxFeePerGas"],[50,20,36,149],[51,8,36,151,"maxPriorityFeePerGas"],[51,28,36,171],[52,8,36,173,"nonce"],[52,13,36,178],[53,8,36,180,"value"],[53,13,36,185],[54,8,36,187,"stateOverride"],[54,21,36,200],[55,8,36,202],[55,11,36,205,"rest"],[56,6,36,210],[56,7,36,211],[56,10,36,214,"prepare"],[56,17,36,221],[56,20,37,15],[56,26,37,21],[56,27,37,22],[56,28,37,23],[56,30,37,25,"prepareTransactionRequest_js_1"],[56,60,37,55],[56,61,37,56,"prepareTransactionRequest"],[56,86,37,81],[56,88,37,83,"client"],[56,94,37,89],[56,96,37,91],[57,8,38,16],[57,11,38,19,"args"],[57,15,38,23],[58,8,39,16,"parameters"],[58,18,39,26],[59,8,40,16,"to"],[60,6,41,12],[60,7,41,13],[60,8,41,14],[60,11,42,14,"args"],[60,15,42,18],[61,6,43,8],[61,10,43,12,"gas"],[61,13,43,15],[61,17,43,19,"args"],[61,21,43,23],[61,22,43,24,"gas"],[61,25,43,27],[61,30,43,32,"gas"],[61,33,43,35],[61,35,44,12],[61,42,44,19,"gas"],[61,45,44,22],[62,6,45,8],[62,12,45,14,"blockNumberHex"],[62,26,45,28],[62,29,45,31],[62,36,45,38,"blockNumber"],[62,47,45,49],[62,52,45,54],[62,60,45,62],[62,63,45,65],[62,64,45,66],[62,65,45,67],[62,67,45,69,"toHex_js_1"],[62,77,45,79],[62,78,45,80,"numberToHex"],[62,89,45,91],[62,91,45,93,"blockNumber"],[62,102,45,104],[62,103,45,105],[62,106,45,108,"undefined"],[62,115,45,117],[63,6,46,8],[63,12,46,14,"block"],[63,17,46,19],[63,20,46,22,"blockNumberHex"],[63,34,46,36],[63,38,46,40,"blockTag"],[63,46,46,48],[64,6,47,8],[64,12,47,14,"rpcStateOverride"],[64,28,47,30],[64,31,47,33],[64,32,47,34],[64,33,47,35],[64,35,47,37,"stateOverride_js_1"],[64,53,47,55],[64,54,47,56,"serializeStateOverride"],[64,76,47,78],[64,78,47,80,"stateOverride"],[64,91,47,93],[64,92,47,94],[65,6,48,8],[65,7,48,9],[65,8,48,10],[65,10,48,12,"assertRequest_js_1"],[65,28,48,30],[65,29,48,31,"assertRequest"],[65,42,48,44],[65,44,48,46,"args"],[65,48,48,50],[65,49,48,51],[66,6,49,8],[66,12,49,14,"chainFormat"],[66,23,49,25],[66,26,49,28,"client"],[66,32,49,34],[66,33,49,35,"chain"],[66,38,49,40],[66,40,49,42,"formatters"],[66,50,49,52],[66,52,49,54,"transactionRequest"],[66,70,49,72],[66,72,49,74,"format"],[66,78,49,80],[67,6,50,8],[67,12,50,14,"format"],[67,18,50,20],[67,21,50,23,"chainFormat"],[67,32,50,34],[67,36,50,38,"transactionRequest_js_1"],[67,59,50,61],[67,60,50,62,"formatTransactionRequest"],[67,84,50,86],[68,6,51,8],[68,12,51,14,"request"],[68,19,51,21],[68,22,51,24,"format"],[68,28,51,30],[68,29,51,31],[69,8,52,12],[69,11,52,15],[69,12,52,16],[69,13,52,17],[69,15,52,19,"extract_js_1"],[69,27,52,31],[69,28,52,32,"extract"],[69,35,52,39],[69,37,52,41,"rest"],[69,41,52,45],[69,43,52,47],[70,10,52,49,"format"],[70,16,52,55],[70,18,52,57,"chainFormat"],[71,8,52,69],[71,9,52,70],[71,10,52,71],[72,8,53,12,"account"],[72,15,53,19],[73,8,54,12,"accessList"],[73,18,54,22],[74,8,55,12,"authorizationList"],[74,25,55,29],[75,8,56,12,"blobs"],[75,13,56,17],[76,8,57,12,"blobVersionedHashes"],[76,27,57,31],[77,8,58,12,"data"],[77,12,58,16],[78,8,59,12,"gasPrice"],[78,16,59,20],[79,8,60,12,"maxFeePerBlobGas"],[79,24,60,28],[80,8,61,12,"maxFeePerGas"],[80,20,61,24],[81,8,62,12,"maxPriorityFeePerGas"],[81,28,62,32],[82,8,63,12,"nonce"],[82,13,63,17],[83,8,64,12,"to"],[83,10,64,14],[84,8,65,12,"value"],[85,6,66,8],[85,7,66,9],[85,9,66,11],[85,22,66,24],[85,23,66,25],[86,6,67,8],[86,13,67,15,"BigInt"],[86,19,67,21],[86,20,67,22],[86,26,67,28,"client"],[86,32,67,34],[86,33,67,35,"request"],[86,40,67,42],[86,41,67,43],[87,8,68,12,"method"],[87,14,68,18],[87,16,68,20],[87,33,68,37],[88,8,69,12,"params"],[88,14,69,18],[88,16,69,20,"rpcStateOverride"],[88,32,69,36],[88,35,70,18],[88,36,71,20,"request"],[88,43,71,27],[88,45,72,20,"block"],[88,50,72,25],[88,54,72,29,"client"],[88,60,72,35],[88,61,72,36,"experimental_blockTag"],[88,82,72,57],[88,86,72,61],[88,94,72,69],[88,96,73,20,"rpcStateOverride"],[88,112,73,36],[88,113,74,17],[88,116,75,18,"block"],[88,121,75,23],[88,124,76,22],[88,125,76,23,"request"],[88,132,76,30],[88,134,76,32,"block"],[88,139,76,37],[88,140,76,38],[88,143,77,22],[88,144,77,23,"request"],[88,151,77,30],[89,6,78,8],[89,7,78,9],[89,8,78,10],[89,9,78,11],[90,4,79,4],[90,5,79,5],[90,6,80,4],[90,13,80,11,"err"],[90,16,80,14],[90,18,80,16],[91,6,81,8],[91,12,81,14],[91,13,81,15],[91,14,81,16],[91,16,81,18,"getEstimateGasError_js_1"],[91,40,81,42],[91,41,81,43,"getEstimateGasError"],[91,60,81,62],[91,62,81,64,"err"],[91,65,81,67],[91,67,81,69],[92,8,82,12],[92,11,82,15,"args"],[92,15,82,19],[93,8,83,12,"account"],[93,15,83,19],[94,8,84,12,"chain"],[94,13,84,17],[94,15,84,19,"client"],[94,21,84,25],[94,22,84,26,"chain"],[95,6,85,8],[95,7,85,9],[95,8,85,10],[96,4,86,4],[97,2,87,0],[98,0,87,1],[98,3]],"functionMap":{"names":["<global>","estimateGas","<anonymous>","_catch$argument_0"],"mappings":"AAA;ACa;wBCG;KDM;0BCE;yBCM;iBDE;SDE;CDoD"},"hasCjsExports":true},"type":"js/module"}]}