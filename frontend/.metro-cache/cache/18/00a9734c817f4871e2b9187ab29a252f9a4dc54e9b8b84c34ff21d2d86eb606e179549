{"dependencies":[{"name":"../data/isHex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":19,"index":141},"end":{"line":4,"column":46,"index":168}}],"key":"Zhpx5ub+cvhHPhiQdOWXy91Arss=","exportNames":["*"],"imports":1}},{"name":"../data/size.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":18,"index":188},"end":{"line":5,"column":44,"index":214}}],"key":"xQoUiKRzZ0zPkoZoSylkWHhsWcA=","exportNames":["*"],"imports":1}},{"name":"../encoding/fromHex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":21,"index":237},"end":{"line":6,"column":54,"index":270}}],"key":"Xv85Hp9IaIJKaVJVq82n8YJAQj4=","exportNames":["*"],"imports":1}},{"name":"../encoding/toHex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":19,"index":291},"end":{"line":7,"column":50,"index":322}}],"key":"usRuFBhU0msSe53PuUMzeie4myQ=","exportNames":["*"],"imports":1}},{"name":"@noble/curves/secp256k1","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":61,"index":527},"end":{"line":10,"column":95,"index":561}}],"key":"a7SOGcIa2bJLVocZy/oc6lQDQoQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.recoverPublicKey = recoverPublicKey;\n  const isHex_js_1 = require(_dependencyMap[0], \"../data/isHex.js\");\n  const size_js_1 = require(_dependencyMap[1], \"../data/size.js\");\n  const fromHex_js_1 = require(_dependencyMap[2], \"../encoding/fromHex.js\");\n  const toHex_js_1 = require(_dependencyMap[3], \"../encoding/toHex.js\");\n  async function recoverPublicKey({\n    hash,\n    signature\n  }) {\n    const hashHex = (0, isHex_js_1.isHex)(hash) ? hash : (0, toHex_js_1.toHex)(hash);\n    const {\n      secp256k1\n    } = await Promise.resolve().then(() => require(_dependencyMap[4], \"@noble/curves/secp256k1\"));\n    const signature_ = (() => {\n      if (typeof signature === 'object' && 'r' in signature && 's' in signature) {\n        const {\n          r,\n          s,\n          v,\n          yParity\n        } = signature;\n        const yParityOrV = Number(yParity ?? v);\n        const recoveryBit = toRecoveryBit(yParityOrV);\n        return new secp256k1.Signature((0, fromHex_js_1.hexToBigInt)(r), (0, fromHex_js_1.hexToBigInt)(s)).addRecoveryBit(recoveryBit);\n      }\n      const signatureHex = (0, isHex_js_1.isHex)(signature) ? signature : (0, toHex_js_1.toHex)(signature);\n      if ((0, size_js_1.size)(signatureHex) !== 65) throw new Error('invalid signature length');\n      const yParityOrV = (0, fromHex_js_1.hexToNumber)(`0x${signatureHex.slice(130)}`);\n      const recoveryBit = toRecoveryBit(yParityOrV);\n      return secp256k1.Signature.fromCompact(signatureHex.substring(2, 130)).addRecoveryBit(recoveryBit);\n    })();\n    const publicKey = signature_.recoverPublicKey(hashHex.substring(2)).toHex(false);\n    return `0x${publicKey}`;\n  }\n  function toRecoveryBit(yParityOrV) {\n    if (yParityOrV === 0 || yParityOrV === 1) return yParityOrV;\n    if (yParityOrV === 27) return 0;\n    if (yParityOrV === 28) return 1;\n    throw new Error('Invalid yParityOrV value');\n  }\n});","lineCount":47,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"recoverPublicKey"],[7,26,3,24],[7,29,3,27,"recoverPublicKey"],[7,45,3,43],[8,2,4,0],[8,8,4,6,"isHex_js_1"],[8,18,4,16],[8,21,4,19,"require"],[8,28,4,26],[8,29,4,26,"_dependencyMap"],[8,43,4,26],[8,66,4,45],[8,67,4,46],[9,2,5,0],[9,8,5,6,"size_js_1"],[9,17,5,15],[9,20,5,18,"require"],[9,27,5,25],[9,28,5,25,"_dependencyMap"],[9,42,5,25],[9,64,5,43],[9,65,5,44],[10,2,6,0],[10,8,6,6,"fromHex_js_1"],[10,20,6,18],[10,23,6,21,"require"],[10,30,6,28],[10,31,6,28,"_dependencyMap"],[10,45,6,28],[10,74,6,53],[10,75,6,54],[11,2,7,0],[11,8,7,6,"toHex_js_1"],[11,18,7,16],[11,21,7,19,"require"],[11,28,7,26],[11,29,7,26,"_dependencyMap"],[11,43,7,26],[11,70,7,49],[11,71,7,50],[12,2,8,0],[12,17,8,15,"recoverPublicKey"],[12,33,8,31,"recoverPublicKey"],[12,34,8,32],[13,4,8,34,"hash"],[13,8,8,38],[14,4,8,40,"signature"],[15,2,8,51],[15,3,8,52],[15,5,8,54],[16,4,9,4],[16,10,9,10,"hashHex"],[16,17,9,17],[16,20,9,20],[16,21,9,21],[16,22,9,22],[16,24,9,24,"isHex_js_1"],[16,34,9,34],[16,35,9,35,"isHex"],[16,40,9,40],[16,42,9,42,"hash"],[16,46,9,46],[16,47,9,47],[16,50,9,50,"hash"],[16,54,9,54],[16,57,9,57],[16,58,9,58],[16,59,9,59],[16,61,9,61,"toHex_js_1"],[16,71,9,71],[16,72,9,72,"toHex"],[16,77,9,77],[16,79,9,79,"hash"],[16,83,9,83],[16,84,9,84],[17,4,10,4],[17,10,10,10],[18,6,10,12,"secp256k1"],[19,4,10,22],[19,5,10,23],[19,8,10,26],[19,14,10,32,"Promise"],[19,21,10,39],[19,22,10,40,"resolve"],[19,29,10,47],[19,30,10,48],[19,31,10,49],[19,32,10,50,"then"],[19,36,10,54],[19,37,10,55],[19,43,10,61,"require"],[19,50,10,68],[19,51,10,68,"_dependencyMap"],[19,65,10,68],[19,95,10,94],[19,96,10,95],[19,97,10,96],[20,4,11,4],[20,10,11,10,"signature_"],[20,20,11,20],[20,23,11,23],[20,24,11,24],[20,30,11,30],[21,6,12,8],[21,10,12,12],[21,17,12,19,"signature"],[21,26,12,28],[21,31,12,33],[21,39,12,41],[21,43,12,45],[21,46,12,48],[21,50,12,52,"signature"],[21,59,12,61],[21,63,12,65],[21,66,12,68],[21,70,12,72,"signature"],[21,79,12,81],[21,81,12,83],[22,8,13,12],[22,14,13,18],[23,10,13,20,"r"],[23,11,13,21],[24,10,13,23,"s"],[24,11,13,24],[25,10,13,26,"v"],[25,11,13,27],[26,10,13,29,"yParity"],[27,8,13,37],[27,9,13,38],[27,12,13,41,"signature"],[27,21,13,50],[28,8,14,12],[28,14,14,18,"yParityOrV"],[28,24,14,28],[28,27,14,31,"Number"],[28,33,14,37],[28,34,14,38,"yParity"],[28,41,14,45],[28,45,14,49,"v"],[28,46,14,50],[28,47,14,51],[29,8,15,12],[29,14,15,18,"recoveryBit"],[29,25,15,29],[29,28,15,32,"toRecoveryBit"],[29,41,15,45],[29,42,15,46,"yParityOrV"],[29,52,15,56],[29,53,15,57],[30,8,16,12],[30,15,16,19],[30,19,16,23,"secp256k1"],[30,28,16,32],[30,29,16,33,"Signature"],[30,38,16,42],[30,39,16,43],[30,40,16,44],[30,41,16,45],[30,43,16,47,"fromHex_js_1"],[30,55,16,59],[30,56,16,60,"hexToBigInt"],[30,67,16,71],[30,69,16,73,"r"],[30,70,16,74],[30,71,16,75],[30,73,16,77],[30,74,16,78],[30,75,16,79],[30,77,16,81,"fromHex_js_1"],[30,89,16,93],[30,90,16,94,"hexToBigInt"],[30,101,16,105],[30,103,16,107,"s"],[30,104,16,108],[30,105,16,109],[30,106,16,110],[30,107,16,111,"addRecoveryBit"],[30,121,16,125],[30,122,16,126,"recoveryBit"],[30,133,16,137],[30,134,16,138],[31,6,17,8],[32,6,18,8],[32,12,18,14,"signatureHex"],[32,24,18,26],[32,27,18,29],[32,28,18,30],[32,29,18,31],[32,31,18,33,"isHex_js_1"],[32,41,18,43],[32,42,18,44,"isHex"],[32,47,18,49],[32,49,18,51,"signature"],[32,58,18,60],[32,59,18,61],[32,62,18,64,"signature"],[32,71,18,73],[32,74,18,76],[32,75,18,77],[32,76,18,78],[32,78,18,80,"toHex_js_1"],[32,88,18,90],[32,89,18,91,"toHex"],[32,94,18,96],[32,96,18,98,"signature"],[32,105,18,107],[32,106,18,108],[33,6,19,8],[33,10,19,12],[33,11,19,13],[33,12,19,14],[33,14,19,16,"size_js_1"],[33,23,19,25],[33,24,19,26,"size"],[33,28,19,30],[33,30,19,32,"signatureHex"],[33,42,19,44],[33,43,19,45],[33,48,19,50],[33,50,19,52],[33,52,20,12],[33,58,20,18],[33,62,20,22,"Error"],[33,67,20,27],[33,68,20,28],[33,94,20,54],[33,95,20,55],[34,6,21,8],[34,12,21,14,"yParityOrV"],[34,22,21,24],[34,25,21,27],[34,26,21,28],[34,27,21,29],[34,29,21,31,"fromHex_js_1"],[34,41,21,43],[34,42,21,44,"hexToNumber"],[34,53,21,55],[34,55,21,57],[34,60,21,62,"signatureHex"],[34,72,21,74],[34,73,21,75,"slice"],[34,78,21,80],[34,79,21,81],[34,82,21,84],[34,83,21,85],[34,85,21,87],[34,86,21,88],[35,6,22,8],[35,12,22,14,"recoveryBit"],[35,23,22,25],[35,26,22,28,"toRecoveryBit"],[35,39,22,41],[35,40,22,42,"yParityOrV"],[35,50,22,52],[35,51,22,53],[36,6,23,8],[36,13,23,15,"secp256k1"],[36,22,23,24],[36,23,23,25,"Signature"],[36,32,23,34],[36,33,23,35,"fromCompact"],[36,44,23,46],[36,45,23,47,"signatureHex"],[36,57,23,59],[36,58,23,60,"substring"],[36,67,23,69],[36,68,23,70],[36,69,23,71],[36,71,23,73],[36,74,23,76],[36,75,23,77],[36,76,23,78],[36,77,23,79,"addRecoveryBit"],[36,91,23,93],[36,92,23,94,"recoveryBit"],[36,103,23,105],[36,104,23,106],[37,4,24,4],[37,5,24,5],[37,7,24,7],[37,8,24,8],[38,4,25,4],[38,10,25,10,"publicKey"],[38,19,25,19],[38,22,25,22,"signature_"],[38,32,25,32],[38,33,26,9,"recoverPublicKey"],[38,49,26,25],[38,50,26,26,"hashHex"],[38,57,26,33],[38,58,26,34,"substring"],[38,67,26,43],[38,68,26,44],[38,69,26,45],[38,70,26,46],[38,71,26,47],[38,72,27,9,"toHex"],[38,77,27,14],[38,78,27,15],[38,83,27,20],[38,84,27,21],[39,4,28,4],[39,11,28,11],[39,16,28,16,"publicKey"],[39,25,28,25],[39,27,28,27],[40,2,29,0],[41,2,30,0],[41,11,30,9,"toRecoveryBit"],[41,24,30,22,"toRecoveryBit"],[41,25,30,23,"yParityOrV"],[41,35,30,33],[41,37,30,35],[42,4,31,4],[42,8,31,8,"yParityOrV"],[42,18,31,18],[42,23,31,23],[42,24,31,24],[42,28,31,28,"yParityOrV"],[42,38,31,38],[42,43,31,43],[42,44,31,44],[42,46,32,8],[42,53,32,15,"yParityOrV"],[42,63,32,25],[43,4,33,4],[43,8,33,8,"yParityOrV"],[43,18,33,18],[43,23,33,23],[43,25,33,25],[43,27,34,8],[43,34,34,15],[43,35,34,16],[44,4,35,4],[44,8,35,8,"yParityOrV"],[44,18,35,18],[44,23,35,23],[44,25,35,25],[44,27,36,8],[44,34,36,15],[44,35,36,16],[45,4,37,4],[45,10,37,10],[45,14,37,14,"Error"],[45,19,37,19],[45,20,37,20],[45,46,37,46],[45,47,37,47],[46,2,38,0],[47,0,38,1],[47,3]],"functionMap":{"names":["<global>","recoverPublicKey","Promise.resolve.then$argument_0","<anonymous>","toRecoveryBit"],"mappings":"AAA;ACO;uDCE,wCD;wBEC;KFa;CDK;AIC;CJQ"},"hasCjsExports":true},"type":"js/module"}]}