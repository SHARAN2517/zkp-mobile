{"dependencies":[{"name":"../../accounts/utils/parseAccount.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":26,"index":156},"end":{"line":4,"column":73,"index":203}}],"key":"8eNMvEo2xQsycDgJ0sJJRoltw8M=","exportNames":["*"],"imports":1}},{"name":"../../errors/account.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":21,"index":226},"end":{"line":5,"column":55,"index":260}}],"key":"+xwLqfAP75sQtRhcNsNjg3OmJnw=","exportNames":["*"],"imports":1}},{"name":"../../utils/address/isAddressEqual.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":28,"index":290},"end":{"line":6,"column":76,"index":338}}],"key":"wM5jO47f0I4dlqGrxr+yf5KVD40=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":23,"index":363},"end":{"line":7,"column":58,"index":398}}],"key":"d685V9n1u7O1oRJ2ZbnkuLpcslA=","exportNames":["*"],"imports":1}},{"name":"../public/getChainId.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":24,"index":424},"end":{"line":8,"column":58,"index":458}}],"key":"qXoP8PyRbYCdN2PNQIDsLoOjDXM=","exportNames":["*"],"imports":1}},{"name":"../public/getTransactionCount.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":33,"index":493},"end":{"line":9,"column":76,"index":536}}],"key":"u/owFLb83IgUT1Eh4eH7hf/b1Do=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.prepareAuthorization = prepareAuthorization;\n  const parseAccount_js_1 = require(_dependencyMap[0], \"../../accounts/utils/parseAccount.js\");\n  const account_js_1 = require(_dependencyMap[1], \"../../errors/account.js\");\n  const isAddressEqual_js_1 = require(_dependencyMap[2], \"../../utils/address/isAddressEqual.js\");\n  const getAction_js_1 = require(_dependencyMap[3], \"../../utils/getAction.js\");\n  const getChainId_js_1 = require(_dependencyMap[4], \"../public/getChainId.js\");\n  const getTransactionCount_js_1 = require(_dependencyMap[5], \"../public/getTransactionCount.js\");\n  async function prepareAuthorization(client, parameters) {\n    const {\n      account: account_ = client.account,\n      chainId,\n      nonce\n    } = parameters;\n    if (!account_) throw new account_js_1.AccountNotFoundError({\n      docsPath: '/docs/eip7702/prepareAuthorization'\n    });\n    const account = (0, parseAccount_js_1.parseAccount)(account_);\n    const executor = (() => {\n      if (!parameters.executor) return undefined;\n      if (parameters.executor === 'self') return parameters.executor;\n      return (0, parseAccount_js_1.parseAccount)(parameters.executor);\n    })();\n    const authorization = {\n      address: parameters.contractAddress ?? parameters.address,\n      chainId,\n      nonce\n    };\n    if (typeof authorization.chainId === 'undefined') authorization.chainId = client.chain?.id ?? (await (0, getAction_js_1.getAction)(client, getChainId_js_1.getChainId, 'getChainId')({}));\n    if (typeof authorization.nonce === 'undefined') {\n      authorization.nonce = await (0, getAction_js_1.getAction)(client, getTransactionCount_js_1.getTransactionCount, 'getTransactionCount')({\n        address: account.address,\n        blockTag: 'pending'\n      });\n      if (executor === 'self' || executor?.address && (0, isAddressEqual_js_1.isAddressEqual)(executor.address, account.address)) authorization.nonce += 1;\n    }\n    return authorization;\n  }\n});","lineCount":44,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"prepareAuthorization"],[7,30,3,28],[7,33,3,31,"prepareAuthorization"],[7,53,3,51],[8,2,4,0],[8,8,4,6,"parseAccount_js_1"],[8,25,4,23],[8,28,4,26,"require"],[8,35,4,33],[8,36,4,33,"_dependencyMap"],[8,50,4,33],[8,93,4,72],[8,94,4,73],[9,2,5,0],[9,8,5,6,"account_js_1"],[9,20,5,18],[9,23,5,21,"require"],[9,30,5,28],[9,31,5,28,"_dependencyMap"],[9,45,5,28],[9,75,5,54],[9,76,5,55],[10,2,6,0],[10,8,6,6,"isAddressEqual_js_1"],[10,27,6,25],[10,30,6,28,"require"],[10,37,6,35],[10,38,6,35,"_dependencyMap"],[10,52,6,35],[10,96,6,75],[10,97,6,76],[11,2,7,0],[11,8,7,6,"getAction_js_1"],[11,22,7,20],[11,25,7,23,"require"],[11,32,7,30],[11,33,7,30,"_dependencyMap"],[11,47,7,30],[11,78,7,57],[11,79,7,58],[12,2,8,0],[12,8,8,6,"getChainId_js_1"],[12,23,8,21],[12,26,8,24,"require"],[12,33,8,31],[12,34,8,31,"_dependencyMap"],[12,48,8,31],[12,78,8,57],[12,79,8,58],[13,2,9,0],[13,8,9,6,"getTransactionCount_js_1"],[13,32,9,30],[13,35,9,33,"require"],[13,42,9,40],[13,43,9,40,"_dependencyMap"],[13,57,9,40],[13,96,9,75],[13,97,9,76],[14,2,10,0],[14,17,10,15,"prepareAuthorization"],[14,37,10,35,"prepareAuthorization"],[14,38,10,36,"client"],[14,44,10,42],[14,46,10,44,"parameters"],[14,56,10,54],[14,58,10,56],[15,4,11,4],[15,10,11,10],[16,6,11,12,"account"],[16,13,11,19],[16,15,11,21,"account_"],[16,23,11,29],[16,26,11,32,"client"],[16,32,11,38],[16,33,11,39,"account"],[16,40,11,46],[17,6,11,48,"chainId"],[17,13,11,55],[18,6,11,57,"nonce"],[19,4,11,63],[19,5,11,64],[19,8,11,67,"parameters"],[19,18,11,77],[20,4,12,4],[20,8,12,8],[20,9,12,9,"account_"],[20,17,12,17],[20,19,13,8],[20,25,13,14],[20,29,13,18,"account_js_1"],[20,41,13,30],[20,42,13,31,"AccountNotFoundError"],[20,62,13,51],[20,63,13,52],[21,6,14,12,"docsPath"],[21,14,14,20],[21,16,14,22],[22,4,15,8],[22,5,15,9],[22,6,15,10],[23,4,16,4],[23,10,16,10,"account"],[23,17,16,17],[23,20,16,20],[23,21,16,21],[23,22,16,22],[23,24,16,24,"parseAccount_js_1"],[23,41,16,41],[23,42,16,42,"parseAccount"],[23,54,16,54],[23,56,16,56,"account_"],[23,64,16,64],[23,65,16,65],[24,4,17,4],[24,10,17,10,"executor"],[24,18,17,18],[24,21,17,21],[24,22,17,22],[24,28,17,28],[25,6,18,8],[25,10,18,12],[25,11,18,13,"parameters"],[25,21,18,23],[25,22,18,24,"executor"],[25,30,18,32],[25,32,19,12],[25,39,19,19,"undefined"],[25,48,19,28],[26,6,20,8],[26,10,20,12,"parameters"],[26,20,20,22],[26,21,20,23,"executor"],[26,29,20,31],[26,34,20,36],[26,40,20,42],[26,42,21,12],[26,49,21,19,"parameters"],[26,59,21,29],[26,60,21,30,"executor"],[26,68,21,38],[27,6,22,8],[27,13,22,15],[27,14,22,16],[27,15,22,17],[27,17,22,19,"parseAccount_js_1"],[27,34,22,36],[27,35,22,37,"parseAccount"],[27,47,22,49],[27,49,22,51,"parameters"],[27,59,22,61],[27,60,22,62,"executor"],[27,68,22,70],[27,69,22,71],[28,4,23,4],[28,5,23,5],[28,7,23,7],[28,8,23,8],[29,4,24,4],[29,10,24,10,"authorization"],[29,23,24,23],[29,26,24,26],[30,6,25,8,"address"],[30,13,25,15],[30,15,25,17,"parameters"],[30,25,25,27],[30,26,25,28,"contractAddress"],[30,41,25,43],[30,45,25,47,"parameters"],[30,55,25,57],[30,56,25,58,"address"],[30,63,25,65],[31,6,26,8,"chainId"],[31,13,26,15],[32,6,27,8,"nonce"],[33,4,28,4],[33,5,28,5],[34,4,29,4],[34,8,29,8],[34,15,29,15,"authorization"],[34,28,29,28],[34,29,29,29,"chainId"],[34,36,29,36],[34,41,29,41],[34,52,29,52],[34,54,30,8,"authorization"],[34,67,30,21],[34,68,30,22,"chainId"],[34,75,30,29],[34,78,31,12,"client"],[34,84,31,18],[34,85,31,19,"chain"],[34,90,31,24],[34,92,31,26,"id"],[34,94,31,28],[34,99,32,17],[34,105,32,23],[34,106,32,24],[34,107,32,25],[34,109,32,27,"getAction_js_1"],[34,123,32,41],[34,124,32,42,"getAction"],[34,133,32,51],[34,135,32,53,"client"],[34,141,32,59],[34,143,32,61,"getChainId_js_1"],[34,158,32,76],[34,159,32,77,"getChainId"],[34,169,32,87],[34,171,32,89],[34,183,32,101],[34,184,32,102],[34,185,32,103],[34,186,32,104],[34,187,32,105],[34,188,32,106],[34,189,32,107],[35,4,33,4],[35,8,33,8],[35,15,33,15,"authorization"],[35,28,33,28],[35,29,33,29,"nonce"],[35,34,33,34],[35,39,33,39],[35,50,33,50],[35,52,33,52],[36,6,34,8,"authorization"],[36,19,34,21],[36,20,34,22,"nonce"],[36,25,34,27],[36,28,34,30],[36,34,34,36],[36,35,34,37],[36,36,34,38],[36,38,34,40,"getAction_js_1"],[36,52,34,54],[36,53,34,55,"getAction"],[36,62,34,64],[36,64,34,66,"client"],[36,70,34,72],[36,72,34,74,"getTransactionCount_js_1"],[36,96,34,98],[36,97,34,99,"getTransactionCount"],[36,116,34,118],[36,118,34,120],[36,139,34,141],[36,140,34,142],[36,141,34,143],[37,8,35,12,"address"],[37,15,35,19],[37,17,35,21,"account"],[37,24,35,28],[37,25,35,29,"address"],[37,32,35,36],[38,8,36,12,"blockTag"],[38,16,36,20],[38,18,36,22],[39,6,37,8],[39,7,37,9],[39,8,37,10],[40,6,38,8],[40,10,38,12,"executor"],[40,18,38,20],[40,23,38,25],[40,29,38,31],[40,33,39,13,"executor"],[40,41,39,21],[40,43,39,23,"address"],[40,50,39,30],[40,54,39,34],[40,55,39,35],[40,56,39,36],[40,58,39,38,"isAddressEqual_js_1"],[40,77,39,57],[40,78,39,58,"isAddressEqual"],[40,92,39,72],[40,94,39,74,"executor"],[40,102,39,82],[40,103,39,83,"address"],[40,110,39,90],[40,112,39,92,"account"],[40,119,39,99],[40,120,39,100,"address"],[40,127,39,107],[40,128,39,109],[40,130,40,12,"authorization"],[40,143,40,25],[40,144,40,26,"nonce"],[40,149,40,31],[40,153,40,35],[40,154,40,36],[41,4,41,4],[42,4,42,4],[42,11,42,11,"authorization"],[42,24,42,24],[43,2,43,0],[44,0,43,1],[44,3]],"functionMap":{"names":["<global>","prepareAuthorization","<anonymous>"],"mappings":"AAA;ACS;sBCO;KDM;CDoB"},"hasCjsExports":true},"type":"js/module"}]}