{"dependencies":[{"name":"valtio","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":37,"index":37}}],"key":"QS/s3I3dpzUou32XrKY5Z5Z48Ms=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":38},"end":{"line":2,"column":33,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@web3modal/core-react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":72},"end":{"line":3,"column":175,"index":247}}],"key":"fXjuVrywn0pgc7wTbbjNAvAYWH8=","exportNames":["*"],"imports":1}},{"name":"../../hooks/useTimeout","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":248},"end":{"line":4,"column":48,"index":296}}],"key":"eV6qK+XvWlGShhzqpBugpdTPPFs=","exportNames":["*"],"imports":1}},{"name":"../../partials/w3m-otp-code","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":297},"end":{"line":5,"column":58,"index":355}}],"key":"0kKrVPmPNsLb9GHgirTFxslWxHU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.EmailVerifyOtpView = EmailVerifyOtpView;\n  var _valtio = require(_dependencyMap[0], \"valtio\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _web3modalCoreReactNative = require(_dependencyMap[2], \"@web3modal/core-react-native\");\n  var _hooksUseTimeout = require(_dependencyMap[3], \"../../hooks/useTimeout\");\n  var useTimeout = _interopDefault(_hooksUseTimeout);\n  var _partialsW3mOtpCode = require(_dependencyMap[4], \"../../partials/w3m-otp-code\");\n  function EmailVerifyOtpView() {\n    const {\n      timeLeft,\n      startTimer\n    } = (0, useTimeout.default)(0);\n    const {\n      data\n    } = (0, _valtio.useSnapshot)(_web3modalCoreReactNative.RouterController.state);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    const [error, setError] = (0, _react.useState)('');\n    const emailConnector = _web3modalCoreReactNative.ConnectorController.getEmailConnector();\n    const onOtpResend = async () => {\n      try {\n        if (!data?.email || !emailConnector) return;\n        setLoading(true);\n        const provider = emailConnector?.provider;\n        await provider.connectEmail({\n          email: data.email\n        });\n        _web3modalCoreReactNative.SnackController.showSuccess('Code resent');\n        startTimer(30);\n        setLoading(false);\n      } catch (e) {\n        const parsedError = _web3modalCoreReactNative.CoreHelperUtil.parseError(e);\n        _web3modalCoreReactNative.SnackController.showError(parsedError);\n        setLoading(false);\n      }\n    };\n    const onOtpSubmit = async otp => {\n      if (!emailConnector) return;\n      setLoading(true);\n      setError('');\n      try {\n        const provider = emailConnector?.provider;\n        await provider.connectOtp({\n          otp\n        });\n        _web3modalCoreReactNative.EventsController.sendEvent({\n          type: 'track',\n          event: 'EMAIL_VERIFICATION_CODE_PASS'\n        });\n        await _web3modalCoreReactNative.ConnectionController.connectExternal(emailConnector);\n        _web3modalCoreReactNative.ModalController.close();\n        _web3modalCoreReactNative.EventsController.sendEvent({\n          type: 'track',\n          event: 'CONNECT_SUCCESS',\n          properties: {\n            method: 'email',\n            name: emailConnector.name || 'Unknown'\n          }\n        });\n      } catch (e) {\n        _web3modalCoreReactNative.EventsController.sendEvent({\n          type: 'track',\n          event: 'EMAIL_VERIFICATION_CODE_FAIL'\n        });\n        const parsedError = _web3modalCoreReactNative.CoreHelperUtil.parseError(e);\n        if (parsedError?.includes('Invalid code')) {\n          setError('Invalid code. Try again.');\n        } else {\n          _web3modalCoreReactNative.SnackController.showError(parsedError);\n        }\n      }\n      setLoading(false);\n    };\n    return /*#__PURE__*/React.createElement(_partialsW3mOtpCode.OtpCodeView, {\n      loading: loading,\n      error: error,\n      timeLeft: timeLeft,\n      email: data?.email,\n      onRetry: onOtpResend,\n      onSubmit: onOtpSubmit\n    });\n  }\n});","lineCount":93,"map":[[12,2,6,0,"exports"],[12,9,6,0],[12,10,6,0,"EmailVerifyOtpView"],[12,28,6,0],[12,31,6,0,"EmailVerifyOtpView"],[12,49,6,0],[13,2,1,0],[13,6,1,0,"_valtio"],[13,13,1,0],[13,16,1,0,"require"],[13,23,1,0],[13,24,1,0,"_dependencyMap"],[13,38,1,0],[14,2,2,0],[14,6,2,0,"_react"],[14,12,2,0],[14,15,2,0,"require"],[14,22,2,0],[14,23,2,0,"_dependencyMap"],[14,37,2,0],[15,2,3,0],[15,6,3,0,"_web3modalCoreReactNative"],[15,31,3,0],[15,34,3,0,"require"],[15,41,3,0],[15,42,3,0,"_dependencyMap"],[15,56,3,0],[16,2,4,0],[16,6,4,0,"_hooksUseTimeout"],[16,22,4,0],[16,25,4,0,"require"],[16,32,4,0],[16,33,4,0,"_dependencyMap"],[16,47,4,0],[17,2,4,0],[17,6,4,0,"useTimeout"],[17,16,4,0],[17,19,4,0,"_interopDefault"],[17,34,4,0],[17,35,4,0,"_hooksUseTimeout"],[17,51,4,0],[18,2,5,0],[18,6,5,0,"_partialsW3mOtpCode"],[18,25,5,0],[18,28,5,0,"require"],[18,35,5,0],[18,36,5,0,"_dependencyMap"],[18,50,5,0],[19,2,6,7],[19,11,6,16,"EmailVerifyOtpView"],[19,29,6,34,"EmailVerifyOtpView"],[19,30,6,34],[19,32,6,37],[20,4,7,2],[20,10,7,8],[21,6,8,4,"timeLeft"],[21,14,8,12],[22,6,9,4,"startTimer"],[23,4,10,2],[23,5,10,3],[23,8,10,6],[23,12,10,6,"useTimeout"],[23,22,10,16],[23,23,10,16,"default"],[23,30,10,16],[23,32,10,17],[23,33,10,18],[23,34,10,19],[24,4,11,2],[24,10,11,8],[25,6,12,4,"data"],[26,4,13,2],[26,5,13,3],[26,8,13,6],[26,12,13,6,"useSnapshot"],[26,19,13,17],[26,20,13,17,"useSnapshot"],[26,31,13,17],[26,33,13,18,"RouterController"],[26,58,13,34],[26,59,13,34,"RouterController"],[26,75,13,34],[26,76,13,35,"state"],[26,81,13,40],[26,82,13,41],[27,4,14,2],[27,10,14,8],[27,11,14,9,"loading"],[27,18,14,16],[27,20,14,18,"setLoading"],[27,30,14,28],[27,31,14,29],[27,34,14,32],[27,38,14,32,"useState"],[27,44,14,40],[27,45,14,40,"useState"],[27,53,14,40],[27,55,14,41],[27,60,14,46],[27,61,14,47],[28,4,15,2],[28,10,15,8],[28,11,15,9,"error"],[28,16,15,14],[28,18,15,16,"setError"],[28,26,15,24],[28,27,15,25],[28,30,15,28],[28,34,15,28,"useState"],[28,40,15,36],[28,41,15,36,"useState"],[28,49,15,36],[28,51,15,37],[28,53,15,39],[28,54,15,40],[29,4,16,2],[29,10,16,8,"emailConnector"],[29,24,16,22],[29,27,16,25,"ConnectorController"],[29,52,16,44],[29,53,16,44,"ConnectorController"],[29,72,16,44],[29,73,16,45,"getEmailConnector"],[29,90,16,62],[29,91,16,63],[29,92,16,64],[30,4,17,2],[30,10,17,8,"onOtpResend"],[30,21,17,19],[30,24,17,22],[30,30,17,22,"onOtpResend"],[30,31,17,22],[30,36,17,34],[31,6,18,4],[31,10,18,8],[32,8,19,6],[32,12,19,10],[32,13,19,11,"data"],[32,17,19,15],[32,19,19,17,"email"],[32,24,19,22],[32,28,19,26],[32,29,19,27,"emailConnector"],[32,43,19,41],[32,45,19,43],[33,8,20,6,"setLoading"],[33,18,20,16],[33,19,20,17],[33,23,20,21],[33,24,20,22],[34,8,21,6],[34,14,21,12,"provider"],[34,22,21,20],[34,25,21,23,"emailConnector"],[34,39,21,37],[34,41,21,39,"provider"],[34,49,21,47],[35,8,22,6],[35,14,22,12,"provider"],[35,22,22,20],[35,23,22,21,"connectEmail"],[35,35,22,33],[35,36,22,34],[36,10,23,8,"email"],[36,15,23,13],[36,17,23,15,"data"],[36,21,23,19],[36,22,23,20,"email"],[37,8,24,6],[37,9,24,7],[37,10,24,8],[38,8,25,6,"SnackController"],[38,33,25,21],[38,34,25,21,"SnackController"],[38,49,25,21],[38,50,25,22,"showSuccess"],[38,61,25,33],[38,62,25,34],[38,75,25,47],[38,76,25,48],[39,8,26,6,"startTimer"],[39,18,26,16],[39,19,26,17],[39,21,26,19],[39,22,26,20],[40,8,27,6,"setLoading"],[40,18,27,16],[40,19,27,17],[40,24,27,22],[40,25,27,23],[41,6,28,4],[41,7,28,5],[41,8,28,6],[41,15,28,13,"e"],[41,16,28,14],[41,18,28,16],[42,8,29,6],[42,14,29,12,"parsedError"],[42,25,29,23],[42,28,29,26,"CoreHelperUtil"],[42,53,29,40],[42,54,29,40,"CoreHelperUtil"],[42,68,29,40],[42,69,29,41,"parseError"],[42,79,29,51],[42,80,29,52,"e"],[42,81,29,53],[42,82,29,54],[43,8,30,6,"SnackController"],[43,33,30,21],[43,34,30,21,"SnackController"],[43,49,30,21],[43,50,30,22,"showError"],[43,59,30,31],[43,60,30,32,"parsedError"],[43,71,30,43],[43,72,30,44],[44,8,31,6,"setLoading"],[44,18,31,16],[44,19,31,17],[44,24,31,22],[44,25,31,23],[45,6,32,4],[46,4,33,2],[46,5,33,3],[47,4,34,2],[47,10,34,8,"onOtpSubmit"],[47,21,34,19],[47,24,34,22],[47,30,34,28,"otp"],[47,33,34,31],[47,37,34,35],[48,6,35,4],[48,10,35,8],[48,11,35,9,"emailConnector"],[48,25,35,23],[48,27,35,25],[49,6,36,4,"setLoading"],[49,16,36,14],[49,17,36,15],[49,21,36,19],[49,22,36,20],[50,6,37,4,"setError"],[50,14,37,12],[50,15,37,13],[50,17,37,15],[50,18,37,16],[51,6,38,4],[51,10,38,8],[52,8,39,6],[52,14,39,12,"provider"],[52,22,39,20],[52,25,39,23,"emailConnector"],[52,39,39,37],[52,41,39,39,"provider"],[52,49,39,47],[53,8,40,6],[53,14,40,12,"provider"],[53,22,40,20],[53,23,40,21,"connectOtp"],[53,33,40,31],[53,34,40,32],[54,10,41,8,"otp"],[55,8,42,6],[55,9,42,7],[55,10,42,8],[56,8,43,6,"EventsController"],[56,33,43,22],[56,34,43,22,"EventsController"],[56,50,43,22],[56,51,43,23,"sendEvent"],[56,60,43,32],[56,61,43,33],[57,10,44,8,"type"],[57,14,44,12],[57,16,44,14],[57,23,44,21],[58,10,45,8,"event"],[58,15,45,13],[58,17,45,15],[59,8,46,6],[59,9,46,7],[59,10,46,8],[60,8,47,6],[60,14,47,12,"ConnectionController"],[60,39,47,32],[60,40,47,32,"ConnectionController"],[60,60,47,32],[60,61,47,33,"connectExternal"],[60,76,47,48],[60,77,47,49,"emailConnector"],[60,91,47,63],[60,92,47,64],[61,8,48,6,"ModalController"],[61,33,48,21],[61,34,48,21,"ModalController"],[61,49,48,21],[61,50,48,22,"close"],[61,55,48,27],[61,56,48,28],[61,57,48,29],[62,8,49,6,"EventsController"],[62,33,49,22],[62,34,49,22,"EventsController"],[62,50,49,22],[62,51,49,23,"sendEvent"],[62,60,49,32],[62,61,49,33],[63,10,50,8,"type"],[63,14,50,12],[63,16,50,14],[63,23,50,21],[64,10,51,8,"event"],[64,15,51,13],[64,17,51,15],[64,34,51,32],[65,10,52,8,"properties"],[65,20,52,18],[65,22,52,20],[66,12,53,10,"method"],[66,18,53,16],[66,20,53,18],[66,27,53,25],[67,12,54,10,"name"],[67,16,54,14],[67,18,54,16,"emailConnector"],[67,32,54,30],[67,33,54,31,"name"],[67,37,54,35],[67,41,54,39],[68,10,55,8],[69,8,56,6],[69,9,56,7],[69,10,56,8],[70,6,57,4],[70,7,57,5],[70,8,57,6],[70,15,57,13,"e"],[70,16,57,14],[70,18,57,16],[71,8,58,6,"EventsController"],[71,33,58,22],[71,34,58,22,"EventsController"],[71,50,58,22],[71,51,58,23,"sendEvent"],[71,60,58,32],[71,61,58,33],[72,10,59,8,"type"],[72,14,59,12],[72,16,59,14],[72,23,59,21],[73,10,60,8,"event"],[73,15,60,13],[73,17,60,15],[74,8,61,6],[74,9,61,7],[74,10,61,8],[75,8,62,6],[75,14,62,12,"parsedError"],[75,25,62,23],[75,28,62,26,"CoreHelperUtil"],[75,53,62,40],[75,54,62,40,"CoreHelperUtil"],[75,68,62,40],[75,69,62,41,"parseError"],[75,79,62,51],[75,80,62,52,"e"],[75,81,62,53],[75,82,62,54],[76,8,63,6],[76,12,63,10,"parsedError"],[76,23,63,21],[76,25,63,23,"includes"],[76,33,63,31],[76,34,63,32],[76,48,63,46],[76,49,63,47],[76,51,63,49],[77,10,64,8,"setError"],[77,18,64,16],[77,19,64,17],[77,45,64,43],[77,46,64,44],[78,8,65,6],[78,9,65,7],[78,15,65,13],[79,10,66,8,"SnackController"],[79,35,66,23],[79,36,66,23,"SnackController"],[79,51,66,23],[79,52,66,24,"showError"],[79,61,66,33],[79,62,66,34,"parsedError"],[79,73,66,45],[79,74,66,46],[80,8,67,6],[81,6,68,4],[82,6,69,4,"setLoading"],[82,16,69,14],[82,17,69,15],[82,22,69,20],[82,23,69,21],[83,4,70,2],[83,5,70,3],[84,4,71,2],[84,11,71,9],[84,24,71,22,"React"],[84,29,71,27],[84,30,71,28,"createElement"],[84,43,71,41],[84,44,71,42,"OtpCodeView"],[84,63,71,53],[84,64,71,53,"OtpCodeView"],[84,75,71,53],[84,77,71,55],[85,6,72,4,"loading"],[85,13,72,11],[85,15,72,13,"loading"],[85,22,72,20],[86,6,73,4,"error"],[86,11,73,9],[86,13,73,11,"error"],[86,18,73,16],[87,6,74,4,"timeLeft"],[87,14,74,12],[87,16,74,14,"timeLeft"],[87,24,74,22],[88,6,75,4,"email"],[88,11,75,9],[88,13,75,11,"data"],[88,17,75,15],[88,19,75,17,"email"],[88,24,75,22],[89,6,76,4,"onRetry"],[89,13,76,11],[89,15,76,13,"onOtpResend"],[89,26,76,24],[90,6,77,4,"onSubmit"],[90,14,77,12],[90,16,77,14,"onOtpSubmit"],[91,4,78,2],[91,5,78,3],[91,6,78,4],[92,2,79,0],[93,0,79,1],[93,3]],"functionMap":{"names":["<global>","EmailVerifyOtpView","onOtpResend","onOtpSubmit"],"mappings":"AAA;OCK;sBCW;GDgB;sBEC;GFoC;CDS"},"hasCjsExports":false},"type":"js/module"}]}