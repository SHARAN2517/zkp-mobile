{"dependencies":[{"name":"valtio/utils","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":13,"index":132},"end":{"line":7,"column":36,"index":155}}],"key":"UF/hW+sa1QMIFbnBKozUuPsWx7E=","exportNames":["*"],"imports":1}},{"name":"valtio","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":14,"index":171},"end":{"line":8,"column":31,"index":188}}],"key":"6p/dfTbbcZw2+DkbKokTtc8rxfY=","exportNames":["*"],"imports":1}},{"name":"../utils/CoreHelperUtil","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":22,"index":212},"end":{"line":9,"column":56,"index":246}}],"key":"tdKvJL7nE1dTGP0adg6hW1Ggq6k=","exportNames":["*"],"imports":1}},{"name":"../utils/StorageUtil","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":19,"index":267},"end":{"line":10,"column":50,"index":298}}],"key":"dlH9yrn8Xuf8r9Ms7ycnjn4D4vc=","exportNames":["*"],"imports":1}},{"name":"./RouterController","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":24,"index":324},"end":{"line":11,"column":53,"index":353}}],"key":"mDWSh5UYVQxZTWjOuiDqIqtCASs=","exportNames":["*"],"imports":1}},{"name":"./ConnectorController","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":27,"index":382},"end":{"line":12,"column":59,"index":414}}],"key":"4mO8YCaaY9YCwEQ6UPte0r60inU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.ConnectionController = void 0;\n  var _utils = require(_dependencyMap[0], \"valtio/utils\");\n  var _valtio = require(_dependencyMap[1], \"valtio\");\n  var _CoreHelperUtil = require(_dependencyMap[2], \"../utils/CoreHelperUtil\");\n  var _StorageUtil = require(_dependencyMap[3], \"../utils/StorageUtil\");\n  var _RouterController = require(_dependencyMap[4], \"./RouterController\");\n  var _ConnectorController = require(_dependencyMap[5], \"./ConnectorController\");\n  // -- Types --------------------------------------------- //\n\n  // -- State --------------------------------------------- //\n  const state = (0, _valtio.proxy)({\n    wcError: false\n  });\n\n  // -- Controller ---------------------------------------- //\n  const ConnectionController = exports.ConnectionController = {\n    state,\n    subscribeKey(key, callback) {\n      return (0, _utils.subscribeKey)(state, key, callback);\n    },\n    _getClient() {\n      if (!state._client) {\n        throw new Error('ConnectionController client not set');\n      }\n      return state._client;\n    },\n    setClient(client) {\n      state._client = (0, _valtio.ref)(client);\n    },\n    connectWalletConnect() {\n      state.wcPromise = this._getClient().connectWalletConnect(uri => {\n        state.wcUri = uri;\n        state.wcPairingExpiry = _CoreHelperUtil.CoreHelperUtil.getPairingExpiry();\n        _ConnectorController.ConnectorController.setConnectedConnector('WALLET_CONNECT');\n        _StorageUtil.StorageUtil.setConnectedConnector('WALLET_CONNECT');\n      });\n    },\n    async connectExternal(options) {\n      await this._getClient().connectExternal?.(options);\n      _ConnectorController.ConnectorController.setConnectedConnector(options.type);\n      _StorageUtil.StorageUtil.setConnectedConnector(options.type);\n    },\n    async signMessage(message) {\n      return this._getClient().signMessage(message);\n    },\n    setWcLinking(wcLinking) {\n      state.wcLinking = wcLinking;\n    },\n    removeWcLinking() {\n      state.wcLinking = undefined;\n    },\n    setWcError(wcError) {\n      state.wcError = wcError;\n    },\n    setPressedWallet(wallet) {\n      state.pressedWallet = wallet;\n    },\n    removePressedWallet() {\n      state.pressedWallet = undefined;\n    },\n    setRecentWallets(wallets) {\n      state.recentWallets = wallets;\n    },\n    async setConnectedWalletImageUrl(url) {\n      state.connectedWalletImageUrl = url;\n      if (url) {\n        await _StorageUtil.StorageUtil.setConnectedWalletImageUrl(url);\n      } else {\n        _StorageUtil.StorageUtil.removeConnectedWalletImageUrl();\n      }\n    },\n    clearUri() {\n      state.wcUri = undefined;\n      state.wcPairingExpiry = undefined;\n      state.wcPromise = undefined;\n      state.wcLinking = undefined;\n    },\n    resetWcConnection() {\n      this.clearUri();\n      state.pressedWallet = undefined;\n      state.connectedWalletImageUrl = undefined;\n      _ConnectorController.ConnectorController.setConnectedConnector(undefined);\n      _StorageUtil.StorageUtil.removeWalletConnectDeepLink();\n      _StorageUtil.StorageUtil.removeConnectedWalletImageUrl();\n      _StorageUtil.StorageUtil.removeConnectedConnector();\n    },\n    async disconnect() {\n      await this._getClient().disconnect();\n      this.resetWcConnection();\n      _RouterController.RouterController.reset('Connect');\n    }\n  };\n});","lineCount":99,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"ConnectionController"],[7,30,6,28],[7,33,6,31],[7,38,6,36],[7,39,6,37],[8,2,7,0],[8,6,7,4,"_utils"],[8,12,7,10],[8,15,7,13,"require"],[8,22,7,20],[8,23,7,20,"_dependencyMap"],[8,37,7,20],[8,56,7,35],[8,57,7,36],[9,2,8,0],[9,6,8,4,"_valtio"],[9,13,8,11],[9,16,8,14,"require"],[9,23,8,21],[9,24,8,21,"_dependencyMap"],[9,38,8,21],[9,51,8,30],[9,52,8,31],[10,2,9,0],[10,6,9,4,"_CoreHelperUtil"],[10,21,9,19],[10,24,9,22,"require"],[10,31,9,29],[10,32,9,29,"_dependencyMap"],[10,46,9,29],[10,76,9,55],[10,77,9,56],[11,2,10,0],[11,6,10,4,"_StorageUtil"],[11,18,10,16],[11,21,10,19,"require"],[11,28,10,26],[11,29,10,26,"_dependencyMap"],[11,43,10,26],[11,70,10,49],[11,71,10,50],[12,2,11,0],[12,6,11,4,"_RouterController"],[12,23,11,21],[12,26,11,24,"require"],[12,33,11,31],[12,34,11,31,"_dependencyMap"],[12,48,11,31],[12,73,11,52],[12,74,11,53],[13,2,12,0],[13,6,12,4,"_ConnectorController"],[13,26,12,24],[13,29,12,27,"require"],[13,36,12,34],[13,37,12,34,"_dependencyMap"],[13,51,12,34],[13,79,12,58],[13,80,12,59],[14,2,13,0],[16,2,15,0],[17,2,16,0],[17,8,16,6,"state"],[17,13,16,11],[17,16,16,14],[17,17,16,15],[17,18,16,16],[17,20,16,18,"_valtio"],[17,27,16,25],[17,28,16,26,"proxy"],[17,33,16,31],[17,35,16,33],[18,4,17,2,"wcError"],[18,11,17,9],[18,13,17,11],[19,2,18,0],[19,3,18,1],[19,4,18,2],[21,2,20,0],[22,2,21,0],[22,8,21,6,"ConnectionController"],[22,28,21,26],[22,31,21,29,"exports"],[22,38,21,36],[22,39,21,37,"ConnectionController"],[22,59,21,57],[22,62,21,60],[23,4,22,2,"state"],[23,9,22,7],[24,4,23,2,"subscribeKey"],[24,16,23,14,"subscribeKey"],[24,17,23,15,"key"],[24,20,23,18],[24,22,23,20,"callback"],[24,30,23,28],[24,32,23,30],[25,6,24,4],[25,13,24,11],[25,14,24,12],[25,15,24,13],[25,17,24,15,"_utils"],[25,23,24,21],[25,24,24,22,"subscribeKey"],[25,36,24,34],[25,38,24,36,"state"],[25,43,24,41],[25,45,24,43,"key"],[25,48,24,46],[25,50,24,48,"callback"],[25,58,24,56],[25,59,24,57],[26,4,25,2],[26,5,25,3],[27,4,26,2,"_getClient"],[27,14,26,12,"_getClient"],[27,15,26,12],[27,17,26,15],[28,6,27,4],[28,10,27,8],[28,11,27,9,"state"],[28,16,27,14],[28,17,27,15,"_client"],[28,24,27,22],[28,26,27,24],[29,8,28,6],[29,14,28,12],[29,18,28,16,"Error"],[29,23,28,21],[29,24,28,22],[29,61,28,59],[29,62,28,60],[30,6,29,4],[31,6,30,4],[31,13,30,11,"state"],[31,18,30,16],[31,19,30,17,"_client"],[31,26,30,24],[32,4,31,2],[32,5,31,3],[33,4,32,2,"setClient"],[33,13,32,11,"setClient"],[33,14,32,12,"client"],[33,20,32,18],[33,22,32,20],[34,6,33,4,"state"],[34,11,33,9],[34,12,33,10,"_client"],[34,19,33,17],[34,22,33,20],[34,23,33,21],[34,24,33,22],[34,26,33,24,"_valtio"],[34,33,33,31],[34,34,33,32,"ref"],[34,37,33,35],[34,39,33,37,"client"],[34,45,33,43],[34,46,33,44],[35,4,34,2],[35,5,34,3],[36,4,35,2,"connectWalletConnect"],[36,24,35,22,"connectWalletConnect"],[36,25,35,22],[36,27,35,25],[37,6,36,4,"state"],[37,11,36,9],[37,12,36,10,"wcPromise"],[37,21,36,19],[37,24,36,22],[37,28,36,26],[37,29,36,27,"_getClient"],[37,39,36,37],[37,40,36,38],[37,41,36,39],[37,42,36,40,"connectWalletConnect"],[37,62,36,60],[37,63,36,61,"uri"],[37,66,36,64],[37,70,36,68],[38,8,37,6,"state"],[38,13,37,11],[38,14,37,12,"wcUri"],[38,19,37,17],[38,22,37,20,"uri"],[38,25,37,23],[39,8,38,6,"state"],[39,13,38,11],[39,14,38,12,"wcPairingExpiry"],[39,29,38,27],[39,32,38,30,"_CoreHelperUtil"],[39,47,38,45],[39,48,38,46,"CoreHelperUtil"],[39,62,38,60],[39,63,38,61,"getPairingExpiry"],[39,79,38,77],[39,80,38,78],[39,81,38,79],[40,8,39,6,"_ConnectorController"],[40,28,39,26],[40,29,39,27,"ConnectorController"],[40,48,39,46],[40,49,39,47,"setConnectedConnector"],[40,70,39,68],[40,71,39,69],[40,87,39,85],[40,88,39,86],[41,8,40,6,"_StorageUtil"],[41,20,40,18],[41,21,40,19,"StorageUtil"],[41,32,40,30],[41,33,40,31,"setConnectedConnector"],[41,54,40,52],[41,55,40,53],[41,71,40,69],[41,72,40,70],[42,6,41,4],[42,7,41,5],[42,8,41,6],[43,4,42,2],[43,5,42,3],[44,4,43,2],[44,10,43,8,"connectExternal"],[44,25,43,23,"connectExternal"],[44,26,43,24,"options"],[44,33,43,31],[44,35,43,33],[45,6,44,4],[45,12,44,10],[45,16,44,14],[45,17,44,15,"_getClient"],[45,27,44,25],[45,28,44,26],[45,29,44,27],[45,30,44,28,"connectExternal"],[45,45,44,43],[45,48,44,46,"options"],[45,55,44,53],[45,56,44,54],[46,6,45,4,"_ConnectorController"],[46,26,45,24],[46,27,45,25,"ConnectorController"],[46,46,45,44],[46,47,45,45,"setConnectedConnector"],[46,68,45,66],[46,69,45,67,"options"],[46,76,45,74],[46,77,45,75,"type"],[46,81,45,79],[46,82,45,80],[47,6,46,4,"_StorageUtil"],[47,18,46,16],[47,19,46,17,"StorageUtil"],[47,30,46,28],[47,31,46,29,"setConnectedConnector"],[47,52,46,50],[47,53,46,51,"options"],[47,60,46,58],[47,61,46,59,"type"],[47,65,46,63],[47,66,46,64],[48,4,47,2],[48,5,47,3],[49,4,48,2],[49,10,48,8,"signMessage"],[49,21,48,19,"signMessage"],[49,22,48,20,"message"],[49,29,48,27],[49,31,48,29],[50,6,49,4],[50,13,49,11],[50,17,49,15],[50,18,49,16,"_getClient"],[50,28,49,26],[50,29,49,27],[50,30,49,28],[50,31,49,29,"signMessage"],[50,42,49,40],[50,43,49,41,"message"],[50,50,49,48],[50,51,49,49],[51,4,50,2],[51,5,50,3],[52,4,51,2,"setWcLinking"],[52,16,51,14,"setWcLinking"],[52,17,51,15,"wcLinking"],[52,26,51,24],[52,28,51,26],[53,6,52,4,"state"],[53,11,52,9],[53,12,52,10,"wcLinking"],[53,21,52,19],[53,24,52,22,"wcLinking"],[53,33,52,31],[54,4,53,2],[54,5,53,3],[55,4,54,2,"removeWcLinking"],[55,19,54,17,"removeWcLinking"],[55,20,54,17],[55,22,54,20],[56,6,55,4,"state"],[56,11,55,9],[56,12,55,10,"wcLinking"],[56,21,55,19],[56,24,55,22,"undefined"],[56,33,55,31],[57,4,56,2],[57,5,56,3],[58,4,57,2,"setWcError"],[58,14,57,12,"setWcError"],[58,15,57,13,"wcError"],[58,22,57,20],[58,24,57,22],[59,6,58,4,"state"],[59,11,58,9],[59,12,58,10,"wcError"],[59,19,58,17],[59,22,58,20,"wcError"],[59,29,58,27],[60,4,59,2],[60,5,59,3],[61,4,60,2,"setPressedWallet"],[61,20,60,18,"setPressedWallet"],[61,21,60,19,"wallet"],[61,27,60,25],[61,29,60,27],[62,6,61,4,"state"],[62,11,61,9],[62,12,61,10,"pressedWallet"],[62,25,61,23],[62,28,61,26,"wallet"],[62,34,61,32],[63,4,62,2],[63,5,62,3],[64,4,63,2,"removePressedWallet"],[64,23,63,21,"removePressedWallet"],[64,24,63,21],[64,26,63,24],[65,6,64,4,"state"],[65,11,64,9],[65,12,64,10,"pressedWallet"],[65,25,64,23],[65,28,64,26,"undefined"],[65,37,64,35],[66,4,65,2],[66,5,65,3],[67,4,66,2,"setRecentWallets"],[67,20,66,18,"setRecentWallets"],[67,21,66,19,"wallets"],[67,28,66,26],[67,30,66,28],[68,6,67,4,"state"],[68,11,67,9],[68,12,67,10,"recentWallets"],[68,25,67,23],[68,28,67,26,"wallets"],[68,35,67,33],[69,4,68,2],[69,5,68,3],[70,4,69,2],[70,10,69,8,"setConnectedWalletImageUrl"],[70,36,69,34,"setConnectedWalletImageUrl"],[70,37,69,35,"url"],[70,40,69,38],[70,42,69,40],[71,6,70,4,"state"],[71,11,70,9],[71,12,70,10,"connectedWalletImageUrl"],[71,35,70,33],[71,38,70,36,"url"],[71,41,70,39],[72,6,71,4],[72,10,71,8,"url"],[72,13,71,11],[72,15,71,13],[73,8,72,6],[73,14,72,12,"_StorageUtil"],[73,26,72,24],[73,27,72,25,"StorageUtil"],[73,38,72,36],[73,39,72,37,"setConnectedWalletImageUrl"],[73,65,72,63],[73,66,72,64,"url"],[73,69,72,67],[73,70,72,68],[74,6,73,4],[74,7,73,5],[74,13,73,11],[75,8,74,6,"_StorageUtil"],[75,20,74,18],[75,21,74,19,"StorageUtil"],[75,32,74,30],[75,33,74,31,"removeConnectedWalletImageUrl"],[75,62,74,60],[75,63,74,61],[75,64,74,62],[76,6,75,4],[77,4,76,2],[77,5,76,3],[78,4,77,2,"clearUri"],[78,12,77,10,"clearUri"],[78,13,77,10],[78,15,77,13],[79,6,78,4,"state"],[79,11,78,9],[79,12,78,10,"wcUri"],[79,17,78,15],[79,20,78,18,"undefined"],[79,29,78,27],[80,6,79,4,"state"],[80,11,79,9],[80,12,79,10,"wcPairingExpiry"],[80,27,79,25],[80,30,79,28,"undefined"],[80,39,79,37],[81,6,80,4,"state"],[81,11,80,9],[81,12,80,10,"wcPromise"],[81,21,80,19],[81,24,80,22,"undefined"],[81,33,80,31],[82,6,81,4,"state"],[82,11,81,9],[82,12,81,10,"wcLinking"],[82,21,81,19],[82,24,81,22,"undefined"],[82,33,81,31],[83,4,82,2],[83,5,82,3],[84,4,83,2,"resetWcConnection"],[84,21,83,19,"resetWcConnection"],[84,22,83,19],[84,24,83,22],[85,6,84,4],[85,10,84,8],[85,11,84,9,"clearUri"],[85,19,84,17],[85,20,84,18],[85,21,84,19],[86,6,85,4,"state"],[86,11,85,9],[86,12,85,10,"pressedWallet"],[86,25,85,23],[86,28,85,26,"undefined"],[86,37,85,35],[87,6,86,4,"state"],[87,11,86,9],[87,12,86,10,"connectedWalletImageUrl"],[87,35,86,33],[87,38,86,36,"undefined"],[87,47,86,45],[88,6,87,4,"_ConnectorController"],[88,26,87,24],[88,27,87,25,"ConnectorController"],[88,46,87,44],[88,47,87,45,"setConnectedConnector"],[88,68,87,66],[88,69,87,67,"undefined"],[88,78,87,76],[88,79,87,77],[89,6,88,4,"_StorageUtil"],[89,18,88,16],[89,19,88,17,"StorageUtil"],[89,30,88,28],[89,31,88,29,"removeWalletConnectDeepLink"],[89,58,88,56],[89,59,88,57],[89,60,88,58],[90,6,89,4,"_StorageUtil"],[90,18,89,16],[90,19,89,17,"StorageUtil"],[90,30,89,28],[90,31,89,29,"removeConnectedWalletImageUrl"],[90,60,89,58],[90,61,89,59],[90,62,89,60],[91,6,90,4,"_StorageUtil"],[91,18,90,16],[91,19,90,17,"StorageUtil"],[91,30,90,28],[91,31,90,29,"removeConnectedConnector"],[91,55,90,53],[91,56,90,54],[91,57,90,55],[92,4,91,2],[92,5,91,3],[93,4,92,2],[93,10,92,8,"disconnect"],[93,20,92,18,"disconnect"],[93,21,92,18],[93,23,92,21],[94,6,93,4],[94,12,93,10],[94,16,93,14],[94,17,93,15,"_getClient"],[94,27,93,25],[94,28,93,26],[94,29,93,27],[94,30,93,28,"disconnect"],[94,40,93,38],[94,41,93,39],[94,42,93,40],[95,6,94,4],[95,10,94,8],[95,11,94,9,"resetWcConnection"],[95,28,94,26],[95,29,94,27],[95,30,94,28],[96,6,95,4,"_RouterController"],[96,23,95,21],[96,24,95,22,"RouterController"],[96,40,95,38],[96,41,95,39,"reset"],[96,46,95,44],[96,47,95,45],[96,56,95,54],[96,57,95,55],[97,4,96,2],[98,2,97,0],[98,3,97,1],[99,0,97,2],[99,3]],"functionMap":{"names":["<global>","exports.ConnectionController.subscribeKey","exports.ConnectionController._getClient","exports.ConnectionController.setClient","exports.ConnectionController.connectWalletConnect","_getClient.connectWalletConnect$argument_0","exports.ConnectionController.connectExternal","exports.ConnectionController.signMessage","exports.ConnectionController.setWcLinking","exports.ConnectionController.removeWcLinking","exports.ConnectionController.setWcError","exports.ConnectionController.setPressedWallet","exports.ConnectionController.removePressedWallet","exports.ConnectionController.setRecentWallets","exports.ConnectionController.setConnectedWalletImageUrl","exports.ConnectionController.clearUri","exports.ConnectionController.resetWcConnection","exports.ConnectionController.disconnect"],"mappings":"AAA;ECsB;GDE;EEC;GFK;EGC;GHE;EIC;6DCC;KDK;GJC;EMC;GNI;EOC;GPE;EQC;GRE;ESC;GTE;EUC;GVE;EWC;GXE;EYC;GZE;EaC;GbE;EcC;GdO;EeC;GfK;EgBC;GhBQ;EiBC;GjBI"},"hasCjsExports":true},"type":"js/module"}]}