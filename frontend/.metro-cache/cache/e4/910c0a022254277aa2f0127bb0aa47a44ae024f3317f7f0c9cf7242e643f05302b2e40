{"dependencies":[{"name":"valtio","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":14,"index":143},"end":{"line":7,"column":31,"index":160}}],"key":"6p/dfTbbcZw2+DkbKokTtc8rxfY=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":13,"index":175},"end":{"line":8,"column":29,"index":191}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY=","exportNames":["*"],"imports":1}},{"name":"@web3modal/core-react-native","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":23,"index":216},"end":{"line":9,"column":62,"index":255}}],"key":"AnZmQQ6c3AQMMXewVtboGnDXB6g=","exportNames":["*"],"imports":1}},{"name":"../../hooks/useTimeout","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":41,"index":298},"end":{"line":10,"column":74,"index":331}}],"key":"W7r2WkAA/Y8BiRKgVKan4lKB1u4=","exportNames":["*"],"imports":1}},{"name":"../../partials/w3m-otp-code","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":18,"index":352},"end":{"line":11,"column":56,"index":390}}],"key":"uPcIwZizowmkPvxfU+5YUoMmpqk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.EmailVerifyOtpView = EmailVerifyOtpView;\n  var _valtio = require(_dependencyMap[0], \"valtio\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _coreReactNative = require(_dependencyMap[2], \"@web3modal/core-react-native\");\n  var _useTimeout = _interopRequireDefault(require(_dependencyMap[3], \"../../hooks/useTimeout\"));\n  var _w3mOtpCode = require(_dependencyMap[4], \"../../partials/w3m-otp-code\");\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n  function EmailVerifyOtpView() {\n    const {\n      timeLeft,\n      startTimer\n    } = (0, _useTimeout.default)(0);\n    const {\n      data\n    } = (0, _valtio.useSnapshot)(_coreReactNative.RouterController.state);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    const [error, setError] = (0, _react.useState)('');\n    const emailConnector = _coreReactNative.ConnectorController.getEmailConnector();\n    const onOtpResend = async () => {\n      try {\n        if (!data?.email || !emailConnector) return;\n        setLoading(true);\n        const provider = emailConnector?.provider;\n        await provider.connectEmail({\n          email: data.email\n        });\n        _coreReactNative.SnackController.showSuccess('Code resent');\n        startTimer(30);\n        setLoading(false);\n      } catch (e) {\n        const parsedError = _coreReactNative.CoreHelperUtil.parseError(e);\n        _coreReactNative.SnackController.showError(parsedError);\n        setLoading(false);\n      }\n    };\n    const onOtpSubmit = async otp => {\n      if (!emailConnector) return;\n      setLoading(true);\n      setError('');\n      try {\n        const provider = emailConnector?.provider;\n        await provider.connectOtp({\n          otp\n        });\n        _coreReactNative.EventsController.sendEvent({\n          type: 'track',\n          event: 'EMAIL_VERIFICATION_CODE_PASS'\n        });\n        await _coreReactNative.ConnectionController.connectExternal(emailConnector);\n        _coreReactNative.ModalController.close();\n        _coreReactNative.EventsController.sendEvent({\n          type: 'track',\n          event: 'CONNECT_SUCCESS',\n          properties: {\n            method: 'email',\n            name: emailConnector.name || 'Unknown'\n          }\n        });\n      } catch (e) {\n        _coreReactNative.EventsController.sendEvent({\n          type: 'track',\n          event: 'EMAIL_VERIFICATION_CODE_FAIL'\n        });\n        const parsedError = _coreReactNative.CoreHelperUtil.parseError(e);\n        if (parsedError?.includes('Invalid code')) {\n          setError('Invalid code. Try again.');\n        } else {\n          _coreReactNative.SnackController.showError(parsedError);\n        }\n      }\n      setLoading(false);\n    };\n    return /*#__PURE__*/React.createElement(_w3mOtpCode.OtpCodeView, {\n      loading: loading,\n      error: error,\n      timeLeft: timeLeft,\n      email: data?.email,\n      onRetry: onOtpResend,\n      onSubmit: onOtpSubmit\n    });\n  }\n});","lineCount":92,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"EmailVerifyOtpView"],[7,28,6,26],[7,31,6,29,"EmailVerifyOtpView"],[7,49,6,47],[8,2,7,0],[8,6,7,4,"_valtio"],[8,13,7,11],[8,16,7,14,"require"],[8,23,7,21],[8,24,7,21,"_dependencyMap"],[8,38,7,21],[8,51,7,30],[8,52,7,31],[9,2,8,0],[9,6,8,4,"_react"],[9,12,8,10],[9,15,8,13,"require"],[9,22,8,20],[9,23,8,20,"_dependencyMap"],[9,37,8,20],[9,49,8,28],[9,50,8,29],[10,2,9,0],[10,6,9,4,"_coreReactNative"],[10,22,9,20],[10,25,9,23,"require"],[10,32,9,30],[10,33,9,30,"_dependencyMap"],[10,47,9,30],[10,82,9,61],[10,83,9,62],[11,2,10,0],[11,6,10,4,"_useTimeout"],[11,17,10,15],[11,20,10,18,"_interopRequireDefault"],[11,42,10,40],[11,43,10,41,"require"],[11,50,10,48],[11,51,10,48,"_dependencyMap"],[11,65,10,48],[11,94,10,73],[11,95,10,74],[11,96,10,75],[12,2,11,0],[12,6,11,4,"_w3mOtpCode"],[12,17,11,15],[12,20,11,18,"require"],[12,27,11,25],[12,28,11,25,"_dependencyMap"],[12,42,11,25],[12,76,11,55],[12,77,11,56],[13,2,12,0],[13,11,12,9,"_interopRequireDefault"],[13,33,12,31,"_interopRequireDefault"],[13,34,12,32,"obj"],[13,37,12,35],[13,39,12,37],[14,4,12,39],[14,11,12,46,"obj"],[14,14,12,49],[14,18,12,53,"obj"],[14,21,12,56],[14,22,12,57,"__esModule"],[14,32,12,67],[14,35,12,70,"obj"],[14,38,12,73],[14,41,12,76],[15,6,12,78,"default"],[15,13,12,85],[15,15,12,87,"obj"],[16,4,12,91],[16,5,12,92],[17,2,12,94],[18,2,13,0],[18,11,13,9,"EmailVerifyOtpView"],[18,29,13,27,"EmailVerifyOtpView"],[18,30,13,27],[18,32,13,30],[19,4,14,2],[19,10,14,8],[20,6,15,4,"timeLeft"],[20,14,15,12],[21,6,16,4,"startTimer"],[22,4,17,2],[22,5,17,3],[22,8,17,6],[22,9,17,7],[22,10,17,8],[22,12,17,10,"_useTimeout"],[22,23,17,21],[22,24,17,22,"default"],[22,31,17,29],[22,33,17,31],[22,34,17,32],[22,35,17,33],[23,4,18,2],[23,10,18,8],[24,6,19,4,"data"],[25,4,20,2],[25,5,20,3],[25,8,20,6],[25,9,20,7],[25,10,20,8],[25,12,20,10,"_valtio"],[25,19,20,17],[25,20,20,18,"useSnapshot"],[25,31,20,29],[25,33,20,31,"_coreReactNative"],[25,49,20,47],[25,50,20,48,"RouterController"],[25,66,20,64],[25,67,20,65,"state"],[25,72,20,70],[25,73,20,71],[26,4,21,2],[26,10,21,8],[26,11,21,9,"loading"],[26,18,21,16],[26,20,21,18,"setLoading"],[26,30,21,28],[26,31,21,29],[26,34,21,32],[26,35,21,33],[26,36,21,34],[26,38,21,36,"_react"],[26,44,21,42],[26,45,21,43,"useState"],[26,53,21,51],[26,55,21,53],[26,60,21,58],[26,61,21,59],[27,4,22,2],[27,10,22,8],[27,11,22,9,"error"],[27,16,22,14],[27,18,22,16,"setError"],[27,26,22,24],[27,27,22,25],[27,30,22,28],[27,31,22,29],[27,32,22,30],[27,34,22,32,"_react"],[27,40,22,38],[27,41,22,39,"useState"],[27,49,22,47],[27,51,22,49],[27,53,22,51],[27,54,22,52],[28,4,23,2],[28,10,23,8,"emailConnector"],[28,24,23,22],[28,27,23,25,"_coreReactNative"],[28,43,23,41],[28,44,23,42,"ConnectorController"],[28,63,23,61],[28,64,23,62,"getEmailConnector"],[28,81,23,79],[28,82,23,80],[28,83,23,81],[29,4,24,2],[29,10,24,8,"onOtpResend"],[29,21,24,19],[29,24,24,22],[29,30,24,22,"onOtpResend"],[29,31,24,22],[29,36,24,34],[30,6,25,4],[30,10,25,8],[31,8,26,6],[31,12,26,10],[31,13,26,11,"data"],[31,17,26,15],[31,19,26,17,"email"],[31,24,26,22],[31,28,26,26],[31,29,26,27,"emailConnector"],[31,43,26,41],[31,45,26,43],[32,8,27,6,"setLoading"],[32,18,27,16],[32,19,27,17],[32,23,27,21],[32,24,27,22],[33,8,28,6],[33,14,28,12,"provider"],[33,22,28,20],[33,25,28,23,"emailConnector"],[33,39,28,37],[33,41,28,39,"provider"],[33,49,28,47],[34,8,29,6],[34,14,29,12,"provider"],[34,22,29,20],[34,23,29,21,"connectEmail"],[34,35,29,33],[34,36,29,34],[35,10,30,8,"email"],[35,15,30,13],[35,17,30,15,"data"],[35,21,30,19],[35,22,30,20,"email"],[36,8,31,6],[36,9,31,7],[36,10,31,8],[37,8,32,6,"_coreReactNative"],[37,24,32,22],[37,25,32,23,"SnackController"],[37,40,32,38],[37,41,32,39,"showSuccess"],[37,52,32,50],[37,53,32,51],[37,66,32,64],[37,67,32,65],[38,8,33,6,"startTimer"],[38,18,33,16],[38,19,33,17],[38,21,33,19],[38,22,33,20],[39,8,34,6,"setLoading"],[39,18,34,16],[39,19,34,17],[39,24,34,22],[39,25,34,23],[40,6,35,4],[40,7,35,5],[40,8,35,6],[40,15,35,13,"e"],[40,16,35,14],[40,18,35,16],[41,8,36,6],[41,14,36,12,"parsedError"],[41,25,36,23],[41,28,36,26,"_coreReactNative"],[41,44,36,42],[41,45,36,43,"CoreHelperUtil"],[41,59,36,57],[41,60,36,58,"parseError"],[41,70,36,68],[41,71,36,69,"e"],[41,72,36,70],[41,73,36,71],[42,8,37,6,"_coreReactNative"],[42,24,37,22],[42,25,37,23,"SnackController"],[42,40,37,38],[42,41,37,39,"showError"],[42,50,37,48],[42,51,37,49,"parsedError"],[42,62,37,60],[42,63,37,61],[43,8,38,6,"setLoading"],[43,18,38,16],[43,19,38,17],[43,24,38,22],[43,25,38,23],[44,6,39,4],[45,4,40,2],[45,5,40,3],[46,4,41,2],[46,10,41,8,"onOtpSubmit"],[46,21,41,19],[46,24,41,22],[46,30,41,28,"otp"],[46,33,41,31],[46,37,41,35],[47,6,42,4],[47,10,42,8],[47,11,42,9,"emailConnector"],[47,25,42,23],[47,27,42,25],[48,6,43,4,"setLoading"],[48,16,43,14],[48,17,43,15],[48,21,43,19],[48,22,43,20],[49,6,44,4,"setError"],[49,14,44,12],[49,15,44,13],[49,17,44,15],[49,18,44,16],[50,6,45,4],[50,10,45,8],[51,8,46,6],[51,14,46,12,"provider"],[51,22,46,20],[51,25,46,23,"emailConnector"],[51,39,46,37],[51,41,46,39,"provider"],[51,49,46,47],[52,8,47,6],[52,14,47,12,"provider"],[52,22,47,20],[52,23,47,21,"connectOtp"],[52,33,47,31],[52,34,47,32],[53,10,48,8,"otp"],[54,8,49,6],[54,9,49,7],[54,10,49,8],[55,8,50,6,"_coreReactNative"],[55,24,50,22],[55,25,50,23,"EventsController"],[55,41,50,39],[55,42,50,40,"sendEvent"],[55,51,50,49],[55,52,50,50],[56,10,51,8,"type"],[56,14,51,12],[56,16,51,14],[56,23,51,21],[57,10,52,8,"event"],[57,15,52,13],[57,17,52,15],[58,8,53,6],[58,9,53,7],[58,10,53,8],[59,8,54,6],[59,14,54,12,"_coreReactNative"],[59,30,54,28],[59,31,54,29,"ConnectionController"],[59,51,54,49],[59,52,54,50,"connectExternal"],[59,67,54,65],[59,68,54,66,"emailConnector"],[59,82,54,80],[59,83,54,81],[60,8,55,6,"_coreReactNative"],[60,24,55,22],[60,25,55,23,"ModalController"],[60,40,55,38],[60,41,55,39,"close"],[60,46,55,44],[60,47,55,45],[60,48,55,46],[61,8,56,6,"_coreReactNative"],[61,24,56,22],[61,25,56,23,"EventsController"],[61,41,56,39],[61,42,56,40,"sendEvent"],[61,51,56,49],[61,52,56,50],[62,10,57,8,"type"],[62,14,57,12],[62,16,57,14],[62,23,57,21],[63,10,58,8,"event"],[63,15,58,13],[63,17,58,15],[63,34,58,32],[64,10,59,8,"properties"],[64,20,59,18],[64,22,59,20],[65,12,60,10,"method"],[65,18,60,16],[65,20,60,18],[65,27,60,25],[66,12,61,10,"name"],[66,16,61,14],[66,18,61,16,"emailConnector"],[66,32,61,30],[66,33,61,31,"name"],[66,37,61,35],[66,41,61,39],[67,10,62,8],[68,8,63,6],[68,9,63,7],[68,10,63,8],[69,6,64,4],[69,7,64,5],[69,8,64,6],[69,15,64,13,"e"],[69,16,64,14],[69,18,64,16],[70,8,65,6,"_coreReactNative"],[70,24,65,22],[70,25,65,23,"EventsController"],[70,41,65,39],[70,42,65,40,"sendEvent"],[70,51,65,49],[70,52,65,50],[71,10,66,8,"type"],[71,14,66,12],[71,16,66,14],[71,23,66,21],[72,10,67,8,"event"],[72,15,67,13],[72,17,67,15],[73,8,68,6],[73,9,68,7],[73,10,68,8],[74,8,69,6],[74,14,69,12,"parsedError"],[74,25,69,23],[74,28,69,26,"_coreReactNative"],[74,44,69,42],[74,45,69,43,"CoreHelperUtil"],[74,59,69,57],[74,60,69,58,"parseError"],[74,70,69,68],[74,71,69,69,"e"],[74,72,69,70],[74,73,69,71],[75,8,70,6],[75,12,70,10,"parsedError"],[75,23,70,21],[75,25,70,23,"includes"],[75,33,70,31],[75,34,70,32],[75,48,70,46],[75,49,70,47],[75,51,70,49],[76,10,71,8,"setError"],[76,18,71,16],[76,19,71,17],[76,45,71,43],[76,46,71,44],[77,8,72,6],[77,9,72,7],[77,15,72,13],[78,10,73,8,"_coreReactNative"],[78,26,73,24],[78,27,73,25,"SnackController"],[78,42,73,40],[78,43,73,41,"showError"],[78,52,73,50],[78,53,73,51,"parsedError"],[78,64,73,62],[78,65,73,63],[79,8,74,6],[80,6,75,4],[81,6,76,4,"setLoading"],[81,16,76,14],[81,17,76,15],[81,22,76,20],[81,23,76,21],[82,4,77,2],[82,5,77,3],[83,4,78,2],[83,11,78,9],[83,24,78,22,"React"],[83,29,78,27],[83,30,78,28,"createElement"],[83,43,78,41],[83,44,78,42,"_w3mOtpCode"],[83,55,78,53],[83,56,78,54,"OtpCodeView"],[83,67,78,65],[83,69,78,67],[84,6,79,4,"loading"],[84,13,79,11],[84,15,79,13,"loading"],[84,22,79,20],[85,6,80,4,"error"],[85,11,80,9],[85,13,80,11,"error"],[85,18,80,16],[86,6,81,4,"timeLeft"],[86,14,81,12],[86,16,81,14,"timeLeft"],[86,24,81,22],[87,6,82,4,"email"],[87,11,82,9],[87,13,82,11,"data"],[87,17,82,15],[87,19,82,17,"email"],[87,24,82,22],[88,6,83,4,"onRetry"],[88,13,83,11],[88,15,83,13,"onOtpResend"],[88,26,83,24],[89,6,84,4,"onSubmit"],[89,14,84,12],[89,16,84,14,"onOtpSubmit"],[90,4,85,2],[90,5,85,3],[90,6,85,4],[91,2,86,0],[92,0,86,1],[92,3]],"functionMap":{"names":["<global>","_interopRequireDefault","EmailVerifyOtpView","onOtpResend","onOtpSubmit"],"mappings":"AAA;ACW,+FD;AEC;sBCW;GDgB;sBEC;GFoC;CFS"},"hasCjsExports":true},"type":"js/module"}]}