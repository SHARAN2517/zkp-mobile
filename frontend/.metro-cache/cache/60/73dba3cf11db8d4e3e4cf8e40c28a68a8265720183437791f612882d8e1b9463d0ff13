{"dependencies":[{"name":"../../constants/abis.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":18,"index":134},"end":{"line":4,"column":52,"index":168}}],"key":"yrHWypZlegCAdNz0tkfsugt0VBw=","exportNames":["*"],"imports":1}},{"name":"../../utils/abi/decodeFunctionResult.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":34,"index":204},"end":{"line":5,"column":84,"index":254}}],"key":"PXwyRBt1T1gTrLibjDXwXWimUBk=","exportNames":["*"],"imports":1}},{"name":"../../utils/abi/encodeFunctionData.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":32,"index":288},"end":{"line":6,"column":80,"index":336}}],"key":"X+zmSvhsp+TXYOiEa0Zi/HLVfNc=","exportNames":["*"],"imports":1}},{"name":"../../utils/chain/getChainContractAddress.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":37,"index":375},"end":{"line":7,"column":92,"index":430}}],"key":"LSOHYraFRKmn1vhzttHaVrAvnvY=","exportNames":["*"],"imports":1}},{"name":"../../utils/data/trim.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":18,"index":450},"end":{"line":8,"column":53,"index":485}}],"key":"lNZNO01mPvdMVXvjMtXBMqNQuls=","exportNames":["*"],"imports":1}},{"name":"../../utils/encoding/toHex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":19,"index":506},"end":{"line":9,"column":59,"index":546}}],"key":"H7vq9DbZar/LBdoWrgikLXyV5L0=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/errors.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":20,"index":568},"end":{"line":10,"column":56,"index":604}}],"key":"bJ3HFECcOq3rJI5yc4mdcXLPNdM=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/localBatchGatewayRequest.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":38,"index":644},"end":{"line":11,"column":92,"index":698}}],"key":"XKtjj9pdiUlmnSKO9TgRMAzLtsk=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/namehash.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":22,"index":722},"end":{"line":12,"column":60,"index":760}}],"key":"nLMZ3xzrUMD3X53xXqCx405nmb8=","exportNames":["*"],"imports":1}},{"name":"../../utils/ens/packetToBytes.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":13,"column":27,"index":789},"end":{"line":13,"column":70,"index":832}}],"key":"qZUsVA/n+grVYHWGPUJto9s8big=","exportNames":["*"],"imports":1}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":14,"column":23,"index":857},"end":{"line":14,"column":58,"index":892}}],"key":"d685V9n1u7O1oRJ2ZbnkuLpcslA=","exportNames":["*"],"imports":1}},{"name":"../public/readContract.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":15,"column":26,"index":920},"end":{"line":15,"column":62,"index":956}}],"key":"UxqVCL+UT7iOwBMYmrSJxJgcrJI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getEnsAddress = getEnsAddress;\n  const abis_js_1 = require(_dependencyMap[0], \"../../constants/abis.js\");\n  const decodeFunctionResult_js_1 = require(_dependencyMap[1], \"../../utils/abi/decodeFunctionResult.js\");\n  const encodeFunctionData_js_1 = require(_dependencyMap[2], \"../../utils/abi/encodeFunctionData.js\");\n  const getChainContractAddress_js_1 = require(_dependencyMap[3], \"../../utils/chain/getChainContractAddress.js\");\n  const trim_js_1 = require(_dependencyMap[4], \"../../utils/data/trim.js\");\n  const toHex_js_1 = require(_dependencyMap[5], \"../../utils/encoding/toHex.js\");\n  const errors_js_1 = require(_dependencyMap[6], \"../../utils/ens/errors.js\");\n  const localBatchGatewayRequest_js_1 = require(_dependencyMap[7], \"../../utils/ens/localBatchGatewayRequest.js\");\n  const namehash_js_1 = require(_dependencyMap[8], \"../../utils/ens/namehash.js\");\n  const packetToBytes_js_1 = require(_dependencyMap[9], \"../../utils/ens/packetToBytes.js\");\n  const getAction_js_1 = require(_dependencyMap[10], \"../../utils/getAction.js\");\n  const readContract_js_1 = require(_dependencyMap[11], \"../public/readContract.js\");\n  async function getEnsAddress(client, parameters) {\n    const {\n      blockNumber,\n      blockTag,\n      coinType,\n      name,\n      gatewayUrls,\n      strict\n    } = parameters;\n    const {\n      chain\n    } = client;\n    const universalResolverAddress = (() => {\n      if (parameters.universalResolverAddress) return parameters.universalResolverAddress;\n      if (!chain) throw new Error('client chain not configured. universalResolverAddress is required.');\n      return (0, getChainContractAddress_js_1.getChainContractAddress)({\n        blockNumber,\n        chain,\n        contract: 'ensUniversalResolver'\n      });\n    })();\n    const tlds = chain?.ensTlds;\n    if (tlds && !tlds.some(tld => name.endsWith(tld))) return null;\n    const args = (() => {\n      if (coinType != null) return [(0, namehash_js_1.namehash)(name), BigInt(coinType)];\n      return [(0, namehash_js_1.namehash)(name)];\n    })();\n    try {\n      const functionData = (0, encodeFunctionData_js_1.encodeFunctionData)({\n        abi: abis_js_1.addressResolverAbi,\n        functionName: 'addr',\n        args\n      });\n      const readContractParameters = {\n        address: universalResolverAddress,\n        abi: abis_js_1.universalResolverResolveAbi,\n        functionName: 'resolveWithGateways',\n        args: [(0, toHex_js_1.toHex)((0, packetToBytes_js_1.packetToBytes)(name)), functionData, gatewayUrls ?? [localBatchGatewayRequest_js_1.localBatchGatewayUrl]],\n        blockNumber,\n        blockTag\n      };\n      const readContractAction = (0, getAction_js_1.getAction)(client, readContract_js_1.readContract, 'readContract');\n      const res = await readContractAction(readContractParameters);\n      if (res[0] === '0x') return null;\n      const address = (0, decodeFunctionResult_js_1.decodeFunctionResult)({\n        abi: abis_js_1.addressResolverAbi,\n        args,\n        functionName: 'addr',\n        data: res[0]\n      });\n      if (address === '0x') return null;\n      if ((0, trim_js_1.trim)(address) === '0x00') return null;\n      return address;\n    } catch (err) {\n      if (strict) throw err;\n      if ((0, errors_js_1.isNullUniversalResolverError)(err)) return null;\n      throw err;\n    }\n  }\n});","lineCount":79,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"getEnsAddress"],[7,23,3,21],[7,26,3,24,"getEnsAddress"],[7,39,3,37],[8,2,4,0],[8,8,4,6,"abis_js_1"],[8,17,4,15],[8,20,4,18,"require"],[8,27,4,25],[8,28,4,25,"_dependencyMap"],[8,42,4,25],[8,72,4,51],[8,73,4,52],[9,2,5,0],[9,8,5,6,"decodeFunctionResult_js_1"],[9,33,5,31],[9,36,5,34,"require"],[9,43,5,41],[9,44,5,41,"_dependencyMap"],[9,58,5,41],[9,104,5,83],[9,105,5,84],[10,2,6,0],[10,8,6,6,"encodeFunctionData_js_1"],[10,31,6,29],[10,34,6,32,"require"],[10,41,6,39],[10,42,6,39,"_dependencyMap"],[10,56,6,39],[10,100,6,79],[10,101,6,80],[11,2,7,0],[11,8,7,6,"getChainContractAddress_js_1"],[11,36,7,34],[11,39,7,37,"require"],[11,46,7,44],[11,47,7,44,"_dependencyMap"],[11,61,7,44],[11,112,7,91],[11,113,7,92],[12,2,8,0],[12,8,8,6,"trim_js_1"],[12,17,8,15],[12,20,8,18,"require"],[12,27,8,25],[12,28,8,25,"_dependencyMap"],[12,42,8,25],[12,73,8,52],[12,74,8,53],[13,2,9,0],[13,8,9,6,"toHex_js_1"],[13,18,9,16],[13,21,9,19,"require"],[13,28,9,26],[13,29,9,26,"_dependencyMap"],[13,43,9,26],[13,79,9,58],[13,80,9,59],[14,2,10,0],[14,8,10,6,"errors_js_1"],[14,19,10,17],[14,22,10,20,"require"],[14,29,10,27],[14,30,10,27,"_dependencyMap"],[14,44,10,27],[14,76,10,55],[14,77,10,56],[15,2,11,0],[15,8,11,6,"localBatchGatewayRequest_js_1"],[15,37,11,35],[15,40,11,38,"require"],[15,47,11,45],[15,48,11,45,"_dependencyMap"],[15,62,11,45],[15,112,11,91],[15,113,11,92],[16,2,12,0],[16,8,12,6,"namehash_js_1"],[16,21,12,19],[16,24,12,22,"require"],[16,31,12,29],[16,32,12,29,"_dependencyMap"],[16,46,12,29],[16,80,12,59],[16,81,12,60],[17,2,13,0],[17,8,13,6,"packetToBytes_js_1"],[17,26,13,24],[17,29,13,27,"require"],[17,36,13,34],[17,37,13,34,"_dependencyMap"],[17,51,13,34],[17,90,13,69],[17,91,13,70],[18,2,14,0],[18,8,14,6,"getAction_js_1"],[18,22,14,20],[18,25,14,23,"require"],[18,32,14,30],[18,33,14,30,"_dependencyMap"],[18,47,14,30],[18,79,14,57],[18,80,14,58],[19,2,15,0],[19,8,15,6,"readContract_js_1"],[19,25,15,23],[19,28,15,26,"require"],[19,35,15,33],[19,36,15,33,"_dependencyMap"],[19,50,15,33],[19,83,15,61],[19,84,15,62],[20,2,16,0],[20,17,16,15,"getEnsAddress"],[20,30,16,28,"getEnsAddress"],[20,31,16,29,"client"],[20,37,16,35],[20,39,16,37,"parameters"],[20,49,16,47],[20,51,16,49],[21,4,17,4],[21,10,17,10],[22,6,17,12,"blockNumber"],[22,17,17,23],[23,6,17,25,"blockTag"],[23,14,17,33],[24,6,17,35,"coinType"],[24,14,17,43],[25,6,17,45,"name"],[25,10,17,49],[26,6,17,51,"gatewayUrls"],[26,17,17,62],[27,6,17,64,"strict"],[28,4,17,71],[28,5,17,72],[28,8,17,75,"parameters"],[28,18,17,85],[29,4,18,4],[29,10,18,10],[30,6,18,12,"chain"],[31,4,18,18],[31,5,18,19],[31,8,18,22,"client"],[31,14,18,28],[32,4,19,4],[32,10,19,10,"universalResolverAddress"],[32,34,19,34],[32,37,19,37],[32,38,19,38],[32,44,19,44],[33,6,20,8],[33,10,20,12,"parameters"],[33,20,20,22],[33,21,20,23,"universalResolverAddress"],[33,45,20,47],[33,47,21,12],[33,54,21,19,"parameters"],[33,64,21,29],[33,65,21,30,"universalResolverAddress"],[33,89,21,54],[34,6,22,8],[34,10,22,12],[34,11,22,13,"chain"],[34,16,22,18],[34,18,23,12],[34,24,23,18],[34,28,23,22,"Error"],[34,33,23,27],[34,34,23,28],[34,102,23,96],[34,103,23,97],[35,6,24,8],[35,13,24,15],[35,14,24,16],[35,15,24,17],[35,17,24,19,"getChainContractAddress_js_1"],[35,45,24,47],[35,46,24,48,"getChainContractAddress"],[35,69,24,71],[35,71,24,73],[36,8,25,12,"blockNumber"],[36,19,25,23],[37,8,26,12,"chain"],[37,13,26,17],[38,8,27,12,"contract"],[38,16,27,20],[38,18,27,22],[39,6,28,8],[39,7,28,9],[39,8,28,10],[40,4,29,4],[40,5,29,5],[40,7,29,7],[40,8,29,8],[41,4,30,4],[41,10,30,10,"tlds"],[41,14,30,14],[41,17,30,17,"chain"],[41,22,30,22],[41,24,30,24,"ensTlds"],[41,31,30,31],[42,4,31,4],[42,8,31,8,"tlds"],[42,12,31,12],[42,16,31,16],[42,17,31,17,"tlds"],[42,21,31,21],[42,22,31,22,"some"],[42,26,31,26],[42,27,31,28,"tld"],[42,30,31,31],[42,34,31,36,"name"],[42,38,31,40],[42,39,31,41,"endsWith"],[42,47,31,49],[42,48,31,50,"tld"],[42,51,31,53],[42,52,31,54],[42,53,31,55],[42,55,32,8],[42,62,32,15],[42,66,32,19],[43,4,33,4],[43,10,33,10,"args"],[43,14,33,14],[43,17,33,17],[43,18,33,18],[43,24,33,24],[44,6,34,8],[44,10,34,12,"coinType"],[44,18,34,20],[44,22,34,24],[44,26,34,28],[44,28,35,12],[44,35,35,19],[44,36,35,20],[44,37,35,21],[44,38,35,22],[44,40,35,24,"namehash_js_1"],[44,53,35,37],[44,54,35,38,"namehash"],[44,62,35,46],[44,64,35,48,"name"],[44,68,35,52],[44,69,35,53],[44,71,35,55,"BigInt"],[44,77,35,61],[44,78,35,62,"coinType"],[44,86,35,70],[44,87,35,71],[44,88,35,72],[45,6,36,8],[45,13,36,15],[45,14,36,16],[45,15,36,17],[45,16,36,18],[45,18,36,20,"namehash_js_1"],[45,31,36,33],[45,32,36,34,"namehash"],[45,40,36,42],[45,42,36,44,"name"],[45,46,36,48],[45,47,36,49],[45,48,36,50],[46,4,37,4],[46,5,37,5],[46,7,37,7],[46,8,37,8],[47,4,38,4],[47,8,38,8],[48,6,39,8],[48,12,39,14,"functionData"],[48,24,39,26],[48,27,39,29],[48,28,39,30],[48,29,39,31],[48,31,39,33,"encodeFunctionData_js_1"],[48,54,39,56],[48,55,39,57,"encodeFunctionData"],[48,73,39,75],[48,75,39,77],[49,8,40,12,"abi"],[49,11,40,15],[49,13,40,17,"abis_js_1"],[49,22,40,26],[49,23,40,27,"addressResolverAbi"],[49,41,40,45],[50,8,41,12,"functionName"],[50,20,41,24],[50,22,41,26],[50,28,41,32],[51,8,42,12,"args"],[52,6,43,8],[52,7,43,9],[52,8,43,10],[53,6,44,8],[53,12,44,14,"readContractParameters"],[53,34,44,36],[53,37,44,39],[54,8,45,12,"address"],[54,15,45,19],[54,17,45,21,"universalResolverAddress"],[54,41,45,45],[55,8,46,12,"abi"],[55,11,46,15],[55,13,46,17,"abis_js_1"],[55,22,46,26],[55,23,46,27,"universalResolverResolveAbi"],[55,50,46,54],[56,8,47,12,"functionName"],[56,20,47,24],[56,22,47,26],[56,43,47,47],[57,8,48,12,"args"],[57,12,48,16],[57,14,48,18],[57,15,49,16],[57,16,49,17],[57,17,49,18],[57,19,49,20,"toHex_js_1"],[57,29,49,30],[57,30,49,31,"toHex"],[57,35,49,36],[57,37,49,38],[57,38,49,39],[57,39,49,40],[57,41,49,42,"packetToBytes_js_1"],[57,59,49,60],[57,60,49,61,"packetToBytes"],[57,73,49,74],[57,75,49,76,"name"],[57,79,49,80],[57,80,49,81],[57,81,49,82],[57,83,50,16,"functionData"],[57,95,50,28],[57,97,51,16,"gatewayUrls"],[57,108,51,27],[57,112,51,31],[57,113,51,32,"localBatchGatewayRequest_js_1"],[57,142,51,61],[57,143,51,62,"localBatchGatewayUrl"],[57,163,51,82],[57,164,51,83],[57,165,52,13],[58,8,53,12,"blockNumber"],[58,19,53,23],[59,8,54,12,"blockTag"],[60,6,55,8],[60,7,55,9],[61,6,56,8],[61,12,56,14,"readContractAction"],[61,30,56,32],[61,33,56,35],[61,34,56,36],[61,35,56,37],[61,37,56,39,"getAction_js_1"],[61,51,56,53],[61,52,56,54,"getAction"],[61,61,56,63],[61,63,56,65,"client"],[61,69,56,71],[61,71,56,73,"readContract_js_1"],[61,88,56,90],[61,89,56,91,"readContract"],[61,101,56,103],[61,103,56,105],[61,117,56,119],[61,118,56,120],[62,6,57,8],[62,12,57,14,"res"],[62,15,57,17],[62,18,57,20],[62,24,57,26,"readContractAction"],[62,42,57,44],[62,43,57,45,"readContractParameters"],[62,65,57,67],[62,66,57,68],[63,6,58,8],[63,10,58,12,"res"],[63,13,58,15],[63,14,58,16],[63,15,58,17],[63,16,58,18],[63,21,58,23],[63,25,58,27],[63,27,59,12],[63,34,59,19],[63,38,59,23],[64,6,60,8],[64,12,60,14,"address"],[64,19,60,21],[64,22,60,24],[64,23,60,25],[64,24,60,26],[64,26,60,28,"decodeFunctionResult_js_1"],[64,51,60,53],[64,52,60,54,"decodeFunctionResult"],[64,72,60,74],[64,74,60,76],[65,8,61,12,"abi"],[65,11,61,15],[65,13,61,17,"abis_js_1"],[65,22,61,26],[65,23,61,27,"addressResolverAbi"],[65,41,61,45],[66,8,62,12,"args"],[66,12,62,16],[67,8,63,12,"functionName"],[67,20,63,24],[67,22,63,26],[67,28,63,32],[68,8,64,12,"data"],[68,12,64,16],[68,14,64,18,"res"],[68,17,64,21],[68,18,64,22],[68,19,64,23],[69,6,65,8],[69,7,65,9],[69,8,65,10],[70,6,66,8],[70,10,66,12,"address"],[70,17,66,19],[70,22,66,24],[70,26,66,28],[70,28,67,12],[70,35,67,19],[70,39,67,23],[71,6,68,8],[71,10,68,12],[71,11,68,13],[71,12,68,14],[71,14,68,16,"trim_js_1"],[71,23,68,25],[71,24,68,26,"trim"],[71,28,68,30],[71,30,68,32,"address"],[71,37,68,39],[71,38,68,40],[71,43,68,45],[71,49,68,51],[71,51,69,12],[71,58,69,19],[71,62,69,23],[72,6,70,8],[72,13,70,15,"address"],[72,20,70,22],[73,4,71,4],[73,5,71,5],[73,6,72,4],[73,13,72,11,"err"],[73,16,72,14],[73,18,72,16],[74,6,73,8],[74,10,73,12,"strict"],[74,16,73,18],[74,18,74,12],[74,24,74,18,"err"],[74,27,74,21],[75,6,75,8],[75,10,75,12],[75,11,75,13],[75,12,75,14],[75,14,75,16,"errors_js_1"],[75,25,75,27],[75,26,75,28,"isNullUniversalResolverError"],[75,54,75,56],[75,56,75,58,"err"],[75,59,75,61],[75,60,75,62],[75,62,76,12],[75,69,76,19],[75,73,76,23],[76,6,77,8],[76,12,77,14,"err"],[76,15,77,17],[77,4,78,4],[78,2,79,0],[79,0,79,1],[79,3]],"functionMap":{"names":["<global>","getEnsAddress","<anonymous>","tlds.some$argument_0"],"mappings":"AAA;ACe;sCCG;KDU;2BEE,2BF;kBCE;KDI;CD0C"},"hasCjsExports":true},"type":"js/module"}]}