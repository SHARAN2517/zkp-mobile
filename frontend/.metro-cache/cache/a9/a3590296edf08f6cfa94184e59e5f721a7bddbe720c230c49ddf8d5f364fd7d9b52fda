{"dependencies":[{"name":"../../constants/abis.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":18,"index":195},"end":{"line":5,"column":52,"index":229}}],"key":"yrHWypZlegCAdNz0tkfsugt0VBw=","exportNames":["*"],"imports":1}},{"name":"../../constants/solidity.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":22,"index":253},"end":{"line":6,"column":60,"index":291}}],"key":"0Aw1gQC8Q2BQB0GeIZ+zyz3Q/vc=","exportNames":["*"],"imports":1}},{"name":"../abi/decodeFunctionData.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":32,"index":325},"end":{"line":7,"column":71,"index":364}}],"key":"s0Op5EdD4aYjeSWtXAfMIW82jVc=","exportNames":["*"],"imports":1}},{"name":"../abi/encodeErrorResult.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":31,"index":397},"end":{"line":8,"column":69,"index":435}}],"key":"wlxMTKm1riznq33S/jtX9zPeMHo=","exportNames":["*"],"imports":1}},{"name":"../abi/encodeFunctionResult.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":34,"index":471},"end":{"line":9,"column":75,"index":512}}],"key":"zo1VIKo4m8UryMrwfE4nLLSV0tM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.localBatchGatewayUrl = void 0;\n  exports.localBatchGatewayRequest = localBatchGatewayRequest;\n  const abis_js_1 = require(_dependencyMap[0], \"../../constants/abis.js\");\n  const solidity_js_1 = require(_dependencyMap[1], \"../../constants/solidity.js\");\n  const decodeFunctionData_js_1 = require(_dependencyMap[2], \"../abi/decodeFunctionData.js\");\n  const encodeErrorResult_js_1 = require(_dependencyMap[3], \"../abi/encodeErrorResult.js\");\n  const encodeFunctionResult_js_1 = require(_dependencyMap[4], \"../abi/encodeFunctionResult.js\");\n  exports.localBatchGatewayUrl = 'x-batch-gateway:true';\n  async function localBatchGatewayRequest(parameters) {\n    const {\n      data,\n      ccipRequest\n    } = parameters;\n    const {\n      args: [queries]\n    } = (0, decodeFunctionData_js_1.decodeFunctionData)({\n      abi: abis_js_1.batchGatewayAbi,\n      data\n    });\n    const failures = [];\n    const responses = [];\n    await Promise.all(queries.map(async (query, i) => {\n      try {\n        responses[i] = query.urls.includes(exports.localBatchGatewayUrl) ? await localBatchGatewayRequest({\n          data: query.data,\n          ccipRequest\n        }) : await ccipRequest(query);\n        failures[i] = false;\n      } catch (err) {\n        failures[i] = true;\n        responses[i] = encodeError(err);\n      }\n    }));\n    return (0, encodeFunctionResult_js_1.encodeFunctionResult)({\n      abi: abis_js_1.batchGatewayAbi,\n      functionName: 'query',\n      result: [failures, responses]\n    });\n  }\n  function encodeError(error) {\n    if (error.name === 'HttpRequestError' && error.status) return (0, encodeErrorResult_js_1.encodeErrorResult)({\n      abi: abis_js_1.batchGatewayAbi,\n      errorName: 'HttpError',\n      args: [error.status, error.shortMessage]\n    });\n    return (0, encodeErrorResult_js_1.encodeErrorResult)({\n      abi: [solidity_js_1.solidityError],\n      errorName: 'Error',\n      args: ['shortMessage' in error ? error.shortMessage : error.message]\n    });\n  }\n});","lineCount":58,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"localBatchGatewayUrl"],[7,30,3,28],[7,33,3,31],[7,38,3,36],[7,39,3,37],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"localBatchGatewayRequest"],[8,34,4,32],[8,37,4,35,"localBatchGatewayRequest"],[8,61,4,59],[9,2,5,0],[9,8,5,6,"abis_js_1"],[9,17,5,15],[9,20,5,18,"require"],[9,27,5,25],[9,28,5,25,"_dependencyMap"],[9,42,5,25],[9,72,5,51],[9,73,5,52],[10,2,6,0],[10,8,6,6,"solidity_js_1"],[10,21,6,19],[10,24,6,22,"require"],[10,31,6,29],[10,32,6,29,"_dependencyMap"],[10,46,6,29],[10,80,6,59],[10,81,6,60],[11,2,7,0],[11,8,7,6,"decodeFunctionData_js_1"],[11,31,7,29],[11,34,7,32,"require"],[11,41,7,39],[11,42,7,39,"_dependencyMap"],[11,56,7,39],[11,91,7,70],[11,92,7,71],[12,2,8,0],[12,8,8,6,"encodeErrorResult_js_1"],[12,30,8,28],[12,33,8,31,"require"],[12,40,8,38],[12,41,8,38,"_dependencyMap"],[12,55,8,38],[12,89,8,68],[12,90,8,69],[13,2,9,0],[13,8,9,6,"encodeFunctionResult_js_1"],[13,33,9,31],[13,36,9,34,"require"],[13,43,9,41],[13,44,9,41,"_dependencyMap"],[13,58,9,41],[13,95,9,74],[13,96,9,75],[14,2,10,0,"exports"],[14,9,10,7],[14,10,10,8,"localBatchGatewayUrl"],[14,30,10,28],[14,33,10,31],[14,55,10,53],[15,2,11,0],[15,17,11,15,"localBatchGatewayRequest"],[15,41,11,39,"localBatchGatewayRequest"],[15,42,11,40,"parameters"],[15,52,11,50],[15,54,11,52],[16,4,12,4],[16,10,12,10],[17,6,12,12,"data"],[17,10,12,16],[18,6,12,18,"ccipRequest"],[19,4,12,30],[19,5,12,31],[19,8,12,34,"parameters"],[19,18,12,44],[20,4,13,4],[20,10,13,10],[21,6,13,12,"args"],[21,10,13,16],[21,12,13,18],[21,13,13,19,"queries"],[21,20,13,26],[22,4,13,29],[22,5,13,30],[22,8,13,33],[22,9,13,34],[22,10,13,35],[22,12,13,37,"decodeFunctionData_js_1"],[22,35,13,60],[22,36,13,61,"decodeFunctionData"],[22,54,13,79],[22,56,13,81],[23,6,13,83,"abi"],[23,9,13,86],[23,11,13,88,"abis_js_1"],[23,20,13,97],[23,21,13,98,"batchGatewayAbi"],[23,36,13,113],[24,6,13,115,"data"],[25,4,13,120],[25,5,13,121],[25,6,13,122],[26,4,14,4],[26,10,14,10,"failures"],[26,18,14,18],[26,21,14,21],[26,23,14,23],[27,4,15,4],[27,10,15,10,"responses"],[27,19,15,19],[27,22,15,22],[27,24,15,24],[28,4,16,4],[28,10,16,10,"Promise"],[28,17,16,17],[28,18,16,18,"all"],[28,21,16,21],[28,22,16,22,"queries"],[28,29,16,29],[28,30,16,30,"map"],[28,33,16,33],[28,34,16,34],[28,41,16,41,"query"],[28,46,16,46],[28,48,16,48,"i"],[28,49,16,49],[28,54,16,54],[29,6,17,8],[29,10,17,12],[30,8,18,12,"responses"],[30,17,18,21],[30,18,18,22,"i"],[30,19,18,23],[30,20,18,24],[30,23,18,27,"query"],[30,28,18,32],[30,29,18,33,"urls"],[30,33,18,37],[30,34,18,38,"includes"],[30,42,18,46],[30,43,18,47,"exports"],[30,50,18,54],[30,51,18,55,"localBatchGatewayUrl"],[30,71,18,75],[30,72,18,76],[30,75,19,18],[30,81,19,24,"localBatchGatewayRequest"],[30,105,19,48],[30,106,19,49],[31,10,19,51,"data"],[31,14,19,55],[31,16,19,57,"query"],[31,21,19,62],[31,22,19,63,"data"],[31,26,19,67],[32,10,19,69,"ccipRequest"],[33,8,19,81],[33,9,19,82],[33,10,19,83],[33,13,20,18],[33,19,20,24,"ccipRequest"],[33,30,20,35],[33,31,20,36,"query"],[33,36,20,41],[33,37,20,42],[34,8,21,12,"failures"],[34,16,21,20],[34,17,21,21,"i"],[34,18,21,22],[34,19,21,23],[34,22,21,26],[34,27,21,31],[35,6,22,8],[35,7,22,9],[35,8,23,8],[35,15,23,15,"err"],[35,18,23,18],[35,20,23,20],[36,8,24,12,"failures"],[36,16,24,20],[36,17,24,21,"i"],[36,18,24,22],[36,19,24,23],[36,22,24,26],[36,26,24,30],[37,8,25,12,"responses"],[37,17,25,21],[37,18,25,22,"i"],[37,19,25,23],[37,20,25,24],[37,23,25,27,"encodeError"],[37,34,25,38],[37,35,25,39,"err"],[37,38,25,42],[37,39,25,43],[38,6,26,8],[39,4,27,4],[39,5,27,5],[39,6,27,6],[39,7,27,7],[40,4,28,4],[40,11,28,11],[40,12,28,12],[40,13,28,13],[40,15,28,15,"encodeFunctionResult_js_1"],[40,40,28,40],[40,41,28,41,"encodeFunctionResult"],[40,61,28,61],[40,63,28,63],[41,6,29,8,"abi"],[41,9,29,11],[41,11,29,13,"abis_js_1"],[41,20,29,22],[41,21,29,23,"batchGatewayAbi"],[41,36,29,38],[42,6,30,8,"functionName"],[42,18,30,20],[42,20,30,22],[42,27,30,29],[43,6,31,8,"result"],[43,12,31,14],[43,14,31,16],[43,15,31,17,"failures"],[43,23,31,25],[43,25,31,27,"responses"],[43,34,31,36],[44,4,32,4],[44,5,32,5],[44,6,32,6],[45,2,33,0],[46,2,34,0],[46,11,34,9,"encodeError"],[46,22,34,20,"encodeError"],[46,23,34,21,"error"],[46,28,34,26],[46,30,34,28],[47,4,35,4],[47,8,35,8,"error"],[47,13,35,13],[47,14,35,14,"name"],[47,18,35,18],[47,23,35,23],[47,41,35,41],[47,45,35,45,"error"],[47,50,35,50],[47,51,35,51,"status"],[47,57,35,57],[47,59,36,8],[47,66,36,15],[47,67,36,16],[47,68,36,17],[47,70,36,19,"encodeErrorResult_js_1"],[47,92,36,41],[47,93,36,42,"encodeErrorResult"],[47,110,36,59],[47,112,36,61],[48,6,37,12,"abi"],[48,9,37,15],[48,11,37,17,"abis_js_1"],[48,20,37,26],[48,21,37,27,"batchGatewayAbi"],[48,36,37,42],[49,6,38,12,"errorName"],[49,15,38,21],[49,17,38,23],[49,28,38,34],[50,6,39,12,"args"],[50,10,39,16],[50,12,39,18],[50,13,39,19,"error"],[50,18,39,24],[50,19,39,25,"status"],[50,25,39,31],[50,27,39,33,"error"],[50,32,39,38],[50,33,39,39,"shortMessage"],[50,45,39,51],[51,4,40,8],[51,5,40,9],[51,6,40,10],[52,4,41,4],[52,11,41,11],[52,12,41,12],[52,13,41,13],[52,15,41,15,"encodeErrorResult_js_1"],[52,37,41,37],[52,38,41,38,"encodeErrorResult"],[52,55,41,55],[52,57,41,57],[53,6,42,8,"abi"],[53,9,42,11],[53,11,42,13],[53,12,42,14,"solidity_js_1"],[53,25,42,27],[53,26,42,28,"solidityError"],[53,39,42,41],[53,40,42,42],[54,6,43,8,"errorName"],[54,15,43,17],[54,17,43,19],[54,24,43,26],[55,6,44,8,"args"],[55,10,44,12],[55,12,44,14],[55,13,44,15],[55,27,44,29],[55,31,44,33,"error"],[55,36,44,38],[55,39,44,41,"error"],[55,44,44,46],[55,45,44,47,"shortMessage"],[55,57,44,59],[55,60,44,62,"error"],[55,65,44,67],[55,66,44,68,"message"],[55,73,44,75],[56,4,45,4],[56,5,45,5],[56,6,45,6],[57,2,46,0],[58,0,46,1],[58,3]],"functionMap":{"names":["<global>","localBatchGatewayRequest","queries.map$argument_0","encodeError"],"mappings":"AAA;ACU;kCCK;KDW;CDM;AGC;CHY"},"hasCjsExports":true},"type":"js/module"}]}