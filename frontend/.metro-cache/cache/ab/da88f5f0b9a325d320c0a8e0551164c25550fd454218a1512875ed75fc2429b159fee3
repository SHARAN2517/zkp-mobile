{"dependencies":[{"name":"../core/AbiParameters.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":22,"index":315},"end":{"line":9,"column":57,"index":350}}],"key":"/sVMhwf1AfoqTr5jgYs2T/mi1rs=","exportNames":["*"],"imports":1}},{"name":"../core/Authorization.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":22,"index":374},"end":{"line":10,"column":57,"index":409}}],"key":"GFDg0o98xc2TpjXL7KNtKK0TvPQ=","exportNames":["*"],"imports":1}},{"name":"../core/Errors.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":15,"index":426},"end":{"line":11,"column":43,"index":454}}],"key":"87oNr/OfL6VSawq1ib5V4r1Acqs=","exportNames":["*"],"imports":1}},{"name":"../core/Hex.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":12,"index":468},"end":{"line":12,"column":37,"index":493}}],"key":"xN1ZFzyz8KT/lkwgI7DSq0qNEew=","exportNames":["*"],"imports":1}},{"name":"../core/Secp256k1.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":13,"column":18,"index":513},"end":{"line":13,"column":49,"index":544}}],"key":"TIu7tO68t6+V/pQ/qtPOcHP04qo=","exportNames":["*"],"imports":1}},{"name":"../core/Signature.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":14,"column":18,"index":564},"end":{"line":14,"column":49,"index":595}}],"key":"OoXary+s2v3MLlrWVfSRwBHnOvU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.InvalidWrappedSignatureError = exports.suffixParameters = exports.magicBytes = void 0;\n  exports.assert = assert;\n  exports.from = from;\n  exports.unwrap = unwrap;\n  exports.wrap = wrap;\n  exports.validate = validate;\n  const AbiParameters = require(_dependencyMap[0], \"../core/AbiParameters.js\");\n  const Authorization = require(_dependencyMap[1], \"../core/Authorization.js\");\n  const Errors = require(_dependencyMap[2], \"../core/Errors.js\");\n  const Hex = require(_dependencyMap[3], \"../core/Hex.js\");\n  const Secp256k1 = require(_dependencyMap[4], \"../core/Secp256k1.js\");\n  const Signature = require(_dependencyMap[5], \"../core/Signature.js\");\n  exports.magicBytes = '0x8010801080108010801080108010801080108010801080108010801080108010';\n  exports.suffixParameters = AbiParameters.from('(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data');\n  function assert(value) {\n    if (typeof value === 'string') {\n      if (Hex.slice(value, -32) !== exports.magicBytes) throw new InvalidWrappedSignatureError(value);\n    } else Signature.assert(value.authorization);\n  }\n  function from(value) {\n    if (typeof value === 'string') return unwrap(value);\n    return value;\n  }\n  function unwrap(wrapped) {\n    assert(wrapped);\n    const suffixLength = Hex.toNumber(Hex.slice(wrapped, -64, -32));\n    const suffix = Hex.slice(wrapped, -suffixLength - 64, -64);\n    const signature = Hex.slice(wrapped, 0, -suffixLength - 64);\n    const [auth, to, data] = AbiParameters.decode(exports.suffixParameters, suffix);\n    const authorization = Authorization.from({\n      address: auth.delegation,\n      chainId: Number(auth.chainId),\n      nonce: auth.nonce,\n      yParity: auth.yParity,\n      r: auth.r,\n      s: auth.s\n    });\n    return {\n      authorization,\n      signature,\n      ...(data && data !== '0x' ? {\n        data,\n        to\n      } : {})\n    };\n  }\n  function wrap(value) {\n    const {\n      data,\n      signature\n    } = value;\n    assert(value);\n    const self = Secp256k1.recoverAddress({\n      payload: Authorization.getSignPayload(value.authorization),\n      signature: Signature.from(value.authorization)\n    });\n    const suffix = AbiParameters.encode(exports.suffixParameters, [{\n      ...value.authorization,\n      delegation: value.authorization.address,\n      chainId: BigInt(value.authorization.chainId)\n    }, value.to ?? self, data ?? '0x']);\n    const suffixLength = Hex.fromNumber(Hex.size(suffix), {\n      size: 32\n    });\n    return Hex.concat(signature, suffix, suffixLength, exports.magicBytes);\n  }\n  function validate(value) {\n    try {\n      assert(value);\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  class InvalidWrappedSignatureError extends Errors.BaseError {\n    constructor(wrapped) {\n      super(`Value \\`${wrapped}\\` is an invalid ERC-8010 wrapped signature.`);\n      Object.defineProperty(this, \"name\", {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: 'SignatureErc8010.InvalidWrappedSignatureError'\n      });\n    }\n  }\n  exports.InvalidWrappedSignatureError = InvalidWrappedSignatureError;\n});","lineCount":93,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"InvalidWrappedSignatureError"],[7,38,3,36],[7,41,3,39,"exports"],[7,48,3,46],[7,49,3,47,"suffixParameters"],[7,65,3,63],[7,68,3,66,"exports"],[7,75,3,73],[7,76,3,74,"magicBytes"],[7,86,3,84],[7,89,3,87],[7,94,3,92],[7,95,3,93],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"assert"],[8,16,4,14],[8,19,4,17,"assert"],[8,25,4,23],[9,2,5,0,"exports"],[9,9,5,7],[9,10,5,8,"from"],[9,14,5,12],[9,17,5,15,"from"],[9,21,5,19],[10,2,6,0,"exports"],[10,9,6,7],[10,10,6,8,"unwrap"],[10,16,6,14],[10,19,6,17,"unwrap"],[10,25,6,23],[11,2,7,0,"exports"],[11,9,7,7],[11,10,7,8,"wrap"],[11,14,7,12],[11,17,7,15,"wrap"],[11,21,7,19],[12,2,8,0,"exports"],[12,9,8,7],[12,10,8,8,"validate"],[12,18,8,16],[12,21,8,19,"validate"],[12,29,8,27],[13,2,9,0],[13,8,9,6,"AbiParameters"],[13,21,9,19],[13,24,9,22,"require"],[13,31,9,29],[13,32,9,29,"_dependencyMap"],[13,46,9,29],[13,77,9,56],[13,78,9,57],[14,2,10,0],[14,8,10,6,"Authorization"],[14,21,10,19],[14,24,10,22,"require"],[14,31,10,29],[14,32,10,29,"_dependencyMap"],[14,46,10,29],[14,77,10,56],[14,78,10,57],[15,2,11,0],[15,8,11,6,"Errors"],[15,14,11,12],[15,17,11,15,"require"],[15,24,11,22],[15,25,11,22,"_dependencyMap"],[15,39,11,22],[15,63,11,42],[15,64,11,43],[16,2,12,0],[16,8,12,6,"Hex"],[16,11,12,9],[16,14,12,12,"require"],[16,21,12,19],[16,22,12,19,"_dependencyMap"],[16,36,12,19],[16,57,12,36],[16,58,12,37],[17,2,13,0],[17,8,13,6,"Secp256k1"],[17,17,13,15],[17,20,13,18,"require"],[17,27,13,25],[17,28,13,25,"_dependencyMap"],[17,42,13,25],[17,69,13,48],[17,70,13,49],[18,2,14,0],[18,8,14,6,"Signature"],[18,17,14,15],[18,20,14,18,"require"],[18,27,14,25],[18,28,14,25,"_dependencyMap"],[18,42,14,25],[18,69,14,48],[18,70,14,49],[19,2,15,0,"exports"],[19,9,15,7],[19,10,15,8,"magicBytes"],[19,20,15,18],[19,23,15,21],[19,91,15,89],[20,2,16,0,"exports"],[20,9,16,7],[20,10,16,8,"suffixParameters"],[20,26,16,24],[20,29,16,27,"AbiParameters"],[20,42,16,40],[20,43,16,41,"from"],[20,47,16,45],[20,48,16,46],[20,163,16,161],[20,164,16,162],[21,2,17,0],[21,11,17,9,"assert"],[21,17,17,15,"assert"],[21,18,17,16,"value"],[21,23,17,21],[21,25,17,23],[22,4,18,4],[22,8,18,8],[22,15,18,15,"value"],[22,20,18,20],[22,25,18,25],[22,33,18,33],[22,35,18,35],[23,6,19,8],[23,10,19,12,"Hex"],[23,13,19,15],[23,14,19,16,"slice"],[23,19,19,21],[23,20,19,22,"value"],[23,25,19,27],[23,27,19,29],[23,28,19,30],[23,30,19,32],[23,31,19,33],[23,36,19,38,"exports"],[23,43,19,45],[23,44,19,46,"magicBytes"],[23,54,19,56],[23,56,20,12],[23,62,20,18],[23,66,20,22,"InvalidWrappedSignatureError"],[23,94,20,50],[23,95,20,51,"value"],[23,100,20,56],[23,101,20,57],[24,4,21,4],[24,5,21,5],[24,11,23,8,"Signature"],[24,20,23,17],[24,21,23,18,"assert"],[24,27,23,24],[24,28,23,25,"value"],[24,33,23,30],[24,34,23,31,"authorization"],[24,47,23,44],[24,48,23,45],[25,2,24,0],[26,2,25,0],[26,11,25,9,"from"],[26,15,25,13,"from"],[26,16,25,14,"value"],[26,21,25,19],[26,23,25,21],[27,4,26,4],[27,8,26,8],[27,15,26,15,"value"],[27,20,26,20],[27,25,26,25],[27,33,26,33],[27,35,27,8],[27,42,27,15,"unwrap"],[27,48,27,21],[27,49,27,22,"value"],[27,54,27,27],[27,55,27,28],[28,4,28,4],[28,11,28,11,"value"],[28,16,28,16],[29,2,29,0],[30,2,30,0],[30,11,30,9,"unwrap"],[30,17,30,15,"unwrap"],[30,18,30,16,"wrapped"],[30,25,30,23],[30,27,30,25],[31,4,31,4,"assert"],[31,10,31,10],[31,11,31,11,"wrapped"],[31,18,31,18],[31,19,31,19],[32,4,32,4],[32,10,32,10,"suffixLength"],[32,22,32,22],[32,25,32,25,"Hex"],[32,28,32,28],[32,29,32,29,"toNumber"],[32,37,32,37],[32,38,32,38,"Hex"],[32,41,32,41],[32,42,32,42,"slice"],[32,47,32,47],[32,48,32,48,"wrapped"],[32,55,32,55],[32,57,32,57],[32,58,32,58],[32,60,32,60],[32,62,32,62],[32,63,32,63],[32,65,32,65],[32,66,32,66],[32,67,32,67],[33,4,33,4],[33,10,33,10,"suffix"],[33,16,33,16],[33,19,33,19,"Hex"],[33,22,33,22],[33,23,33,23,"slice"],[33,28,33,28],[33,29,33,29,"wrapped"],[33,36,33,36],[33,38,33,38],[33,39,33,39,"suffixLength"],[33,51,33,51],[33,54,33,54],[33,56,33,56],[33,58,33,58],[33,59,33,59],[33,61,33,61],[33,62,33,62],[34,4,34,4],[34,10,34,10,"signature"],[34,19,34,19],[34,22,34,22,"Hex"],[34,25,34,25],[34,26,34,26,"slice"],[34,31,34,31],[34,32,34,32,"wrapped"],[34,39,34,39],[34,41,34,41],[34,42,34,42],[34,44,34,44],[34,45,34,45,"suffixLength"],[34,57,34,57],[34,60,34,60],[34,62,34,62],[34,63,34,63],[35,4,35,4],[35,10,35,10],[35,11,35,11,"auth"],[35,15,35,15],[35,17,35,17,"to"],[35,19,35,19],[35,21,35,21,"data"],[35,25,35,25],[35,26,35,26],[35,29,35,29,"AbiParameters"],[35,42,35,42],[35,43,35,43,"decode"],[35,49,35,49],[35,50,35,50,"exports"],[35,57,35,57],[35,58,35,58,"suffixParameters"],[35,74,35,74],[35,76,35,76,"suffix"],[35,82,35,82],[35,83,35,83],[36,4,36,4],[36,10,36,10,"authorization"],[36,23,36,23],[36,26,36,26,"Authorization"],[36,39,36,39],[36,40,36,40,"from"],[36,44,36,44],[36,45,36,45],[37,6,37,8,"address"],[37,13,37,15],[37,15,37,17,"auth"],[37,19,37,21],[37,20,37,22,"delegation"],[37,30,37,32],[38,6,38,8,"chainId"],[38,13,38,15],[38,15,38,17,"Number"],[38,21,38,23],[38,22,38,24,"auth"],[38,26,38,28],[38,27,38,29,"chainId"],[38,34,38,36],[38,35,38,37],[39,6,39,8,"nonce"],[39,11,39,13],[39,13,39,15,"auth"],[39,17,39,19],[39,18,39,20,"nonce"],[39,23,39,25],[40,6,40,8,"yParity"],[40,13,40,15],[40,15,40,17,"auth"],[40,19,40,21],[40,20,40,22,"yParity"],[40,27,40,29],[41,6,41,8,"r"],[41,7,41,9],[41,9,41,11,"auth"],[41,13,41,15],[41,14,41,16,"r"],[41,15,41,17],[42,6,42,8,"s"],[42,7,42,9],[42,9,42,11,"auth"],[42,13,42,15],[42,14,42,16,"s"],[43,4,43,4],[43,5,43,5],[43,6,43,6],[44,4,44,4],[44,11,44,11],[45,6,45,8,"authorization"],[45,19,45,21],[46,6,46,8,"signature"],[46,15,46,17],[47,6,47,8],[47,10,47,12,"data"],[47,14,47,16],[47,18,47,20,"data"],[47,22,47,24],[47,27,47,29],[47,31,47,33],[47,34,47,36],[48,8,47,38,"data"],[48,12,47,42],[49,8,47,44,"to"],[50,6,47,47],[50,7,47,48],[50,10,47,51],[50,11,47,52],[50,12,47,53],[51,4,48,4],[51,5,48,5],[52,2,49,0],[53,2,50,0],[53,11,50,9,"wrap"],[53,15,50,13,"wrap"],[53,16,50,14,"value"],[53,21,50,19],[53,23,50,21],[54,4,51,4],[54,10,51,10],[55,6,51,12,"data"],[55,10,51,16],[56,6,51,18,"signature"],[57,4,51,28],[57,5,51,29],[57,8,51,32,"value"],[57,13,51,37],[58,4,52,4,"assert"],[58,10,52,10],[58,11,52,11,"value"],[58,16,52,16],[58,17,52,17],[59,4,53,4],[59,10,53,10,"self"],[59,14,53,14],[59,17,53,17,"Secp256k1"],[59,26,53,26],[59,27,53,27,"recoverAddress"],[59,41,53,41],[59,42,53,42],[60,6,54,8,"payload"],[60,13,54,15],[60,15,54,17,"Authorization"],[60,28,54,30],[60,29,54,31,"getSignPayload"],[60,43,54,45],[60,44,54,46,"value"],[60,49,54,51],[60,50,54,52,"authorization"],[60,63,54,65],[60,64,54,66],[61,6,55,8,"signature"],[61,15,55,17],[61,17,55,19,"Signature"],[61,26,55,28],[61,27,55,29,"from"],[61,31,55,33],[61,32,55,34,"value"],[61,37,55,39],[61,38,55,40,"authorization"],[61,51,55,53],[62,4,56,4],[62,5,56,5],[62,6,56,6],[63,4,57,4],[63,10,57,10,"suffix"],[63,16,57,16],[63,19,57,19,"AbiParameters"],[63,32,57,32],[63,33,57,33,"encode"],[63,39,57,39],[63,40,57,40,"exports"],[63,47,57,47],[63,48,57,48,"suffixParameters"],[63,64,57,64],[63,66,57,66],[63,67,58,8],[64,6,59,12],[64,9,59,15,"value"],[64,14,59,20],[64,15,59,21,"authorization"],[64,28,59,34],[65,6,60,12,"delegation"],[65,16,60,22],[65,18,60,24,"value"],[65,23,60,29],[65,24,60,30,"authorization"],[65,37,60,43],[65,38,60,44,"address"],[65,45,60,51],[66,6,61,12,"chainId"],[66,13,61,19],[66,15,61,21,"BigInt"],[66,21,61,27],[66,22,61,28,"value"],[66,27,61,33],[66,28,61,34,"authorization"],[66,41,61,47],[66,42,61,48,"chainId"],[66,49,61,55],[67,4,62,8],[67,5,62,9],[67,7,63,8,"value"],[67,12,63,13],[67,13,63,14,"to"],[67,15,63,16],[67,19,63,20,"self"],[67,23,63,24],[67,25,64,8,"data"],[67,29,64,12],[67,33,64,16],[67,37,64,20],[67,38,65,5],[67,39,65,6],[68,4,66,4],[68,10,66,10,"suffixLength"],[68,22,66,22],[68,25,66,25,"Hex"],[68,28,66,28],[68,29,66,29,"fromNumber"],[68,39,66,39],[68,40,66,40,"Hex"],[68,43,66,43],[68,44,66,44,"size"],[68,48,66,48],[68,49,66,49,"suffix"],[68,55,66,55],[68,56,66,56],[68,58,66,58],[69,6,66,60,"size"],[69,10,66,64],[69,12,66,66],[70,4,66,69],[70,5,66,70],[70,6,66,71],[71,4,67,4],[71,11,67,11,"Hex"],[71,14,67,14],[71,15,67,15,"concat"],[71,21,67,21],[71,22,67,22,"signature"],[71,31,67,31],[71,33,67,33,"suffix"],[71,39,67,39],[71,41,67,41,"suffixLength"],[71,53,67,53],[71,55,67,55,"exports"],[71,62,67,62],[71,63,67,63,"magicBytes"],[71,73,67,73],[71,74,67,74],[72,2,68,0],[73,2,69,0],[73,11,69,9,"validate"],[73,19,69,17,"validate"],[73,20,69,18,"value"],[73,25,69,23],[73,27,69,25],[74,4,70,4],[74,8,70,8],[75,6,71,8,"assert"],[75,12,71,14],[75,13,71,15,"value"],[75,18,71,20],[75,19,71,21],[76,6,72,8],[76,13,72,15],[76,17,72,19],[77,4,73,4],[77,5,73,5],[77,6,74,4],[77,12,74,10],[78,6,75,8],[78,13,75,15],[78,18,75,20],[79,4,76,4],[80,2,77,0],[81,2,78,0],[81,8,78,6,"InvalidWrappedSignatureError"],[81,36,78,34],[81,45,78,43,"Errors"],[81,51,78,49],[81,52,78,50,"BaseError"],[81,61,78,59],[81,62,78,60],[82,4,79,4,"constructor"],[82,15,79,15,"constructor"],[82,16,79,16,"wrapped"],[82,23,79,23],[82,25,79,25],[83,6,80,8],[83,11,80,13],[83,12,80,14],[83,23,80,25,"wrapped"],[83,30,80,32],[83,76,80,78],[83,77,80,79],[84,6,81,8,"Object"],[84,12,81,14],[84,13,81,15,"defineProperty"],[84,27,81,29],[84,28,81,30],[84,32,81,34],[84,34,81,36],[84,40,81,42],[84,42,81,44],[85,8,82,12,"enumerable"],[85,18,82,22],[85,20,82,24],[85,24,82,28],[86,8,83,12,"configurable"],[86,20,83,24],[86,22,83,26],[86,26,83,30],[87,8,84,12,"writable"],[87,16,84,20],[87,18,84,22],[87,22,84,26],[88,8,85,12,"value"],[88,13,85,17],[88,15,85,19],[89,6,86,8],[89,7,86,9],[89,8,86,10],[90,4,87,4],[91,2,88,0],[92,2,89,0,"exports"],[92,9,89,7],[92,10,89,8,"InvalidWrappedSignatureError"],[92,38,89,36],[92,41,89,39,"InvalidWrappedSignatureError"],[92,69,89,67],[93,0,89,68],[93,3]],"functionMap":{"names":["<global>","assert","from","unwrap","wrap","validate","InvalidWrappedSignatureError","InvalidWrappedSignatureError#constructor"],"mappings":"AAA;ACgB;CDO;AEC;CFI;AGC;CHmB;AIC;CJkB;AKC;CLQ;AMC;ICC;KDQ;CNC"},"hasCjsExports":true},"type":"js/module"}]}