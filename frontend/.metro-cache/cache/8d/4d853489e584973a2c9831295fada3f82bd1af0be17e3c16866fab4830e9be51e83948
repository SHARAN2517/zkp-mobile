{"dependencies":[{"name":"viem","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}}],"key":"j/IgNjXxvBQHVn25oogzznxEA1o=","exportNames":["*"],"imports":1}},{"name":"viem/actions","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":36},"end":{"line":2,"column":114,"index":150}}],"key":"ZnkTrC54T/ipr81lr238wDQi2zw=","exportNames":["*"],"imports":1}},{"name":"../utils/getAction.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":151},"end":{"line":3,"column":50,"index":201}}],"key":"F8bgdxTmqm4aDMPVsYqdIuQq4Hg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.waitForTransactionReceipt = waitForTransactionReceipt;\n  var _viem = require(_dependencyMap[0], \"viem\");\n  var _viemActions = require(_dependencyMap[1], \"viem/actions\");\n  var _utilsGetActionJs = require(_dependencyMap[2], \"../utils/getAction.js\");\n  async function waitForTransactionReceipt(config, parameters) {\n    const {\n      chainId,\n      timeout = 0,\n      ...rest\n    } = parameters;\n    const client = config.getClient({\n      chainId\n    });\n    const action = (0, _utilsGetActionJs.getAction)(client, _viemActions.waitForTransactionReceipt, 'waitForTransactionReceipt');\n    const receipt = await action({\n      ...rest,\n      timeout\n    });\n    if (receipt.status === 'reverted') {\n      const action_getTransaction = (0, _utilsGetActionJs.getAction)(client, _viemActions.getTransaction, 'getTransaction');\n      const {\n        from: account,\n        ...txn\n      } = await action_getTransaction({\n        hash: receipt.transactionHash\n      });\n      const action_call = (0, _utilsGetActionJs.getAction)(client, _viemActions.call, 'call');\n      const code = await action_call({\n        ...txn,\n        account,\n        data: txn.input,\n        gasPrice: txn.type !== 'eip1559' ? txn.gasPrice : undefined,\n        maxFeePerGas: txn.type === 'eip1559' ? txn.maxFeePerGas : undefined,\n        maxPriorityFeePerGas: txn.type === 'eip1559' ? txn.maxPriorityFeePerGas : undefined\n      });\n      const reason = code?.data ? (0, _viem.hexToString)(`0x${code.data.substring(138)}`) : 'unknown reason';\n      throw new Error(reason);\n    }\n    return {\n      ...receipt,\n      chainId: client.chain.id\n    };\n  }\n});","lineCount":50,"map":[[7,2,4,0,"exports"],[7,9,4,0],[7,10,4,0,"waitForTransactionReceipt"],[7,35,4,0],[7,38,4,0,"waitForTransactionReceipt"],[7,63,4,0],[8,2,1,0],[8,6,1,0,"_viem"],[8,11,1,0],[8,14,1,0,"require"],[8,21,1,0],[8,22,1,0,"_dependencyMap"],[8,36,1,0],[9,2,2,0],[9,6,2,0,"_viemActions"],[9,18,2,0],[9,21,2,0,"require"],[9,28,2,0],[9,29,2,0,"_dependencyMap"],[9,43,2,0],[10,2,3,0],[10,6,3,0,"_utilsGetActionJs"],[10,23,3,0],[10,26,3,0,"require"],[10,33,3,0],[10,34,3,0,"_dependencyMap"],[10,48,3,0],[11,2,4,7],[11,17,4,22,"waitForTransactionReceipt"],[11,42,4,47,"waitForTransactionReceipt"],[11,43,4,48,"config"],[11,49,4,54],[11,51,4,56,"parameters"],[11,61,4,66],[11,63,4,68],[12,4,5,4],[12,10,5,10],[13,6,5,12,"chainId"],[13,13,5,19],[14,6,5,21,"timeout"],[14,13,5,28],[14,16,5,31],[14,17,5,32],[15,6,5,34],[15,9,5,37,"rest"],[16,4,5,42],[16,5,5,43],[16,8,5,46,"parameters"],[16,18,5,56],[17,4,6,4],[17,10,6,10,"client"],[17,16,6,16],[17,19,6,19,"config"],[17,25,6,25],[17,26,6,26,"getClient"],[17,35,6,35],[17,36,6,36],[18,6,6,38,"chainId"],[19,4,6,46],[19,5,6,47],[19,6,6,48],[20,4,7,4],[20,10,7,10,"action"],[20,16,7,16],[20,19,7,19],[20,23,7,19,"getAction"],[20,40,7,28],[20,41,7,28,"getAction"],[20,50,7,28],[20,52,7,29,"client"],[20,58,7,35],[20,60,7,37,"viem_waitForTransactionReceipt"],[20,72,7,67],[20,73,7,67,"waitForTransactionReceipt"],[20,98,7,67],[20,100,7,69],[20,127,7,96],[20,128,7,97],[21,4,8,4],[21,10,8,10,"receipt"],[21,17,8,17],[21,20,8,20],[21,26,8,26,"action"],[21,32,8,32],[21,33,8,33],[22,6,8,35],[22,9,8,38,"rest"],[22,13,8,42],[23,6,8,44,"timeout"],[24,4,8,52],[24,5,8,53],[24,6,8,54],[25,4,9,4],[25,8,9,8,"receipt"],[25,15,9,15],[25,16,9,16,"status"],[25,22,9,22],[25,27,9,27],[25,37,9,37],[25,39,9,39],[26,6,10,8],[26,12,10,14,"action_getTransaction"],[26,33,10,35],[26,36,10,38],[26,40,10,38,"getAction"],[26,57,10,47],[26,58,10,47,"getAction"],[26,67,10,47],[26,69,10,48,"client"],[26,75,10,54],[26,77,10,56,"getTransaction"],[26,89,10,70],[26,90,10,70,"getTransaction"],[26,104,10,70],[26,106,10,72],[26,122,10,88],[26,123,10,89],[27,6,11,8],[27,12,11,14],[28,8,11,16,"from"],[28,12,11,20],[28,14,11,22,"account"],[28,21,11,29],[29,8,11,31],[29,11,11,34,"txn"],[30,6,11,38],[30,7,11,39],[30,10,11,42],[30,16,11,48,"action_getTransaction"],[30,37,11,69],[30,38,11,70],[31,8,12,12,"hash"],[31,12,12,16],[31,14,12,18,"receipt"],[31,21,12,25],[31,22,12,26,"transactionHash"],[32,6,13,8],[32,7,13,9],[32,8,13,10],[33,6,14,8],[33,12,14,14,"action_call"],[33,23,14,25],[33,26,14,28],[33,30,14,28,"getAction"],[33,47,14,37],[33,48,14,37,"getAction"],[33,57,14,37],[33,59,14,38,"client"],[33,65,14,44],[33,67,14,46,"call"],[33,79,14,50],[33,80,14,50,"call"],[33,84,14,50],[33,86,14,52],[33,92,14,58],[33,93,14,59],[34,6,15,8],[34,12,15,14,"code"],[34,16,15,18],[34,19,15,21],[34,25,15,27,"action_call"],[34,36,15,38],[34,37,15,39],[35,8,16,12],[35,11,16,15,"txn"],[35,14,16,18],[36,8,17,12,"account"],[36,15,17,19],[37,8,18,12,"data"],[37,12,18,16],[37,14,18,18,"txn"],[37,17,18,21],[37,18,18,22,"input"],[37,23,18,27],[38,8,19,12,"gasPrice"],[38,16,19,20],[38,18,19,22,"txn"],[38,21,19,25],[38,22,19,26,"type"],[38,26,19,30],[38,31,19,35],[38,40,19,44],[38,43,19,47,"txn"],[38,46,19,50],[38,47,19,51,"gasPrice"],[38,55,19,59],[38,58,19,62,"undefined"],[38,67,19,71],[39,8,20,12,"maxFeePerGas"],[39,20,20,24],[39,22,20,26,"txn"],[39,25,20,29],[39,26,20,30,"type"],[39,30,20,34],[39,35,20,39],[39,44,20,48],[39,47,20,51,"txn"],[39,50,20,54],[39,51,20,55,"maxFeePerGas"],[39,63,20,67],[39,66,20,70,"undefined"],[39,75,20,79],[40,8,21,12,"maxPriorityFeePerGas"],[40,28,21,32],[40,30,21,34,"txn"],[40,33,21,37],[40,34,21,38,"type"],[40,38,21,42],[40,43,21,47],[40,52,21,56],[40,55,21,59,"txn"],[40,58,21,62],[40,59,21,63,"maxPriorityFeePerGas"],[40,79,21,83],[40,82,21,86,"undefined"],[41,6,22,8],[41,7,22,9],[41,8,22,10],[42,6,23,8],[42,12,23,14,"reason"],[42,18,23,20],[42,21,23,23,"code"],[42,25,23,27],[42,27,23,29,"data"],[42,31,23,33],[42,34,24,14],[42,38,24,14,"hexToString"],[42,43,24,25],[42,44,24,25,"hexToString"],[42,55,24,25],[42,57,24,26],[42,62,24,31,"code"],[42,66,24,35],[42,67,24,36,"data"],[42,71,24,40],[42,72,24,41,"substring"],[42,81,24,50],[42,82,24,51],[42,85,24,54],[42,86,24,55],[42,88,24,57],[42,89,24,58],[42,92,25,14],[42,108,25,30],[43,6,26,8],[43,12,26,14],[43,16,26,18,"Error"],[43,21,26,23],[43,22,26,24,"reason"],[43,28,26,30],[43,29,26,31],[44,4,27,4],[45,4,28,4],[45,11,28,11],[46,6,29,8],[46,9,29,11,"receipt"],[46,16,29,18],[47,6,30,8,"chainId"],[47,13,30,15],[47,15,30,17,"client"],[47,21,30,23],[47,22,30,24,"chain"],[47,27,30,29],[47,28,30,30,"id"],[48,4,31,4],[48,5,31,5],[49,2,32,0],[50,0,32,1],[50,3]],"functionMap":{"names":["<global>","waitForTransactionReceipt"],"mappings":"AAA;OCG;CD4B"},"hasCjsExports":false},"type":"js/module"}]}