{"dependencies":[{"name":"viem","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"j/IgNjXxvBQHVn25oogzznxEA1o=","exportNames":["*"],"imports":1}},{"name":"./multicall.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":55},"end":{"line":2,"column":43,"index":98}}],"key":"50tuhtVNup/Ij0qk4r2ShHOsbr0=","exportNames":["*"],"imports":1}},{"name":"./readContract.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":49,"index":148}}],"key":"f8fwBg5C1IdtJUmdb5c57cXKAj8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.readContracts = readContracts;\n  var _viem = require(_dependencyMap[0], \"viem\");\n  var _multicallJs = require(_dependencyMap[1], \"./multicall.js\");\n  var _readContractJs = require(_dependencyMap[2], \"./readContract.js\");\n  async function readContracts(config, parameters) {\n    const {\n      allowFailure = true,\n      blockNumber,\n      blockTag,\n      ...rest\n    } = parameters;\n    const contracts = parameters.contracts;\n    try {\n      const contractsByChainId = {};\n      for (const [index, contract] of contracts.entries()) {\n        const chainId = contract.chainId ?? config.state.chainId;\n        if (!contractsByChainId[chainId]) contractsByChainId[chainId] = [];\n        contractsByChainId[chainId]?.push({\n          contract,\n          index\n        });\n      }\n      const promises = () => Object.entries(contractsByChainId).map(([chainId, contracts]) => (0, _multicallJs.multicall)(config, {\n        ...rest,\n        allowFailure,\n        blockNumber,\n        blockTag,\n        chainId: Number.parseInt(chainId, 10),\n        contracts: contracts.map(({\n          contract\n        }) => contract)\n      }));\n      const multicallResults = (await Promise.all(promises())).flat();\n      // Reorder the contract results back to the order they were\n      // provided in.\n      const resultIndexes = Object.values(contractsByChainId).flatMap(contracts => contracts.map(({\n        index\n      }) => index));\n      return multicallResults.reduce((results, result, index) => {\n        if (results) results[resultIndexes[index]] = result;\n        return results;\n      }, []);\n    } catch (error) {\n      if (error instanceof _viem.ContractFunctionExecutionError) throw error;\n      const promises = () => contracts.map(contract => (0, _readContractJs.readContract)(config, {\n        ...contract,\n        blockNumber,\n        blockTag\n      }));\n      if (allowFailure) return (await Promise.allSettled(promises())).map(result => {\n        if (result.status === 'fulfilled') return {\n          result: result.value,\n          status: 'success'\n        };\n        return {\n          error: result.reason,\n          result: undefined,\n          status: 'failure'\n        };\n      });\n      return await Promise.all(promises());\n    }\n  }\n});","lineCount":70,"map":[[7,2,4,0,"exports"],[7,9,4,0],[7,10,4,0,"readContracts"],[7,23,4,0],[7,26,4,0,"readContracts"],[7,39,4,0],[8,2,1,0],[8,6,1,0,"_viem"],[8,11,1,0],[8,14,1,0,"require"],[8,21,1,0],[8,22,1,0,"_dependencyMap"],[8,36,1,0],[9,2,2,0],[9,6,2,0,"_multicallJs"],[9,18,2,0],[9,21,2,0,"require"],[9,28,2,0],[9,29,2,0,"_dependencyMap"],[9,43,2,0],[10,2,3,0],[10,6,3,0,"_readContractJs"],[10,21,3,0],[10,24,3,0,"require"],[10,31,3,0],[10,32,3,0,"_dependencyMap"],[10,46,3,0],[11,2,4,7],[11,17,4,22,"readContracts"],[11,30,4,35,"readContracts"],[11,31,4,36,"config"],[11,37,4,42],[11,39,4,44,"parameters"],[11,49,4,54],[11,51,4,56],[12,4,5,4],[12,10,5,10],[13,6,5,12,"allowFailure"],[13,18,5,24],[13,21,5,27],[13,25,5,31],[14,6,5,33,"blockNumber"],[14,17,5,44],[15,6,5,46,"blockTag"],[15,14,5,54],[16,6,5,56],[16,9,5,59,"rest"],[17,4,5,64],[17,5,5,65],[17,8,5,68,"parameters"],[17,18,5,78],[18,4,6,4],[18,10,6,10,"contracts"],[18,19,6,19],[18,22,6,22,"parameters"],[18,32,6,32],[18,33,6,33,"contracts"],[18,42,6,42],[19,4,7,4],[19,8,7,8],[20,6,8,8],[20,12,8,14,"contractsByChainId"],[20,30,8,32],[20,33,8,35],[20,34,8,36],[20,35,8,37],[21,6,9,8],[21,11,9,13],[21,17,9,19],[21,18,9,20,"index"],[21,23,9,25],[21,25,9,27,"contract"],[21,33,9,35],[21,34,9,36],[21,38,9,40,"contracts"],[21,47,9,49],[21,48,9,50,"entries"],[21,55,9,57],[21,56,9,58],[21,57,9,59],[21,59,9,61],[22,8,10,12],[22,14,10,18,"chainId"],[22,21,10,25],[22,24,10,28,"contract"],[22,32,10,36],[22,33,10,37,"chainId"],[22,40,10,44],[22,44,10,48,"config"],[22,50,10,54],[22,51,10,55,"state"],[22,56,10,60],[22,57,10,61,"chainId"],[22,64,10,68],[23,8,11,12],[23,12,11,16],[23,13,11,17,"contractsByChainId"],[23,31,11,35],[23,32,11,36,"chainId"],[23,39,11,43],[23,40,11,44],[23,42,12,16,"contractsByChainId"],[23,60,12,34],[23,61,12,35,"chainId"],[23,68,12,42],[23,69,12,43],[23,72,12,46],[23,74,12,48],[24,8,13,12,"contractsByChainId"],[24,26,13,30],[24,27,13,31,"chainId"],[24,34,13,38],[24,35,13,39],[24,37,13,41,"push"],[24,41,13,45],[24,42,13,46],[25,10,13,48,"contract"],[25,18,13,56],[26,10,13,58,"index"],[27,8,13,64],[27,9,13,65],[27,10,13,66],[28,6,14,8],[29,6,15,8],[29,12,15,14,"promises"],[29,20,15,22],[29,23,15,25,"promises"],[29,24,15,25],[29,29,15,31,"Object"],[29,35,15,37],[29,36,15,38,"entries"],[29,43,15,45],[29,44,15,46,"contractsByChainId"],[29,62,15,64],[29,63,15,65],[29,64,15,66,"map"],[29,67,15,69],[29,68,15,70],[29,69,15,71],[29,70,15,72,"chainId"],[29,77,15,79],[29,79,15,81,"contracts"],[29,88,15,90],[29,89,15,91],[29,94,15,96],[29,98,15,96,"multicall"],[29,110,15,105],[29,111,15,105,"multicall"],[29,120,15,105],[29,122,15,106,"config"],[29,128,15,112],[29,130,15,114],[30,8,16,12],[30,11,16,15,"rest"],[30,15,16,19],[31,8,17,12,"allowFailure"],[31,20,17,24],[32,8,18,12,"blockNumber"],[32,19,18,23],[33,8,19,12,"blockTag"],[33,16,19,20],[34,8,20,12,"chainId"],[34,15,20,19],[34,17,20,21,"Number"],[34,23,20,27],[34,24,20,28,"parseInt"],[34,32,20,36],[34,33,20,37,"chainId"],[34,40,20,44],[34,42,20,46],[34,44,20,48],[34,45,20,49],[35,8,21,12,"contracts"],[35,17,21,21],[35,19,21,23,"contracts"],[35,28,21,32],[35,29,21,33,"map"],[35,32,21,36],[35,33,21,37],[35,34,21,38],[36,10,21,40,"contract"],[37,8,21,49],[37,9,21,50],[37,14,21,55,"contract"],[37,22,21,63],[38,6,22,8],[38,7,22,9],[38,8,22,10],[38,9,22,11],[39,6,23,8],[39,12,23,14,"multicallResults"],[39,28,23,30],[39,31,23,33],[39,32,23,34],[39,38,23,40,"Promise"],[39,45,23,47],[39,46,23,48,"all"],[39,49,23,51],[39,50,23,52,"promises"],[39,58,23,60],[39,59,23,61],[39,60,23,62],[39,61,23,63],[39,63,23,65,"flat"],[39,67,23,69],[39,68,23,70],[39,69,23,71],[40,6,24,8],[41,6,25,8],[42,6,26,8],[42,12,26,14,"resultIndexes"],[42,25,26,27],[42,28,26,30,"Object"],[42,34,26,36],[42,35,26,37,"values"],[42,41,26,43],[42,42,26,44,"contractsByChainId"],[42,60,26,62],[42,61,26,63],[42,62,26,64,"flatMap"],[42,69,26,71],[42,70,26,73,"contracts"],[42,79,26,82],[42,83,26,87,"contracts"],[42,92,26,96],[42,93,26,97,"map"],[42,96,26,100],[42,97,26,101],[42,98,26,102],[43,8,26,104,"index"],[44,6,26,110],[44,7,26,111],[44,12,26,116,"index"],[44,17,26,121],[44,18,26,122],[44,19,26,123],[45,6,27,8],[45,13,27,15,"multicallResults"],[45,29,27,31],[45,30,27,32,"reduce"],[45,36,27,38],[45,37,27,39],[45,38,27,40,"results"],[45,45,27,47],[45,47,27,49,"result"],[45,53,27,55],[45,55,27,57,"index"],[45,60,27,62],[45,65,27,67],[46,8,28,12],[46,12,28,16,"results"],[46,19,28,23],[46,21,29,16,"results"],[46,28,29,23],[46,29,29,24,"resultIndexes"],[46,42,29,37],[46,43,29,38,"index"],[46,48,29,43],[46,49,29,44],[46,50,29,45],[46,53,29,48,"result"],[46,59,29,54],[47,8,30,12],[47,15,30,19,"results"],[47,22,30,26],[48,6,31,8],[48,7,31,9],[48,9,31,11],[48,11,31,13],[48,12,31,14],[49,4,32,4],[49,5,32,5],[49,6,33,4],[49,13,33,11,"error"],[49,18,33,16],[49,20,33,18],[50,6,34,8],[50,10,34,12,"error"],[50,15,34,17],[50,27,34,29,"ContractFunctionExecutionError"],[50,32,34,59],[50,33,34,59,"ContractFunctionExecutionError"],[50,63,34,59],[50,65,35,12],[50,71,35,18,"error"],[50,76,35,23],[51,6,36,8],[51,12,36,14,"promises"],[51,20,36,22],[51,23,36,25,"promises"],[51,24,36,25],[51,29,36,31,"contracts"],[51,38,36,40],[51,39,36,41,"map"],[51,42,36,44],[51,43,36,46,"contract"],[51,51,36,54],[51,55,36,59],[51,59,36,59,"readContract"],[51,74,36,71],[51,75,36,71,"readContract"],[51,87,36,71],[51,89,36,72,"config"],[51,95,36,78],[51,97,36,80],[52,8,36,82],[52,11,36,85,"contract"],[52,19,36,93],[53,8,36,95,"blockNumber"],[53,19,36,106],[54,8,36,108,"blockTag"],[55,6,36,117],[55,7,36,118],[55,8,36,119],[55,9,36,120],[56,6,37,8],[56,10,37,12,"allowFailure"],[56,22,37,24],[56,24,38,12],[56,31,38,19],[56,32,38,20],[56,38,38,26,"Promise"],[56,45,38,33],[56,46,38,34,"allSettled"],[56,56,38,44],[56,57,38,45,"promises"],[56,65,38,53],[56,66,38,54],[56,67,38,55],[56,68,38,56],[56,70,38,58,"map"],[56,73,38,61],[56,74,38,63,"result"],[56,80,38,69],[56,84,38,74],[57,8,39,16],[57,12,39,20,"result"],[57,18,39,26],[57,19,39,27,"status"],[57,25,39,33],[57,30,39,38],[57,41,39,49],[57,43,40,20],[57,50,40,27],[58,10,40,29,"result"],[58,16,40,35],[58,18,40,37,"result"],[58,24,40,43],[58,25,40,44,"value"],[58,30,40,49],[59,10,40,51,"status"],[59,16,40,57],[59,18,40,59],[60,8,40,69],[60,9,40,70],[61,8,41,16],[61,15,41,23],[62,10,41,25,"error"],[62,15,41,30],[62,17,41,32,"result"],[62,23,41,38],[62,24,41,39,"reason"],[62,30,41,45],[63,10,41,47,"result"],[63,16,41,53],[63,18,41,55,"undefined"],[63,27,41,64],[64,10,41,66,"status"],[64,16,41,72],[64,18,41,74],[65,8,41,84],[65,9,41,85],[66,6,42,12],[66,7,42,13],[66,8,42,14],[67,6,43,8],[67,13,43,16],[67,19,43,22,"Promise"],[67,26,43,29],[67,27,43,30,"all"],[67,30,43,33],[67,31,43,34,"promises"],[67,39,43,42],[67,40,43,43],[67,41,43,44],[67,42,43,45],[68,4,44,4],[69,2,45,0],[70,0,45,1],[70,3]],"functionMap":{"names":["<global>","readContracts","promises","Object.entries.map$argument_0","contracts.map$argument_0","Object.values.flatMap$argument_0","multicallResults.reduce$argument_0","map$argument_0"],"mappings":"AAA;OCG;yBCW,6CC;qCCM,0BD;UDC,CD;wEII,6BD,oBC,CJ;uCKC;SLI;yBCK,oBE,0EF,CD;8DME;aNI;CDG"},"hasCjsExports":false},"type":"js/module"}]}